```{r echo = FALSE}
library(knitr)

# Color text
colorize <- function(x, color) {
  
  if (knitr::is_latex_output()) {
    
    sprintf("\\textcolor{%s}{%s}", color, x)
    
  } else if (knitr::is_html_output()) {
    
    sprintf("<span style='color: %s;'>%s</span>", color, x)
    
  } else { x }
}
```

# Primeros pasos {#primeros-pasos}

:::: {.blackbox data-latex=""}

Scripts usados:

* [**script04.R**](https://github.com/dadosdelaplace/courses-intro-R/blob/main/scripts/script04.R). Ver en <https://github.com/dadosdelaplace/courses-intro-R/blob/main/scripts/script04.R>

::::

&nbsp;

Ya hemos instalado lo necesario as칤 que vamos a empezar por lo sencillo y recordando parte de lo que ya hemos realizado: <mark>**쯖칩mo usar `R` como una calculadora?**</mark>

## Primeros pasos en R: calculadora

쯊e acuerdas de lo que era la <mark>**CONSOLA**</mark>? En el caso de `RStudio`, la consola ser치 esa peque침a pantalla que tenemos en la parte inferior (la pesta침a _Console_). Vamos a trabajar de momento solo en esa ventana inferior.

```{r inicio-rstudio-2a, echo = FALSE, out.width = "80%", fig.align = "center", fig.cap = "Lanzando a consola nuestras primeras 칩rdenes en RStudio."}
knitr::include_graphics("./img/inicio_rstudio_2.jpg")
```

Lo que ya hemos descubierto en los pasos de la instalaci칩n (ver imagen \@ref(fig:inicio-rstudio-2a)) es que la <mark>**consola**</mark> de `R` tiene una funci칩n muy b치sica y evidente: nos sirve de <mark>**calculadora**</mark>. Un ejemplo muy simple: si escribimos `r 1 + 2` en la consola y pulsamos _ENTER_, la consola nos mostrar치 el resultado de la suma

```{r}
1 + 2
```

&nbsp;

Pero entonces...<mark>**쯖u치l es la diferencia entre una calculadora y un lenguaje de programaci칩n?**</mark> Imagina que dicha suma `r 1 + 2` la quisi칠ramos utilizar para un segundo c치lculo: 쯫 si en lugar de lanzarlo a la consola sin m치s lo **almacenamos en alguna variable**?

Como hemos visto en la instalaci칩n de `RStudio`, para <mark>**asignar valores a variables**</mark> lo haremos con `<-`, por ejemplo con la orden `x <- 1 + 2`: una variable de nombre `x` va a tener asignada/guardada lo que valga la operaci칩n `1 + 2`

```{r}
x <- 1 + 2
```

Como puedes comprobar, en tu parte superior derecha (nuestro <mark>**entorno de variables**</mark>), podr치s ver como una nueva variable `x` es ahora visualizada, con su valor asignado (**no se mostrar치 en consola** salvo que escribas `r x` en ella: `R` asume que no quer칤as visualizarla en consola sino solo guardarla).

```{r echo = FALSE, out.width = "85%", fig.align = "center", fig.cap = "Environment."}
knitr::include_graphics("./img/environment_1.jpg")
```

```{r}
y <- x - 3
x
y
x * y
```

Dicha variable `x` adem치s podemos <mark>**reciclarla**</mark> para definir, por ejemplo, una nueva variable `y`, rest치ndole una constante. De la misma manera que hemos hecho restas, sumas y multiplicaciones, `R` tiene todas las <mark>**operaciones cl치sicas que podr칤as tener en una calculadora**</mark>. Prueba a ejecutar en la consola las 칩rdenes `x^2`, `sqrt(x)` o `abs(y)`: `R` calcular치 las operaciones _elevar al cuadrado_, _ra칤z cuadrada_ y _valor absoluto_ (respectivaemnte) de la variable que tengan entre par칠ntesis.

```{r}
x^2
sqrt(x)
y <- x - 5
abs(y)
```

&nbsp;

**`r colorize("CONSEJO:", "#20935E")`**

Las 칩rdenes `sqrt()` y `abs()` se llaman <mark>**funciones**</mark>, y la variable que tienen entre par칠ntesis se llama **argumento de la funci칩n**: una variable que toma de entrada la funci칩n y con la que opera internamente.

&nbsp;

## 쯏 d칩nde programamos?

**쮼st치s emocionado/a? Vamos a abrir nuestro primer <mark>script</mark>**. Un **script** ser치 el documento en el que programamos, nuestro `.doc`, pero aqu칤 ser치 un archivo con extensi칩n `.R`, donde escribiremos las 칩rdenes, que nos evitar치 estar lanzando todo a consola. <mark>**쯇or qu칠 no abusar de la consola?**</mark> Una m치xima para no olvidar: TODO lo que no escribas en un script, cuando cierres `RStudio`, lo habr치s perdido (c칩mo si en lugar de escribir en un `Word` y guardarlo, nunca guardases el documento).

Para abrir nuestro primero script, haz click en el men칰 superior en `File << New File << R Script` como se muestra en la imagen \@ref(fig:inicio-rstudio-5)

```{r inicio-rstudio-5, echo = FALSE, out.width = "80%", fig.align = "center", fig.cap = "Abriendo nuestro primer script de R."}
knitr::include_graphics("./img/inicio_rstudio_5.jpg")

```

Tras abrirlo tendremos una cuarta ventana: esta ser치 la ventana de nuestros c칩digos, la ventana m치s importante ya que es donde **escribiremos lo que queremos ejecutar**. Escribe el **c칩digo de la suma de arriba** en ese script y guarda el archivo haciendo click en el bot칩n `Save current document`

```{r}
a <- 1
b <-2
a + b
```

```{r inicio-rstudio-6, echo = FALSE, out.width = "85%", fig.align = "center", fig.cap = "Escribiendo y guardando nuestro primer script."}
knitr::include_graphics("./img/inicio_rstudio_6.jpg")
```

Ese c칩digo no se ejecuta salvo que se lo digamos. Tenemos <mark>**tres opciones para ejecutar c칩digo**</mark>:

* **`r colorize("Copiar y pegar el trozo de c칩digo en la consola", "#20935E")`** (como hemos hecho al principio).

* **`r colorize("Seleccionar l칤neas de c칩digo y clickar en Run", "#20935E")`** (o con su atajo de teclado), lo que har치 que se ejecute solo las l칤neas seleccionadas.

* **`r colorize("Activar el cuadrado Source on save a la derecha del bot칩n de guardar", "#20935E")`** y volvemos a hacer click en el bot칩n de guardar: siempre que esa opci칩n est칠 activada, al guardar no solo es nos guarda el archivo `.R` sino que adem치s **se ejecuta** el c칩digo completo que tengas en el script.


## Tipos de errores {#tipos_errores}

Durante tu aprendizaje en `R` va a ser **muy habitual** que las cosas no salgan a la primera, **apareciendo en consola mensajes en un color rojo**.  Un **miedo** muy habitual cuando se empieza a programar es pensar que si haces algo mal o aparece alg칰n mensaje de error, el ordenador puede explotar en cualquier momento. **A programar se aprende programando**, as칤 que haz las pruebas que quieras, lo peor que puede pasar es que necesites cerrar sesi칩n en `R Studio` y abrirlo de nuevo, o en el peor de los casos, desintalarlo y volverlo a iinstalar.

Dado que el $99.9\%$ de las veces tu c칩digo tendr치 errores que deber치s ir solventando, no est치 de m치s conocer los tipos de mensajes que `R` puede sacarte por consola.

Los **`r colorize("mensajes de ERROR", "#dc3545")`** ir치n precedidos de la frase **`r colorize("춺Error in...췉", "#dc3545")`**, d치ndote a veces incluso el tipo de error y la l칤nea de c칩digo en la que se ha producido. Veamos un ejemplo intentando sumar un n칰mero a una cadena de texto.

```{r error = TRUE}
"a" + 1
```

Los **errores son aquellos fallos que seguramente impidan la ejecuci칩n** del c칩digo. Un **error muy habitual** es intentar acceder a alguna funci칩n de alg칰n paquete que, o bien no tenemos instalado, o bien no hemos llamado haciendo uso del `library()`: est치s intentando leerte un libro de tu biblioteca pero ni siquiera has ido a la tienda a 춺comprarlo췉.

&nbsp;

Los **`r colorize("mensajes de WARNING", "#ffc107")`** ir치n precedidos de la frase **`r colorize("춺Warning in...췉", "#ffc107")`**, y son los fallos m치s delicados ya que son **posibles errores o incoherencias** que `R` detecta en tu c칩digo pero que **no van a hacer que tu c칩digo deje de ejecutarse**, aunque probablemente no lo haga como a ti te gustar칤a. Un ejemplo es cuando tratamos de hacer la raiz cuadrada de un n칰mero negativo.


```{r warning = TRUE}
sqrt(-1)
``` 

쮿a ejecutado la orden? S칤, pero te **advierte de que el resultado de la operaci칩n es un `NaN`**, un valor que no existe (al menos dentro de los n칰meros reales), un _Not A Number_ (ver Secci칩n \@ref(ausentes)).

&nbsp;

Los **`r colorize("mensajes de CONTROL", "#20935E")`** ser치n aquellos que aparecer치n por consola sin empezar por 춺Error in...췉 ni 춺Warning:...췉. Dichos mensajes, que puedes incluir t칰 mismo en tu c칩digo con funciones como `cat()` para monitorizar la ejecuci칩n de c칩digos largos, no son errores ni problemas, son simplemente informaci칩n que `R` considera 칰til aportarte.

&nbsp;



## Glosario

**`r colorize("GLOSARIO", "#4197D2")`**

* **`r colorize("Paquete", "#4197D2")`**: trozos de c칩digo realizadas por otros usuarios de la comunidad (y validades por el equipo de CRAN si la descarga es mediante `install.packages()`) para ser usados. Una vez instalados (descargados) los trozos de c칩digo a nuestro ordenador, basta con 춺acudir췉 a ellos con `library()`.

Haciendo una met치fora con la colecci칩n de libros que tengas en casa: con la **instalaci칩n hemos comprado el libro** y lo tenemos en nuestra estanter칤a (para siempre), con la llamada al paquete, por ejemplo `library(ggplot2)`, lo que hacemos es decidir, de entre todos los libros de la estanter칤a, cuales queremos llevarnos de viaje (en cada maleta que hagamos).

Los **paquetes usados** los ver치s denotados como `{nombre_paquete}` a lo largo del manual.

## Consejos


**`r colorize("CONSEJOS", "#20935E")`**

&nbsp;

**`r colorize("Panel de ayuda", "#20935E")`**

Si escribes en la consola `? nombre_funcion` (por ejemplo, escribe en la consola `? sqrt`), en el panel inferior derecho te aparecer치 una <mark>**documentaci칩n de ayuda**</mark> de la funci칩n para saber que argumentos necesita, como puedes usar la funci칩n, qu칠 es lo que te devuelve, ejemplos de uso, etc.

```{r}
? sqrt
```

```{r echo = FALSE, out.width = "50%", fig.align = "center", fig.cap = "Panel de ayuda."}
knitr::include_graphics("./img/panel_ayuda.jpg")

```


&nbsp;

**`r colorize("쮺칩mo comentar el c칩digo?", "#20935E")`**

Probablemente lo m치s importante al programar es que <mark>**te acostumbres a comentar**</mark> lo m치ximo posible tu c칩digo. **쯈u칠 es un comentario?** Es un texto que escribes entre el c칩digo precedido de `#`: todo lo que venga detr치s no ser치 interpretado por `R` como c칩digo. Es **vital cuando programamos** que nos acostumbremos a comentar lo que hacemos, tanto para nosotros como para otras personas que puedan leer nuestro c칩digo.

&nbsp;

**`r colorize("칈ndice en el c칩digo", "#20935E")`**

Puedes escribir comentarios en el c칩digo para que autom치ticamente se **organice tu c칩digo en ep칤grafes**, mostr치ndote un 칤ndice en el panel lateral (haz click en el icono de la esquina superior derecha del editor) y permitiendo minimizar partes del c칩digo. Para ello puedes comentar por ejemplo con `# ----- t칤tulo -----`.

```{r echo = FALSE, out.width = "70%", fig.align = "center", fig.cap = "Comentando el c칩digo para generar un 칤ndice."}
knitr::include_graphics("./img/comentarios-indice.jpg")

```
&nbsp;


## 游닇 Ejercicios

(haz click en las flechas para ver soluciones)

<details>
  <summary>游닇<strong>Ejercicio 1</strong>: asigna ahora los valores `1`, `-2`, `3` a tres variables `a`, `b` y `c` distintas, y calcula la ra칤z cuadrada de cada uno (**haz click** en la flecha para la soluci칩n propuesta). </summary>
  
<!-- toc -->
- Soluci칩n:

```{r}
# Variables
a <- 1
b <- -2
c <- 3

# Resultado
sqrt(a)
sqrt(b)
sqrt(c)
```

<!-- tocstop -->
</details>

&nbsp;


<details>
  <summary>游닇<strong>Ejercicio 2</strong>: calcula en consola la suma de 3 m치s 4, y todo ello multiplicado por 10, y as칤gnalo a una variable `x` (**haz click** en la flecha para la soluci칩n propuesta). Imprime el valor por consola</summary>
  
<!-- toc -->
- Soluci칩n:

```{r}
# Asignamos
x <- (3 + 4) * 10

# Imprimimos
x
```

<!-- tocstop -->
</details>


&nbsp;

<details>
  <summary>游닇<strong>Ejercicio 3</strong>: asigna un valor positivo a `x` y calcula  su ra칤z cuadrada; asigna otro negativo y calcula su valor absoluto con la funci칩n `abs()` (**haz click** en la flecha para la soluci칩n propuesta).</summary>
  
<!-- toc -->
- Soluci칩n:

```{r}
# Ra칤z cuadrada
x <- 73 # por ejemplo
sqrt(x)

# Valor absoluto
y <- -19 # por ejemplo
abs(y)
```

<!-- tocstop -->
</details>


&nbsp;

<details>
  <summary>游닇<strong>Ejercicio 4</strong>: usando la variable `x` ya definida, completa/modifica el c칩digo inferior para guardar en una nueva variable `z` el resultado guardado en `x` menos 5 (**haz click** en la flecha para la soluci칩n propuesta).
  
```{r eval = FALSE}
z <- ? - ?
z
```

</summary>
  
<!-- toc -->
- Soluci칩n:

```{r}
z <- x - 5
z
```
<!-- tocstop -->
</details>

&nbsp;

<details>
  <summary>游닇<strong>Ejercicio 5</strong>: usando las variables `x` e `y` ya definidas, calcula el m치ximo de ambas (funci칩n `max()`), y gu치rdalo en una nueva variable `t`. (**haz click** en la flecha para la soluci칩n propuesta).</summary>
  
<!-- toc -->
- Soluci칩n:

```{r}
t <- max(x, y)
t
```
<!-- tocstop -->
</details>

&nbsp;

**`r colorize("WARNING:", "#ffc107")`**

No hace falta gastar una l칤nea por cada orden que quieras ejecutar. Tampoco necesitas guardar cada paso intermedio que realices. **`r colorize("Cuidado con la memoria", "#ffc107")`**: cada asignaci칩n que hagas es una variable guardada que consume recursos en tu ordenador.


