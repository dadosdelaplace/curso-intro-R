[{"path":"index.html","id":"prefacio","chapter":"Prefacio","heading":"Prefacio","text":"Este curso ha sido dise√±ado por Javier √Ålvarez Li√©bana y pensado para introducir en el lenguaje R todas aquellas personas que quieran aprender R desde cero. Dicho manual ha sido elaborado su vez en R con {bookdown}. Puedes ver un resumen de las funcionalidades de algunos paquetes documentados por el equipo de R Studio en sus esquemas resumen. El c√≥digo de dicho manual se encuentra en GitHub.¬†Para elaborar informes o libros con una estructura similar (de forma nativa en R) el paquete bookdown puede ser instalado desde la plataforma CRAN o desde su versi√≥n en desarrollo actualizada en Github:","code":"\ninstall.packages(\"bookdown\")\n# o desde su versi√≥n en desarrollo actualizada\n# devtools::install_github(\"rstudio/bookdown\")"},{"path":"index.html","id":"prop√≥sito","chapter":"Prefacio","heading":"Prop√≥sito","text":"El objetivo de este tutorial es introducir la programaci√≥n y an√°lisis estad√≠stico en R toda aquella persona que nunca se haya iniciado en √©l, sin necesitar conocimientos previos de programaci√≥n (aunque siempre ayuda, obviamente). Con este manual se pretende que adquieras un vasto y experto conocimiento de R, pero si lo suficiente como para lograr 5 objetivos:tener miedo programarEntender los conceptos b√°sicos de R.Dotarte de una autonom√≠a muy b√°sica para pdoer trabajar con datos.Introducirte en el an√°lisis estad√≠stico.Algunos trucos sencillos para que el trabajo sea m√°s r√°pido, tanto en tiempo de escritura como de ejecuci√≥n.","code":""},{"path":"index.html","id":"requisitos","chapter":"Prefacio","heading":"Requisitos","text":"Conexi√≥n internet (para la descarga de algunos datos y paquetes).Conexi√≥n internet (para la descarga de algunos datos y paquetes).Instalar R (ver 1). R ser√° nuestro lenguaje, nuestro diccionario, nuestro castellano, nuestra ortograf√≠a para poder ¬´comunicarnos¬ª con el ordenador. https://cran.r-project.org/Instalar R (ver 1). R ser√° nuestro lenguaje, nuestro diccionario, nuestro castellano, nuestra ortograf√≠a para poder ¬´comunicarnos¬ª con el ordenador. https://cran.r-project.org/Instalar R Studio (ver 1.2). De la misma manera que podemos escribir el mismo texto en castellano en una tablet, en un ordenador, en un Word, en un papel o en un tuit, en programaci√≥n podemos usar distintos IDE (entornos de desarrollo integrados, nuestro Office), para que el trabajo sea m√°s c√≥modo. Nosotros trabajaremos con RStudio.Instalar R Studio (ver 1.2). De la misma manera que podemos escribir el mismo texto en castellano en una tablet, en un ordenador, en un Word, en un papel o en un tuit, en programaci√≥n podemos usar distintos IDE (entornos de desarrollo integrados, nuestro Office), para que el trabajo sea m√°s c√≥modo. Nosotros trabajaremos con RStudio.Todo lo necesario para seguir este curso es de descarga gratuita: viva el software libre.","code":""},{"path":"index.html","id":"contenidos","chapter":"Prefacio","heading":"Contenidos","text":"1 Instalacion de R y RStudio2 Primeros pasos en R3 Tipos de datos : vectores4 Operaciones con vectores5 Estructuras de control6 Tipos de datos II: datos estructurados7 Flujo de trabajo: primer proyecto8 Importar/exportar datos9 Listas10 Factores11 Creaci√≥n de funciones12 Tidy data: ordenando datos13 Incursi√≥n tidyverse14 Resumiendo y relacionado los datos15 ¬øQu√© sabemos hacer?16 Recursos extras17 Contribuye al proyecto","code":""},{"path":"index.html","id":"c√≥digo-de-colores","chapter":"Prefacio","heading":"C√≥digo de colores","text":"Puedes buscar los siguientes t√©rminos en el buscador del documentoERROR:En color rojo encontrar√°s errores comunes o pr√°cticas evitar.¬†WARNING:En color naranja/amarillo encontrar√°s warnings o advertencias sobre cosas tener en cuenta para evitar problemas.Algunas funciones pueden arrojar ciertas advertencias que nunca est√° de m√°s leer. Pero si dichos mensajes de alerta los tenemos controlados, y queremos que nos ensucie la ejecuci√≥n en la consola, podemos poner al inicio del c√≥digo assign(\"last.warning\", NULL, envir = baseenv()) para limpiar los warnings antiguos y options(warn = -1) para desactivarlos.¬†CONSEJO:En color verde encontrar√°s consejos o tips para ampliar y facilitar tu programaci√≥n. Adem√°s en cada cajita de c√≥digo, si pasas el rat√≥n, encontrar√°s un bot√≥n üìÑüìÑ en la esquina superior derecha de la caja para copiar el c√≥digo directamente tu consola. Puedes encontrarlos todos escribiendo ¬´consejo¬ª en el buscador.¬†GLOSARIO:En color azul encontrar√°s un üìö glosario con algunos t√©rminos estad√≠sticos y conceptos b√°sicos.","code":""},{"path":"index.html","id":"sobre-el-autor","chapter":"Prefacio","heading":"Sobre el autor","text":"Esto de presentarse s√≠ mismo es siempre un poco raro pero vamos intentarlo. Mi nombre es Javier √Ålvarez Li√©bana, soy matem√°tico, nacido en 1989 en Carabanchel (Madrid), pasando por Bologna (Italia). Tras terminar licenciatura y M√°ster en Ingenier√≠a Matem√°tica, recib√≠ en julio de 2018 el t√≠tulo de Doctor en Estad√≠stica (por la Universidad de Granada, con dos estancias en Universit√© Pierre et Marie Curie)Adem√°s de investigador (con plaza y acreditaci√≥n de Ayudante Doctor en la Facultad de Estudios Estad√≠sticos de la Universidad Complutense de Madrid), soy docente en dicha facultad y ando intentando eso de la divulgaci√≥n en estad√≠stica y dataviz (visualizaci√≥n de datos) en redes socialesüé≤ Web\nüíå Newsletter\nüê¶ Twitter\nüì∏ Instagram","code":""},{"path":"index.html","id":"docencia-impartida","chapter":"Prefacio","heading":"Docencia impartida","text":"2021-2022 (UCM):\nestad√≠stica descriptiva y exploraci√≥n de datos (Grado en Estad√≠stica Aplicada)\nminer√≠a de datos (M√°ster en Miner√≠a de Datos e Inteligencia de Negocio)\nestad√≠stica descriptiva y exploraci√≥n de datos (Grado en Estad√≠stica Aplicada)miner√≠a de datos (M√°ster en Miner√≠a de Datos e Inteligencia de Negocio)2020-2021 (UNIOVI):\nestad√≠stica (Grado en Inform√°tica, Grado en Ingenier√≠a Qu√≠mica)\nestad√≠stica (Grado en Inform√°tica, Grado en Ingenier√≠a Qu√≠mica)2019-2020 (UNIOVI):\nestad√≠stica (Grado en Inform√°tica, Grado en Ingenier√≠a Qu√≠mica)\nmodelos lineales generalizados (M√°ster en An√°lisis de Datos para la Inteligencia de Negocios)\nestad√≠stica (Grado en Inform√°tica, Grado en Ingenier√≠a Qu√≠mica)modelos lineales generalizados (M√°ster en An√°lisis de Datos para la Inteligencia de Negocios)2018-2019 (UNIOVI):\nestad√≠stica (Grado en Inform√°tica, Grado en Ingenier√≠a Qu√≠mica).\nbioestad√≠stica y epidemiolog√≠a (Grado en Fisioterapia)\nprogramaci√≥n matem√°tica (Grado en Matem√°ticas y Doble Grado en Matem√°tias y F√≠sica)\nestad√≠stica (Grado en Inform√°tica, Grado en Ingenier√≠a Qu√≠mica).bioestad√≠stica y epidemiolog√≠a (Grado en Fisioterapia)programaci√≥n matem√°tica (Grado en Matem√°ticas y Doble Grado en Matem√°tias y F√≠sica)2016-2017 (UGR):\nestad√≠stica (Grado en Ciencias Ambientales)\nmatem√°ticas III (Grado en Ingenier√≠a Civil)\nestad√≠stica (Grado en Ciencias Ambientales)matem√°ticas III (Grado en Ingenier√≠a Civil)2015-2016 (UGR):\nprobabilidad (Grado en Matem√°ticas)\nestad√≠stica (Grado en Ciencias Ambientales y Grado en Inform√°tica)\nmatem√°ticas III (Grado en Ingenier√≠a Civil)\nprobabilidad (Grado en Matem√°ticas)estad√≠stica (Grado en Ciencias Ambientales y Grado en Inform√°tica)matem√°ticas III (Grado en Ingenier√≠a Civil)","code":""},{"path":"index.html","id":"licencia","chapter":"Prefacio","heading":"Licencia","text":"Este documento es publicado bajo licencia p√∫blica general GNU,\nuna licencia libre de copyleft que garantiza los usuarios finales (personas, organizaciones, compa√±√≠as) la libertad de usar, estudiar, compartir (copiar) y modificar el software, citando adecuadamente al autor del mismo.","code":""},{"path":"instalacionR.html","id":"instalacionR","chapter":"Cap√≠tulo 1 Instalaci√≥n","heading":"Cap√≠tulo 1 Instalaci√≥n","text":"","code":""},{"path":"instalacionR.html","id":"instalaci√≥n-de-r","chapter":"Cap√≠tulo 1 Instalaci√≥n","heading":"1.1 Instalaci√≥n de R","text":"Vamos necesitar solo 3 pasos (y conexi√≥n internet).","code":""},{"path":"instalacionR.html","id":"paso-1","chapter":"Cap√≠tulo 1 Instalaci√≥n","heading":"1.1.1 Paso 1","text":"Entra en la web https://cran.r-project.org/ y en la pantalla de inicio selecciona la instalaci√≥n acorde tu sistema operativo (ver imagen 1.1)\nImagen/gr√°fica 1.1: Pantalla inicial de la plataforma CRAN de R.\n","code":""},{"path":"instalacionR.html","id":"paso-2","chapter":"Cap√≠tulo 1 Instalaci√≥n","heading":"1.1.2 Paso 2","text":"Para sistemas operativos Mac basta con que hacer click en el archivo .pkg, y abrirlo una vez descargado (ver imagen 1.2)\nImagen/gr√°fica 1.2: Pantalla de instalaci√≥n de R en Mac OS.\nPara sistemas operativos Windows, debemos clickar en install R first time (ver imagen 1.3) y en la siguiente pantalla hacer click en Download R Windows (ver imagen 1.4). Una vez descargado, abrirlo como cualquier archivo.\nImagen/gr√°fica 1.3: Pantalla previa de instalaci√≥n de R en Windows.\n\nImagen/gr√°fica 1.4: Pantalla final de instalaci√≥n de R en Windows.\n","code":""},{"path":"instalacionR.html","id":"paso-3","chapter":"Cap√≠tulo 1 Instalaci√≥n","heading":"1.1.3 Paso 3","text":"Tras su instalaci√≥n tendr√°s en tu escritorio (Windows) o en tu Launchpad (Mac Os) un ejecutable de R para abrir. En Windows puede que tengas dos ejecutables i386 y x64 (como todo programa en Windows est√° la versi√≥n de 32 y de 64 bits, haz click preferiblemente - si lo tienes - en el de x64). Te saldr√° algo parecido lo que observas en la imagen 1.5.\nImagen/gr√°fica 1.5: Primera pantalla al abrir el ejecutable de R.\nPara comprobar que est√° correctamente instalado, prueba escribir en la consola inferior el siguiente c√≥digo (recuerda: los c√≥digos puedes copiarlos directamente de la cajita haciendo click en el bot√≥n de la esquina superior derecha)\nImagen/gr√°fica 1.6: Primera suma en la consola de R.\n¬°Enhorabuena!Si te ha devuelto el resultado (en la consola debe aparecer [1] 3), ya hecho m√°s de lo que parece: definido dos variables y b, asignado un valor num√©rico cada una de ellas y las hemos usado en una operaci√≥n aritm√©tica. Ya sabemos usar R como calculadora.El valor [1] antes del resultado de la operaci√≥n en realidad nos numera las l√≠neas de la consola usadas.¬†WARNING: Como habr√°s advertido, en R usaremos <- para asignar valores en lugar de =, como una flecha. Usaremos = para indicarle el valor los argumentos que usemos en funciones y == como operador de comparaci√≥n: si escribimos 2 == 3, le estamos preguntando si 2 es igual 3.¬†Bonita esta interfaz es, as√≠ que la cerraremos y la abriremos m√°s. Tenemos nuestro lenguaje instalado, vamos instalar nuestro Word para poder programar de forma c√≥moda.","code":"\na <- 1\nb <- 2\na + b## [1] 3\n2 == 3## [1] FALSE"},{"path":"instalacionR.html","id":"instalacionRStudio","chapter":"Cap√≠tulo 1 Instalaci√≥n","heading":"1.2 Instalaci√≥n de RStudio","text":"Para instalar RStudio deberemos ir la web https://www.rstudio.com/products/rstudio/download/#download y seleccionar el ejecutable que te aperezca acorde tu sistema operativo (ver imagen 1.7). Tras descargar el ejecutable, hay que abrirlo como otro cualquier otro ejecutable y dejar que termine la instalaci√≥n.\nImagen/gr√°fica 1.7: Descargar el ejecutable de RStudio para su posterior instalaci√≥n.\nTras instalar tendremos en el escritorio o Launchpad un ejecutable de RStudio que abriremos. Se nos aparecer√° una pantalla similar esta:\nImagen/gr√°fica 1.8: Primer recibimiento de nuestro mejor amigo RStudio.\nListo, tienes instalado (casi) todo correctamente.","code":""},{"path":"instalacionR.html","id":"instalacionpaquetes","chapter":"Cap√≠tulo 1 Instalaci√≥n","heading":"1.3 Instalaci√≥n de paquetes","text":"El lenguaje R tiene 3 ventajas principales:Es un lenguaje creado por y para estad√≠sticos/.Es un lenguaje creado por y para estad√≠sticos/.Es software libre (como C, C++, Python, Fortran, y otros tantos lenguajes). El software libre solo tiene una ventaja evidente (es gratis, ok) sino que permite acceder c√≥digo ajeno.Es software libre (como C, C++, Python, Fortran, y otros tantos lenguajes). El software libre solo tiene una ventaja evidente (es gratis, ok) sino que permite acceder c√≥digo ajeno.Es un lenguaje modular: en la instalaci√≥n se instalan todas las funcionalidades salvo un m√≠nimo para poder funcionar, de forma que se ahorra espacio en disco y en memoria. Al ser software libre, existen trozos de c√≥digo hechos por otras personas llamados paquetes, que podemos ir instalando nuestro gusto seg√∫n los vayamos necesitando. Esto es una ventaja enorme ya que R tiene una comunidad de usuarios gigante, con m√°s de 17 000 paquetes: ¬°hay m√°s de 17 000 trozos de c√≥digo validados por la comunidad y la plataforma, de forma gratuita!Es un lenguaje modular: en la instalaci√≥n se instalan todas las funcionalidades salvo un m√≠nimo para poder funcionar, de forma que se ahorra espacio en disco y en memoria. Al ser software libre, existen trozos de c√≥digo hechos por otras personas llamados paquetes, que podemos ir instalando nuestro gusto seg√∫n los vayamos necesitando. Esto es una ventaja enorme ya que R tiene una comunidad de usuarios gigante, con m√°s de 17 000 paquetes: ¬°hay m√°s de 17 000 trozos de c√≥digo validados por la comunidad y la plataforma, de forma gratuita!\nImagen/gr√°fica 1.9: Paquetes disponibles en R.\nEsto nos ahorra much√≠simo tiempo ya que casi todo lo que querramos hacer ya lo habr√° querido hacer otra persona para empezar de cero. Vamos instalar, por ejemplo, un paquete gr√°fico (ggplot2) que necesitaremos. Para ello, escribe en tu consola el siguiente c√≥digo y pulsa enter.Dicha orden (puede tardar un poco la primera vez, depende de tu conexi√≥n internet) lo que har√° ser√° acceder la web de R, bajarse tu ordenador los trozos de c√≥digo incluidos en el paquete llamado ggplot2, y dejarlos para siempre en √©l.¬†WARNING:La instalaci√≥n de paquetes SOLO ES NECESARIA la primera vez que se usa dicho paquete en la vida del ordenador, hace falta hacerlo cada vez que lo usas.¬†Una vez que tenemos los trozos de c√≥digo (el paquete) en nuestro ordenador, en cada sesi√≥n de R que abramos (cada vez que cierres y abras RStudio) deberemos (si queremos) llamar ese paquete que tenemos instalado, escribiendo el siguiente comando en consolaWelcome software libre","code":"\ninstall.packages(\"ggplot2\")\nlibrary(ggplot2)"},{"path":"instalacionR.html","id":"glosario","chapter":"Cap√≠tulo 1 Instalaci√≥n","heading":"1.4 Glosario","text":"GLOSARIOConsola: es el nombre para llamar esa ventana grande que te ocupa buena parte de tu pantalla. Prueba escribir el mismo c√≥digo que antes en ella (es el equivalente la consola de R que hemos abierto al principio).\nImagen/gr√°fica 1.10: Lanzando consola nuestras primeras √≥rdenes en RStudio.\nLa consola ser√° donde ejecutaremos √≥rdenes y mostraremos resultadosEnvironment (entorno): la pantalla peque√±a (puedes ajustar los m√°rgenes con el rat√≥n tu gusto) que tenemos en la parte superior derecha se denomina environment o entorno de variables, donde como puedes ver, tras ejecutar el peque√±o c√≥digo en la consola, nos informa de que tenemos dos variables num√©ricas y su valor asignado. Nos mostrar√° las variables que tenemos definidas, el tipo y su valor.\nImagen/gr√°fica 1.11: Environment de variables.\nPanel multiusos: la ventana que tenemos en la parte inferior derecha servir√° para buscar ayuda de comandos y √≥rdenes, adem√°s de para visualizar gr√°ficos. Lo veremos cuando sea necesario.\nImagen/gr√°fica 1.12: Panel multiusos.\nPaquete: trozos de c√≥digo realizadas por otros usuarios de la comunidad (y validades por el equipo de CRAN si la descarga es mediante install.packages()) para ser usados. Una vez instalados (descargados) los trozos de c√≥digo nuestro ordenador, basta con ¬´acudir¬ª ellos con library().Haciendo una met√°fora con la colecci√≥n de libros que tengas en casa: con la instalaci√≥n hemos comprado el libro y lo tenemos en nuestra estanter√≠a (para siempre), con la llamada al paquete, por ejemplo library(ggplot2), lo que hacemos es decidir, de entre todos los libros de la estanter√≠a, cuales queremos llevarnos de viaje (en cada maleta que hagamos).Los paquetes usados los ver√°s denotados como {nombre_paquete} lo largo del manual.","code":"\na <- 1\nb <- 2\na + b"},{"path":"instalacionR.html","id":"consejos","chapter":"Cap√≠tulo 1 Instalaci√≥n","heading":"1.5 Consejos","text":"CONSEJOS¬øC√≥mo saber cuando la orden lanzada en consola ha terminado?veces R y RStudio son tan silenciosos que sabemos si ha acabado la orden que acabamos de lanzar en la consola o . Siempre que veas el s√≠mbolo > como √∫ltima l√≠nea en la consola significa que est√° listo para que le escribamos otra orden (es la forma cari√±osa de decirte que ya ha acabado, ver imagen 1.13)\nImagen/gr√°fica 1.13: Ejemplo de que la orden lanzada ha acabado.\n¬†¬øC√≥mo prevenir la fatiga programando?Estando delante de una pantalla de ordenador, con la vista muy fija mientras se programa, puede que acabes teniendo cierta fatiga visual en el trabajo. Te aconsejo que cambies en tu RStudio la tonalidad del fondo de tu programa, en tonos oscuros y blancos (¬øte fijado que mis capturas tienen un azul cobalto oscuro de fondo mientras el tuyo es un blanco nuclear? Echa un vistazo las im√°genes 1.14 y 1.15)\nImagen/gr√°fica 1.14: Men√∫ de opciones de nuestro editor\n\nImagen/gr√°fica 1.15: Personalizar el color de fondo de nuestro editor, la letra y el tama√±o de fuente\n","code":""},{"path":"primeros-pasos.html","id":"primeros-pasos","chapter":"Cap√≠tulo 2 Primeros pasos","heading":"Cap√≠tulo 2 Primeros pasos","text":"¬øEmpezamos?","code":""},{"path":"primeros-pasos.html","id":"historia-de-r","chapter":"Cap√≠tulo 2 Primeros pasos","heading":"2.1 Historia de R","text":"Veamos antes un poco de la historia de nuestra deidad.All√° por 1975, los laboratorios Bell (los que inventaron la radio moderna tal y como la conocemos), necesitaban una alternativa los lenguajes m√°s ¬´rudos¬ª y antiguos como C++ o Fortran, lenguajes r√°pidos en la ejecuci√≥n pero complejos en su uso, con una gran curva de aprendizaje y con muy poca capacidad en la visualizaci√≥n de datos que se empezaba necesitar.As√≠ que en 1976 sacaron la primera versi√≥n del lenguaje conocido S (hasta entonces estaba de moda lo de llamar los lenguajes con una sola inicial). En 1980 se empez√≥ distribuir la primera versi√≥n p√∫blica de S, m√°s all√° de los laboratorios Bell, y en 1988 se a√±adieron bastantes funcionalidades nuevas como poder aplicar funciones otras funciones (los famosos apply() que ya veremos). A√±os m√°s tarde, en 1991, dicho lenguaje se simplific√≥, reescribiendo muchas subrutinas de otros lenguajes m√°s primitivos, para tener una versi√≥n muy parecida al actual R, permitiendo el usod de operadores, data.frames (que veremos) y otro tipo de objetos, sencillos en la programaci√≥n pero muy versatiles.Sin embargo, salvo uso docente, S ten√≠a licencia as√≠ que en 1992 Ross Ihaka y Robert Gentleman se lanzaron crear una versi√≥n de S libre y gratuita, un trabajo de casi 8 a√±os hasta que en el a√±o 2000, ambos investigadores de la Universidad de Auckland en Nueva Zelanda lanzaron la primera versi√≥n estable del lenguaje.Tras dicho lanzamiento, se cre√≥ un equipo de expertos en estad√≠stica computacional (el conocido como R Development Core Team) que es el que se encarga de mantener toda la aerquitectura de R y los que se encargar de actualizar y mejorar el paquete {base}, una librer√≠a motor sobre la que se construye el resto de funciones.","code":""},{"path":"primeros-pasos.html","id":"excel-no-es-tu-amigo","chapter":"Cap√≠tulo 2 Primeros pasos","heading":"2.2 Excel no es tu amigo","text":"R es un lenguaje de programaci√≥n, de alto nivel para el usuario y modular. Los lenguajes de alto nivel como R, Python (curso interactivo de Python en https://checkio.org/) o Matlab, facilitan la programaci√≥n al usuario, teniendo que preocuparte solo de la tarea de programar. Son lenguajes con una menor curva de aprendizaje aunque suelen ser m√°s lentos en su ejecuci√≥n en comparaci√≥n con lenguajes de bajo nivel (C, C++ o Fortran), lenguajes muy r√°pidos en su ejecuci√≥n pero cuya programaci√≥n requiere un mayor tiempo y formaci√≥n, teniendo que adem√°s estar pendiente del tipo de variables, espacio en memoria, etc.Por su arquitectura, R es un lenguaje que puede ser usado para un prop√≥sito general pero que est√° especialmente dise√±ado para el an√°lisis estad√≠stico de datos. Su modularidad nos da la ventaja de que podemos instalar las funcionalidades que vayamos necesitando de forma progresiva.¬øPor qu√© es recomendable usar Excel como base de datos ni para realizar an√°lisis estad√≠sticos complejos?¬†Software de pago: Excel, al igual que el resto de programas de Microsoft o SPSS (por desgracia programa estrella de nuestro sistema sanitario), es un programa de pago. nivel individual, todos hemos tenido una versi√≥n que hemos pagado, pero dicha evasi√≥n se la puede permitir una empresa o administraci√≥n, que debe de pagar altas cantidades de dinero anuales por las licencias, dinero que ser√≠a necesario si los investigadores y trabajadores tuvieran formaci√≥n (remunerada) en otras herramientas de software libre.Software de pago: Excel, al igual que el resto de programas de Microsoft o SPSS (por desgracia programa estrella de nuestro sistema sanitario), es un programa de pago. nivel individual, todos hemos tenido una versi√≥n que hemos pagado, pero dicha evasi√≥n se la puede permitir una empresa o administraci√≥n, que debe de pagar altas cantidades de dinero anuales por las licencias, dinero que ser√≠a necesario si los investigadores y trabajadores tuvieran formaci√≥n (remunerada) en otras herramientas de software libre.Software cerrado: solo es de pago sino que es cerrado, as√≠ que solo podemos hacer lo que Excel ha cre√≠do que interesante que podamos hacer. Incluso con la programaci√≥n de MACROS, las funcionalidades de Excel siguen siendo mucho m√°s limitadas ya que viene ¬´programadas¬ª de antemanoSoftware cerrado: solo es de pago sino que es cerrado, as√≠ que solo podemos hacer lo que Excel ha cre√≠do que interesante que podamos hacer. Incluso con la programaci√≥n de MACROS, las funcionalidades de Excel siguen siendo mucho m√°s limitadas ya que viene ¬´programadas¬ª de antemanoAlto consumo de memoria: dicha programaci√≥n predeterminada hace que Excel ocupe much√≠simo espacio en el disco duro y tenga un alto consumo de memoria (la memoria es lo que te permite hacer varias tareas la vez en tu ordenador).Alto consumo de memoria: dicha programaci√≥n predeterminada hace que Excel ocupe much√≠simo espacio en el disco duro y tenga un alto consumo de memoria (la memoria es lo que te permite hacer varias tareas la vez en tu ordenador).es universal: solo es de pago sino que adem√°s, dependiendo de la versi√≥n que tengas de Excel, tendr√° un formato distinto para datos como fechas, teniendo incluso extensiones distintas, de forma que un archivo .xls abierto por un Excel moderno puede provocar errores en la carga.es universal: solo es de pago sino que adem√°s, dependiendo de la versi√≥n que tengas de Excel, tendr√° un formato distinto para datos como fechas, teniendo incluso extensiones distintas, de forma que un archivo .xls abierto por un Excel moderno puede provocar errores en la carga.¬°ES SOLO UNA HOJA DE C√ÅLCULO!: el propio Microsoft desaconseja el uso de Excel para el an√°lisis de grandes vol√∫menes de datos. El Excel es una herramienta maravillosa para ser usada como una sencilla hoja de c√°lculo: llevar las cuentas de tu familia, de tu peque√±o negocio, una declaraci√≥n de la Renta sencilla, planificar viajes, etc. Pero el programa EST√Å DISE√ëADO para ser una base de datos ni para an√°lisis detallado, y muchos menos pensado para generar un entorno flexible para el an√°lisis estad√≠stico y la visualizaci√≥n de datos.¬°ES SOLO UNA HOJA DE C√ÅLCULO!: el propio Microsoft desaconseja el uso de Excel para el an√°lisis de grandes vol√∫menes de datos. El Excel es una herramienta maravillosa para ser usada como una sencilla hoja de c√°lculo: llevar las cuentas de tu familia, de tu peque√±o negocio, una declaraci√≥n de la Renta sencilla, planificar viajes, etc. Pero el programa EST√Å DISE√ëADO para ser una base de datos ni para an√°lisis detallado, y muchos menos pensado para generar un entorno flexible para el an√°lisis estad√≠stico y la visualizaci√≥n de datos.¬†¬øPuedes ser el mejor partiendo un filete con una cuchara? Seguramente puedas (en Excel puedes hasta programar con macros), y si siempre lo hiciste as√≠, acabar√°s normaliz√°ndolo, pero seguir√°s siendo una persona comiendo filete con cuchara.¬øQu√© sucede si usamos la herramienta equivocada? Tres ejemplos:Problemas para codificar fechas: en 2016 se public√≥ una revisi√≥n de art√≠culos en gen√©tica, descubriendo que 1 de cada 5 art√≠culos conten√≠an errores debido una mala codificaci√≥n de las fechas, conviertiendo por ejemplo los genes Septin-2 (conocido como SEPT2) en fechas, y al rev√©s (Ziemann, Eren, El-Osta 2016).\nImagen/gr√°fica 2.1: Excel en una noche loca.\nProblemas de memoria: un Excel permite por defecto una cantidad m√°xima de filas. Aunque dicha cantidad se puede ampliar, sigue siendo finita, por lo que cuando superas el umbral de filas, al a√±adir filas Excel te borra registros sin avisarte de que lo est√° haciendo. Esto es lo que sucedi√≥ con los registros de casos covid en Reino Unido.\nImagen/gr√°fica 2.2: Cuando Excel dice basta.\nProblemas para codificar edades: una variable de tipo fecha, aunque nosotros la veamos con letras, en realidad es una variable num√©rica que representa los d√≠as que han pasado desde una fecha origen. En funci√≥n de las distintas versiones de Excel, dicha fecha origen cambia. Adem√°s, si se codifica mal la fecha en formato dd-mm-YY, dicho formato cuando se exporta otro excel en texto, permite distinguir un nacido en 1918 y un nacido en 2018, as√≠ que podemos estar confundiendo personas de 103 a√±os con ni√±os de 3 a√±os (y es lo que sucedi√≥ en Espa√±a, observando unas tasas de mortalidad en ni√±os muy peque√±os equivalentes personas mayores).\nImagen/gr√°fica 2.3: Los centenarios con biber√≥n.\n","code":""},{"path":"primeros-pasos.html","id":"primeros-pasos-calculadora","chapter":"Cap√≠tulo 2 Primeros pasos","heading":"2.3 Primeros pasos: calculadora","text":"¬øTe acuerdas de lo que era la consola? Vamos trabajar de momento en esa ventana que tienes en la ventana inferior.\nImagen/gr√°fica 2.4: Lanzando consola nuestras primeras √≥rdenes en RStudio.\nLo que ya hemos descubierto en los pasos de la instalaci√≥n (ver imagen 2.4) es que la consola de R tiene una funci√≥n muy b√°sica y evidente: nos sirve de calculadora. Un ejemplo muy simple: si escribimos 3 en la consola y pulsamos ENTER, la consola nos mostrar√° el resultado de la suma¬†¬øPero cu√°l es la diferencia entre una calculadora y un lenguaje de programaci√≥n?Imagina que dicha suma 3 la quisi√©ramos utilizar para un segundo c√°lculo: ¬øy si en lugar de lanzarlo la consola sin m√°s lo almacenamos en alguna variable?Como hemos visto en la instalaci√≥n de RStudio, para asignar variables lo haremos con la orden x <- 1 + 2: una variable de nombre x va tener asignada <- lo que valga la suma 1 + 2Como puedes comprobar, en tu parte superior derecha (nuestro entorno de variables), podr√°s ver como una nueva variable x es ahora visualizada, con su valor asignado (se mostrar√° en consola salvo que escribas 3 en ella: R asume que quer√≠as visualizarla en consola sino solo guardarla).\nImagen/gr√°fica 2.5: Environment.\nDicha variable x adem√°s podemos reciclarla para definir una variable y, rest√°ndole una constante.¬†De la misma manera que hemos hecho restas, sumas y multiplicaciones, R tiene todas las operaciones cl√°sicas que podr√≠as tener en una calculadora. Prueba ejecutar en la consola las √≥rdenes x^2, sqrt(x) o abs(y): R calcular√° las operaciones elevar al cuadrado, ra√≠z cuadrada y valor absoluto de la variable que tengan entre par√©ntesis¬†","code":"\n1 + 2## [1] 3\nx <- 1 + 2\nx^2## [1] 9\nsqrt(x)## [1] 1.732051\ny <- x - 5\nabs(y)## [1] 2"},{"path":"primeros-pasos.html","id":"y-d√≥nde-programamos","chapter":"Cap√≠tulo 2 Primeros pasos","heading":"2.4 ¬øY d√≥nde programamos?","text":"¬øEst√°s emocionado/? Vamos abrir nuestro primer script (script = documento en el que programamos, nuestro .doc, pero aqu√≠ ser√° un archivo .R).Haz click en el men√∫ superior en File << New File << R Script como se muestra en la imagen 2.6\nImagen/gr√°fica 2.6: Abriendo nuestro primer script de R.\nTras abrirlo tendremos una cuarta ventana: esta ser√° la ventana de nuestros c√≥digos, la ventana m√°s importante ya que es donde escribiremos lo que queremos ejecutar. Escribe el c√≥digo de la suma de arriba en ese script y guarda el archivo haciendo click en el bot√≥n Save current document\nImagen/gr√°fica 2.7: Escribiendo y guardando nuestro primer script.\nEse c√≥digo se ejecuta salvo que se lo digamos. Tenemos tres opciones para ejecutar c√≥digo:Copiar y pegar el trozo de c√≥digo en la consola (como hemos hecho al principio).Copiar y pegar el trozo de c√≥digo en la consola (como hemos hecho al principio).Seleccionar l√≠neas de c√≥digo y clickar en Run (o con su atajo de teclado), lo que har√° que se ejecute solo las l√≠neas seleccionadas.Seleccionar l√≠neas de c√≥digo y clickar en Run (o con su atajo de teclado), lo que har√° que se ejecute solo las l√≠neas seleccionadas.Activar el cuadrado Source save la derecha del bot√≥n de guardar y volvemos hacer click en el bot√≥n de guardar: siempre que esa opci√≥n est√© activada, al guardar solo es nos guarda el archivo .R sino que adem√°s se ejecuta.Activar el cuadrado Source save la derecha del bot√≥n de guardar y volvemos hacer click en el bot√≥n de guardar: siempre que esa opci√≥n est√© activada, al guardar solo es nos guarda el archivo .R sino que adem√°s se ejecuta.","code":""},{"path":"primeros-pasos.html","id":"tipos_errores","chapter":"Cap√≠tulo 2 Primeros pasos","heading":"2.5 Tipos de errores","text":"Durante tu aprendizaje en R va ser muy habitual que las cosas salgan la primera, apareciendo en consola mensajes en un color rojo. Un miedo muy habitual cuando se empieza programar es pensar que si haces algo mal o aparece alg√∫n mensaje de error, el ordenador puede explotar en cualquier momento. programar se aprende programando, as√≠ que haz las pruebas que quieres, lo peor que puede pasar es que necesites cerrar sesi√≥n en R Studio y abrirlo de nuevo.Dado que el 99.99999% de veces tu c√≥digo tendr√° errores que deber√°s ir solventando, est√° de m√°s conocer los tipos de mensajes que R puede sacarte por consola:Los mensajes de ERROR ir√°n precedidos de la frase ¬´Error ‚Ä¶¬ª, d√°ndote veces incluso el tipo de error y la l√≠nea de c√≥digo en la que se ha producido. Veamos un ejemplo intentando sumar un n√∫mero una cadena de texto.Los errores son aquellos fallos que seguramente impidan la ejecuci√≥n del c√≥digo. Un error muy habitual es intentar acceder alguna funci√≥n de alg√∫n paquete que, o bien tenemos instalado, o bien hemos llamado haciendo uso del library(): est√°s intentando leerte un libro de tu biblioteca pero ni siquiera ido la tienda ¬´comprarlo¬ª.¬†Los mensajes de WARNING ir√°n precedidos de la frase ¬´Warning ‚Ä¶¬ª, y son los fallos m√°s delicados ya que son posibles errores o incoherencias que R detecta en tu c√≥digo pero que van hacer que tu c√≥digo deje de ejecutarse, aunque probablemente lo haga como ti te gustar√≠a. Un ejemplo es cuando tratamos de hacer la raiz cuadrada de un n√∫mero negativo.¬øHa ejecutado la orden? S√≠, pero te **advierte de que el resultado de la operaci√≥n es un NaN, un valor que existe (al menos dentro de los n√∫meros reales), un Number (ver Secci√≥n 4.3).¬†Los mensajes de CONTROL ser√°n aquellos que aparecer√°n por consola sin empezar por ¬´Error ‚Ä¶¬ª ni ¬´Warning:‚Ä¶¬ª. Dichos mensajes, que puedes incluir t√∫ mismo en tu c√≥digo con funciones como cat() para monitorizar la ejecuci√≥n de c√≥digos largos, son errores ni problemas, son simplemente informaci√≥n que R considera √∫til aportarte.¬†","code":"\n\"a\" + 1## Error in \"a\" + 1: argumento no-num√©rico para operador binario\nsqrt(-1)## Warning in sqrt(-1): Se han producido NaNs## [1] NaN"},{"path":"primeros-pasos.html","id":"consejos-1","chapter":"Cap√≠tulo 2 Primeros pasos","heading":"2.6 Consejos","text":"CONSEJOS¬†Panel de ayudaSi escribes en la consola ? nombre_funcion (por ejemplo, escribe en la consola ? sqrt), en el panel inferior derecho te aparecer√° una documentaci√≥n de ayuda de la funci√≥n para saber que argumentos necesita, como puedes usar la funci√≥n, qu√© es lo que te devuelve, ejemplos de uso, etc.\nImagen/gr√°fica 2.8: Panel de ayuda.\n¬†¬øC√≥mo comentar el c√≥digo?Probablemente lo m√°s importante al programar es que te acostumbres comentar lo m√°ximo posible tu c√≥digo. ¬øQu√© es un comentario? Es un texto que escribes entre el c√≥digo precedido de #: todo lo que venga detr√°s ser√° interpretado por R como c√≥digo. Es vital cuando programamos que nos acostumbremos comentar lo que hacemos, tanto para nosotros como para otras personas que puedan leer nuestro c√≥digo.¬†√çndice en el c√≥digoPuedes escribir comentarios en el c√≥digo para que autom√°ticamente se organice tu c√≥digo en ep√≠grafes, mostr√°ndote un √≠ndice en el panel lateral (haz click en el icono de la esquina superior derecha del editor) y permitiendo minimizar partes del c√≥digo. Para ello puedes comentar por ejemplo con # ----- t√≠tulo -----.\nImagen/gr√°fica 2.9: Comentando el c√≥digo para generar un √≠ndice.\n¬†","code":"\n? sqrt"},{"path":"primeros-pasos.html","id":"ejercicios","chapter":"Cap√≠tulo 2 Primeros pasos","heading":"2.7 üìù Ejercicios","text":"(haz click en las flechas para ver soluciones)üìùEjercicio 1: en consola, guarda el valor de dos variables y b, la primera con valor igual 2 y la segunda con valor igual 5. Tras asignarles valor, multiplica los n√∫meros en consola (haz click en la flecha para la soluci√≥n propuesta). Soluci√≥n:\nImagen/gr√°fica 2.10: Multiplicaci√≥n de y b.\n¬†üìùEjercicio 2: repite el ejercicio anterior pero ahora guarda el resultado en una variable c. Para ver el resultado en c escribe dicha variable en consola (haz click en la flecha para la soluci√≥n propuesta). Soluci√≥n:\nImagen/gr√°fica 2.11: Multiplicaci√≥n de y b guardando el resultado.\n¬†üìùEjercicio 3: repite el ejercicio anterior pero ahora escribe el c√≥digo en un script (fichero .R, guardado en script1.R). Recuerda al acabar seleccionar las l√≠neas ejecutar y clickar Run, o bien guardar el script con Source save activado (haz click en la flecha para la soluci√≥n propuesta). Soluci√≥n:\nImagen/gr√°fica 2.12: Multiplicaci√≥n de y b guardando el resultado pero escribiendo en el script.\nüìùEjercicio 4: calcula en consola la suma de 3 m√°s 4, y todo ello multiplicado por 10, y as√≠gnalo una variable x (haz click en la flecha para la soluci√≥n propuesta).Soluci√≥n:¬†üìùEjercicio 5: asigna un valor positivo x y calcula su ra√≠z cuadrada; asigna otro negativo y calcula su valor absoluto (haz click en la flecha para la soluci√≥n propuesta).Soluci√≥n:¬†CONSEJO:Las √≥rdenes sqrt(x) y abs(y) se llaman funciones, y la variable que tienen entre par√©ntesis se llama argumento de la funci√≥n: una variable que toma de entrada la funci√≥n y con la que opera internamente.¬†üìùEjercicio 6: usando la variable x ya definida, calcula x - 5 y gu√°rdalo en una nueva variable z (haz click en la flecha para la soluci√≥n propuesta).Soluci√≥n:¬†üìùEjercicio 7: usando las variables x y z ya definidas, calcula la ra√≠z cuadrada del m√°ximo entre ambas, y gu√°rdalo en una nueva variable t. Hazlo en un script en lugar de en consola (haz click en la flecha para la soluci√≥n propuesta).Soluci√≥n:¬†WARNING:hace falta gastar una l√≠nea por cada orden que quieras ejecutar. Tampoco necesitas guardar cada paso intermedio que realices. Cuidado con la memoria: cada asignaci√≥n que hagas es una variable guardada que consume recursos en tu ordenador.","code":"\n# Para poner comentarios en el c√≥digo se usa #\n\n# Variables\na <- 2\nb <- 5\n\na * b## [1] 10\n# Variables\na <- 2\nb <- 5\n\n# Resultado\nc <- a * b\n\n# Muestro en consola\nc## [1] 10\nx <- (3 + 4) * 10\n# Ra√≠z cuadrada\nx <- 73\nsqrt(x)## [1] 8.544004\n# Valor absoluto\ny <- -73\nabs(y)## [1] 73\nz <- x - 5\nz## [1] 68\nt <- sqrt(max(x, z)) \nt## [1] 8.544004"},{"path":"vectores.html","id":"vectores","chapter":"Cap√≠tulo 3 Tipos de datos I: vectores","heading":"Cap√≠tulo 3 Tipos de datos I: vectores","text":"Bien, ya controlamos la calculadora. Vamos ir m√°s all√°: ¬øy si en lugar de tener un solo n√∫mero tenemos una colecci√≥n de elementos? En este cap√≠tulo vamos ver un cl√°sico de cualquier lenguaje de programaci√≥n: los vectores o arrays, una concatenaci√≥n de elementos (del mismo tipo). De hecho un n√∫mero individual (por ejemplo, 1) es en realidad un vector de longitud uno (un solo elemento).","code":""},{"path":"vectores.html","id":"vectores-num√©ricos","chapter":"Cap√≠tulo 3 Tipos de datos I: vectores","heading":"3.1 Vectores num√©ricos","text":"La forma m√°s sencilla de crear un vector en R es con el comando c() (de concatenar elementos), y basta con introducir sus elementos entre par√©ntesis, y separados por comas. Vamos crear el vector con los tres primeros n√∫meros naturales pares (el 0 es natural, seas b√°rbaro/).Como ves ahora en el environment (entorno, arriba la derecha) tenemos una colecci√≥n de elementos, tres en concreto, guardados en una misma variable z. La longitud de un vector se puede calcular con el comando length() (nos devolver√° el n√∫mero de elementos de la variable que le pasemos como argumento).Adem√°s podemos concatenar su vez vectores: vamos concatenar el vector z consigo mismo, y a√±adi√©ndole al final un 8.Esta √∫ltima concatenaci√≥n lo que nos ha dado son, primero, los tres pares que ya ten√≠amos en z, despu√©s de nuevo los tres primeros pares, y por √∫ltimo un 8.","code":"\nz <- c(2, 4, 6)\nz## [1] 2 4 6\nlength(z)## [1] 3\nc(z, z, 8)## [1] 2 4 6 2 4 6 8"},{"path":"vectores.html","id":"secuencias-num√©ricas-con-un-patr√≥n","chapter":"Cap√≠tulo 3 Tipos de datos I: vectores","heading":"3.2 Secuencias num√©ricas con un patr√≥n","text":"Muchas veces nos gustar√≠a crear vectores de una forma mucho m√°s r√°pida. Supongamos que queremos el vector de los primeros 21 n√∫meros naturales. Si construy√©ramos el vector como antes, tendr√≠amos que ejecutar el comando c(1, 2, 3, 4, 5, ...) hasta llegar al n√∫mero 21. ¬øUn poco largo, ?Hay un atajo: el comando seq() nos permite crear una secuencia desde un elemento inicial hasta un elemento final, avanzando de uno en uno.Es importante que perdamos el foco de que programar es similar escribir en un idioma, por lo que si hay algo que se puede decir de una forma m√°s limpia y que se entienda mejor, ¬øpor qu√© usarlo? Siempre que queramos definir secuencias entre dos n√∫meros naturales (por ejemplo, entre 1 y un valor n), cuya distancia entre elementos consecutivos sea uno, el comando 1:n nos devuelve lo mismo que la orden seq(1, n). Adem√°s, si el elemento inicial es mayor que el final, R entender√° solo que la secuencia la queremo decreciente.¬†Tambi√©n podemos definir otro tipo de distancia entre dos elementos consecutivos (conocido como paso de discretizaci√≥n), por ejemplo de 0.5 en 0.5.Otras veces nos interesar√° definir una secuencia entre un valor inicial y un valor final, pero nos da igual la distancia entre cada elemento: solo nos importa que tenga un n√∫mero concreto de elementos (y que sea R el que decida la distancia entre elementos consecutivos para conseguirlo).¬†Otro atajo que podemos usar para definir secuencias de n√∫meros con un patr√≥n es definir vectores de elementos repetidos, por ejemplo un vector lleno de ceros. La funci√≥n rep() nos permite repetir un elemento un n√∫mero fijado de veces.solo podemos repetir un n√∫mero sino que podemos repetir vectores enteros.Esa repetici√≥n adem√°s podemos definirla tambi√©n de forma intercalada: en lugar de repetir c(0, 1, 2) cuatro veces seguidas, queremos cuatro 0, despu√©s cuatro 1, y despu√©s cuatro 2.","code":"\nseq(1, 21) # secuencia desde 1 hasta 21 de uno en uno##  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21\nn <- 21\n1:n # secuencia desde 1 hasta n (21) de uno en uno##  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21\nn:1 # secuencia decreciente##  [1] 21 20 19 18 17 16 15 14 13 12 11 10  9  8  7  6  5  4  3  2  1\nseq(1, 10, by = 0.5) # secuencia desde 1 a 10 de 0.5 en 0.5##  [1]  1.0  1.5  2.0  2.5  3.0  3.5  4.0  4.5  5.0  5.5  6.0  6.5  7.0  7.5  8.0\n## [16]  8.5  9.0  9.5 10.0\nseq(1, 50, l = 11) # secuencia desde 1 a 50 de longitud 11##  [1]  1.0  5.9 10.8 15.7 20.6 25.5 30.4 35.3 40.2 45.1 50.0\nrep(0, 7) # vector de 7 ceros## [1] 0 0 0 0 0 0 0\nrep(c(0, 1, 2), 4) # repetimos el vector c(0, 1, 2) 4 veces##  [1] 0 1 2 0 1 2 0 1 2 0 1 2\nrep(c(0, 1, 2), each = 4) # cuatro 0, luego cuatro 1, luego cuatro 2##  [1] 0 0 0 0 1 1 1 1 2 2 2 2"},{"path":"vectores.html","id":"vectores-de-caracteres-texto","chapter":"Cap√≠tulo 3 Tipos de datos I: vectores","heading":"3.3 Vectores de caracteres (texto)","text":"Un error com√∫n es asociar el concepto de vectores solo n√∫meros: un vector es una colecci√≥n o concatenaci√≥n de elementos del mismo tipo pero tienen porque ser necesariamente n√∫meros. Vamos crear una frase de ejemplo, un vector de 4 elementos de tipo texto (en R se llaman char): \"Mi\", \"nombre\", \"es\" \"Javier\".Como ves las variables de tipo char o character van entre comillas dobles, ya que es un cadena de texto.Ya tenemos nuestro primer vector de texto de longitud 4. Las cadenas de texto son un tipo especial de dato, con los que obviamente podremos hacer operaciones aritm√©ticas como la suma o la media, pero si podemos hacer operaciones propias de cadenas de texto como puede ser la funci√≥n paste(). Dicha funci√≥n nos permite convertir un vector de 4 palabras en una frase, decidiendo que caracter queremos que vaya entre palabra con el argumento collapse =.Si queremos pegar los elementos de la cadena de texto sin ning√∫n tipo de caracter, existe una forma m√°s abreviada y limpia de ejecutar la orden paste(mi_nombre, collapse = \"\"), usando la funci√≥n paste0()Esta funci√≥n es muy √∫til si queremos definir variables de texto que compartan por ejemplo un prefijo (variable_1, variable_2, ‚Ä¶)","code":"\nmi_nombre <- c(\"Mi\", \"nombre\", \"es\", \"Javier\")\nmi_nombre## [1] \"Mi\"     \"nombre\" \"es\"     \"Javier\"\npaste(mi_nombre, collapse = \"\") # todo junto## [1] \"MinombreesJavier\"\npaste(mi_nombre, collapse = \" \") # separados por un espacio## [1] \"Mi nombre es Javier\"\npaste(mi_nombre, collapse = \".\") # separados por un punto .## [1] \"Mi.nombre.es.Javier\"\npaste0(mi_nombre) # todo junto sin nada separando## [1] \"Mi\"     \"nombre\" \"es\"     \"Javier\"\npaste0(\"variable\", 1:7) # a la palabra ¬´variable¬ª le pegamos los n√∫meros del 1 al 7## [1] \"variable1\" \"variable2\" \"variable3\" \"variable4\" \"variable5\" \"variable6\"\n## [7] \"variable7\"\npaste(\"variable\", 1:7, sep = \"_\") # separado por una barra baja## [1] \"variable_1\" \"variable_2\" \"variable_3\" \"variable_4\" \"variable_5\"\n## [6] \"variable_6\" \"variable_7\""},{"path":"vectores.html","id":"paquete-glue","chapter":"Cap√≠tulo 3 Tipos de datos I: vectores","heading":"3.3.1 Paquete glue","text":"Otra forma m√°s intuitiva de trabajar con textos y variables num√©ricas es usar el paquete glue, que nos permite pegar cadenas de texto variables num√©ricas de forma simb√≥lica.Tambi√©n podemos hacer uso de dicha funci√≥n sin tener los valores num√©ricos previamente guardados en variables.Ya sabemos trabajar con textos :)¬øY si queremos pasar todo may√∫scula? ¬øO todo min√∫scula? ¬øY si queremos sustituir un caracter (por ejemplo .) por otro en todos los elementos? R tambi√©n nos proporciona algunas funciones muy sencillas (del paquete {base}) de usar para dichas tareas. Aqu√≠ un ejemplo de algunas de ellas.El paquete {base} tambi√©n nos permite buscar y reemplazar patrones concretos en cadenas de texta (por ejemplo, sustituir toda letra ¬´o¬ª por el caracter ¬´*¬ª).¬†","code":"\ninstall.packages(\"glue\")\nlibrary(glue)\nedad <- 10:15 # edades\nglue(\"La edad es de {edad} a√±os\")## La edad es de 10 a√±os\n## La edad es de 11 a√±os\n## La edad es de 12 a√±os\n## La edad es de 13 a√±os\n## La edad es de 14 a√±os\n## La edad es de 15 a√±os\n# Otra forma sin definir variables a priori\nglue(\"La edad es de {10:15} a√±os\")## La edad es de 10 a√±os\n## La edad es de 11 a√±os\n## La edad es de 12 a√±os\n## La edad es de 13 a√±os\n## La edad es de 14 a√±os\n## La edad es de 15 a√±os\ntexto <- c(\"Hola.\", \"qu√©\", \"ase?\", \"todo\", \"bien.\", \"y yo\",\n           \"que\", \"ME\", \"ALEGRO\")\ntoupper(texto) # todo a may√∫scula## [1] \"HOLA.\"  \"QU√â\"    \"ASE?\"   \"TODO\"   \"BIEN.\"  \"Y YO\"   \"QUE\"    \"ME\"    \n## [9] \"ALEGRO\"\ntolower(texto) # todo a min√∫scula## [1] \"hola.\"  \"qu√©\"    \"ase?\"   \"todo\"   \"bien.\"  \"y yo\"   \"que\"    \"me\"    \n## [9] \"alegro\"\ngsub(\"o\", \"*\", texto) # toda \"o\" en el texto ser√° sustituida por *## [1] \"H*la.\"  \"qu√©\"    \"ase?\"   \"t*d*\"   \"bien.\"  \"y y*\"   \"que\"    \"ME\"    \n## [9] \"ALEGRO\""},{"path":"vectores.html","id":"vectores-l√≥gicos-truefalse","chapter":"Cap√≠tulo 3 Tipos de datos I: vectores","heading":"3.4 Vectores l√≥gicos (TRUE/FALSE)","text":"[X] Variables num√©ricas (individuales)[X] Vectores de n√∫meros[X] Vectores de caracteres[ ] Vectores l√≥gicosVeamos un √∫ltimo tipo de vectores importante en todo lenguaje de programaci√≥n: los vectores de valores l√≥gicos. Un valor l√≥gico puede tomar tres valores:TRUE (guardado internamente como un 1).FALSE (guardado internamente como un 0).NA (dato ausente, son las siglas de available, cuando pretendemos aplicar una comparaci√≥n un dato ya de por si ausente).Estos valores son resultado de evaluar condiciones l√≥gicas. Por ejemplo, imaginemos que definimos un vector de n√∫meros x <- c(1.5, -1, 2, 4, 3, -4). ¬øQu√© numeros del vector son menores que 2? Basta con que ejecutemos la orden x < 2, que nos devolver√° TRUE/FALSE en cada hueco, en funci√≥n de si cumple (TRUE) o (FALSE) la condici√≥n pedida.El primer, segundo y sexto elemento del vector son los √∫nicos elementos (estrictamente) menores que 2, de ah√≠ que en el primer, segundo y sexto elemento aparezca un TRUE y en el resto un FALSE. Es importante recordar que al evaluar una condici√≥n l√≥gica sobre un vector de longitud n, la salida sigue siendo un vector de longitud n pero con valores l√≥gicos.Dicha condici√≥n l√≥gica puede hacerse con otros operadores como <=, > o >=.¬†Tambi√©n podemos comparar si es igual otro elemento, para lo que usaremos el operador ==, pudiendo usar tambi√©n su opuesto != (¬´distinto de¬ª).Las condiciones pueden ser combinadas, principalmente de dos maneras:Intersecci√≥n: todas las condiciones concatenadas se deben cumplir (conjunci√≥n y, operador &) para devolver un TRUE.Intersecci√≥n: todas las condiciones concatenadas se deben cumplir (conjunci√≥n y, operador &) para devolver un TRUE.Uni√≥n: basta con que una de las condiciones concatenadas se cumpla (conjunci√≥n o, operador |) para devolver un TRUE.Uni√≥n: basta con que una de las condiciones concatenadas se cumpla (conjunci√≥n o, operador |) para devolver un TRUE.Por ejemplo, vamos calcular qu√© elementos del vector c(1.5, -1, 2, 4, 3, -4) sean menores que 3 pero (y) mayores que 0, y los elementos menores que 2 o mayores que 3.","code":"\nx <- c(1.5, -1, 2, 4, 3, -4)\nx < 2## [1]  TRUE  TRUE FALSE FALSE FALSE  TRUE\nx <= 2## [1]  TRUE  TRUE  TRUE FALSE FALSE  TRUE\nx > 2## [1] FALSE FALSE FALSE  TRUE  TRUE FALSE\nx >= 2## [1] FALSE FALSE  TRUE  TRUE  TRUE FALSE\nx == 2## [1] FALSE FALSE  TRUE FALSE FALSE FALSE\nx != 2## [1]  TRUE  TRUE FALSE  TRUE  TRUE  TRUE\nx <- c(1.5, -1, 2, 4, 3, -4)\nx < 3 & x > 0 # Solo los que cumplen ambas condiciones## [1]  TRUE FALSE  TRUE FALSE FALSE FALSE\nx < 2 | x > 3 # Los cumplen al menos una de ellas## [1]  TRUE  TRUE FALSE  TRUE FALSE  TRUE"},{"path":"vectores.html","id":"fechas","chapter":"Cap√≠tulo 3 Tipos de datos I: vectores","heading":"3.5 Fechas","text":"numeric: variables de tipo num√©ricas (algunas veces vendr√°n indicados como int o integer para enteros, y dbl o double para n√∫meros con decimales).character: variables de tipo caracter.Date: variables de tipo fecha.¬†Hay un tipo muy especial de datos que a√∫n hemos visto que son los datos tipo fecha. Una fecha podr√≠a ser priori una simple cadena de texto \"2021-04-21\" pero podemos usar la funci√≥n .Date() para que R entienda que esa cadena de texto representa un instante temporal. F√≠jate la diferencia entre una fecha en texto y una fecha con .Date().En el momento en que convertimos la cadena de texto fecha, aunque se visualice como tal, internamente es un n√∫mero, por lo que podemos restar fechas (d√≠as entre ambas), podemos sumar n√∫meros fechas (fecha d√≠as despu√©s), etc. Dentro del entorno tidyverse, el paquete lubridate tiene implementadas m√∫ltiples funciones para poder operar con fechas de forma sencilla e intuitiva.Como ya hemos dicho, las fechas y momentos temporales ser√°n meras cadenas de caracter sino que tienen clases especiales asociadas y algunas funciones especiales que pueden sernos √∫tiles: las fechas ser√°n de tipo dates mientras que las horas ser√° de tipo POSIXct o POSIXlt. En el primer caso, las fechas ser√°n guardadas internamente como el n√∫mero de d√≠as transcurridos desde el 1 de enero de 1970, y las horas como n√∫mero de segundos desde el 1 de enero de 1970 (para la clase POSIXct) o una lista de segundos, minutos y horas (para la clase POSIXlt).¬øC√≥mo obtener autom√°ticamente la fecha de hoy, por ejemplo? La funci√≥n Sys.Date() nos devuelve directamente la fecha y hora en el momento de la ejecuci√≥n de la orden.Para convertir una cadena de texto fecha, basta usar la funci√≥n .Date() del paquete {base}, pas√°ndole como argumento la fecha en formato \"yyyy-mm-dd\" por defecto.Si introducimos otro tipo de formato, debemos especific√°rselo en un segundo argumento, para R sepa el formato de fecha que le estamos pasando¬†ERROR: sin pasar fecha se puede operarSi tenemos una fecha como caracter, nunca podremos hacer operaciones (por ejemplo, restarle una unidad temporal, en este caso un d√≠a).F√≠jate la diferencia cuando lo convertimos en fechaAunque aparentemente parezca una cadena de texto, prueba ejecutar unclass(fecha) para comprobar que tiene internamente guardado.¬†Dentro del entorno de paquetes de tidyverse, el paquete lubridate tiene bastantes funciones √∫tiles para trabajar con fechas como las siguientesAdem√°s el paquete nos proporciona herramientas para extraer la fecha y hora actuales con las funciones today() y now()Tambi√©n tenemos disponibles en dicho paquete funciones para extraer facilmente algunas variables temporales como el d√≠a de la semana, el mes o el cuatrimestre, con las funciones year(), months(), day() o wday() (d√≠a de la semana).Al igual que podemos realizar operaciones aritm√©ticas sencillas con las fechas, tambi√©n podemos realizar comparaciones, por ejemplo, si el d√≠a actual es menor o mayor que otra fecha dada.¬†ERROR: sumar n√∫meros caracteres sin convertir tipos de datosA veces la lectura de variables num√©ricas de nuestros archivos puede hacer que un n√∫mero, por ejemplo 1, sea le√≠do como la cadena de texto \"1\", con la que podemos operar como un n√∫mero. Las funciones .numeric(), .character() y .logical() nos permiten convertir una variable en tipo num√©rico, caracter o l√≥gico, respectivamente.","code":"\nfecha_char <- \"2021-04-21\"\nfecha_date <- as.Date(fecha_char, format = \"%Y-%m-%d\")\nfecha_char + 1## Error in fecha_char + 1: argumento no-num√©rico para operador binario\nfecha_date + 1## [1] \"2021-04-22\"\nfecha <- Sys.Date()\nfecha## [1] \"2021-12-23\"\nfecha - 7 # una semana antes## [1] \"2021-12-16\"\nclass(fecha) # de clase fecha## [1] \"Date\"\nas.Date(\"2021-03-10\") # formato por defecto## [1] \"2021-03-10\"\nas.Date(\"10-03-2020\", \"%d-%m-%Y\") # con d√≠a-mes-a√±o (4 cifras)## [1] \"2020-03-10\"\nas.Date(\"10-03-20\", \"%d-%m-%y\")  # con d√≠a-mes-a√±o (2 cifras)## [1] \"2020-03-10\"\nas.Date(\"03-10-2020\", \"%m-%d-%Y\") # con mes-d√≠a-a√±o (4 cifras)## [1] \"2020-03-10\"\nas.Date(\"Octubre 21, 1995 21:24\", \"%B %d, %Y %H:%M\") # fecha escrita## [1] NA\n\"2021-03-10\" - 1 # error## Error in \"2021-03-10\" - 1: argumento no-num√©rico para operador binario\nfecha <- as.Date(\"2021-03-10\") - 1 # d√≠a previo\nfecha## [1] \"2021-03-09\"\nunclass(fecha)## [1] 18695\nunclass(as.Date(\"1969-01-01\")) # un a√±o antes de la referencia a partir de la cual cuenta d√≠as## [1] -365\nlibrary(lubridate)\nymd_hms(\"2017-11-28T14:02:00\") # convertir a fecha una cadena a√±o-mes-d√≠a + hora## [1] \"2017-11-28 14:02:00 UTC\"\nydm_hms(\"2017-22-12 10:00:00\") # convertir a fecha una cadena a√±o-d√≠a-mes + hora## [1] \"2017-12-22 10:00:00 UTC\"\ndmy_hms(\"1 Jan 2017 23:59:59\") # convertir a fecha una cadena textual de fecha + hora## [1] \"2017-01-01 23:59:59 UTC\"\nmdy(\"July 4th, 2000\") # convertir a fecha una cadena textual de fecha## [1] \"2000-07-04\"\nymd(20170131)## [1] \"2017-01-31\"\ntoday()## [1] \"2021-12-23\"\nnow()## [1] \"2021-12-23 17:55:07 CET\"\nfecha <- now()\nyear(fecha)## [1] 2021\nmonth(fecha)## [1] 12\nday(fecha)## [1] 23\nwday(fecha, week_start = 1) # D√≠a de la semana (empezando por el lunes)## [1] 4\nhour(fecha)## [1] 17\nminute(fecha)## [1] 55\nsecond(fecha)## [1] 7.542684\nweek(fecha) # N√∫mero de semana (del a√±o)## [1] 51\nfecha_actual <- now()\nfecha_actual > ymd(20170131) # Actual vs 2017-01-31## [1] TRUE\nfecha_actual > ymd(21000131) # Actual vs 2100-01-31## [1] FALSE\n\"1\" + 1## Error in \"1\" + 1: argumento no-num√©rico para operador binario\nas.numeric(\"1\") + 1## [1] 2\nas.character(1)## [1] \"1\"\nas.logical(c(0, 1))## [1] FALSE  TRUE"},{"path":"vectores.html","id":"consejos-2","chapter":"Cap√≠tulo 3 Tipos de datos I: vectores","heading":"3.6 Consejos","text":"CONSEJOS¬†Recuperar un comando y autocompletarSi haces click con el rat√≥n en la consola y pulsas la flecha ¬´arriba¬ª del teclado, te ir√° apareciendo todo el historial de √≥rdenes ejecutadas. Es una manera de ahorrar tiempo para ejecutar √≥rdenes similares las ya ejecutadas. Si empiezas escribir el nombre de una variable pero te acuerdas exactamente de su nombre, pulsando tabulador te autocompletar√° solo.¬†Expresiones regularesDentro del entorno de paquetes tidyverse, el paquete stringr permite un manejo m√°s complejo de cadenas de texo (como el uso de expresiones regulares).\nImagen/gr√°fica 3.1: Paquete stringr para manejar cadenas de texto m√°s complejas\n¬†Tabla 3.1: Paquetes mencionados hasta ahora","code":""},{"path":"vectores.html","id":"ejercicios-1","chapter":"Cap√≠tulo 3 Tipos de datos I: vectores","heading":"3.7 üìù Ejercicios","text":"(haz click en las flechas para ver soluciones)üìùEjercicio 1: define un vector que contenga los n√∫meros 1, 10, -1 y 2, y gu√°rdalo en una variable llamada vector_num. Soluci√≥n:¬†üìùEjercicio 2: crea un vector con las palabras ‚ÄúHola‚Äù, ‚Äú‚Äù, ‚Äúllamo‚Äù (y tu nombre y apellidos), y pega luego sus elementos de forma que la frase est√© correctamente escrita en castellano. Tras hacerlo, a√±ade ‚Äúy tengo 30 a√±os‚Äù. Soluci√≥n:¬†üìùEjercicio 3: obten la fecha de hoy, define la fecha de tu cumplea√±os, y calcula la diferencia de d√≠asSoluci√≥n:","code":"\n# Vector de n√∫meros\nvector_num <- c(1, 10, -1, 2)\nvector_num## [1]  1 10 -1  2\n# Definiendo el vector\nvector_char <- c(\"Hola\", \"me\", \"llamo\", \"Javier\",\n                 \"√Ålvarez\", \"Li√©bana\")\n\n# Pegamos\npaste(vector_char, collapse = \" \")## [1] \"Hola me llamo Javier √Ålvarez Li√©bana\"\n# A√±adimos frase\npaste0(paste(vector_char, collapse = \" \"), \" y tengo 30 a√±os.\")## [1] \"Hola me llamo Javier √Ålvarez Li√©bana y tengo 30 a√±os.\"\n# Hoy\nhoy <- Sys.Date()\n\n# Cumple (diferentes formatos de entrada)\ncumple <- as.Date(\"1989-09-10\") # por defecto\ncumple <- as.Date(\"10-09-1989\", \"%d-%m-%Y\")\n\n# Diferencia\nhoy - cumple## Time difference of 11792 days"},{"path":"operacionesvectores.html","id":"operacionesvectores","chapter":"Cap√≠tulo 4 Operaciones con vectores","heading":"Cap√≠tulo 4 Operaciones con vectores","text":"","code":""},{"path":"operacionesvectores.html","id":"operaciones-aritm√©ticas-con-vectores-num√©ricos","chapter":"Cap√≠tulo 4 Operaciones con vectores","heading":"4.1 Operaciones aritm√©ticas con vectores num√©ricos","text":"Hemos dicho que un n√∫mero es un vector de longitud 1, as√≠ que toda operaci√≥n aritm√©tica que podamos hacer con un n√∫mero la vamos poder hacer con un vector de n√∫meros, de forma que si hacemos por ejemplo la operaci√≥n 2 * z, lo que suceder√° es que CADA ELEMENTO del vector ser√° multiplicado por 2.De la misma manera se pueden definir sumas z + x, ra√≠ces cuadradas sqrt(z) o elevar cada elemento al cuadrado z^2.¬†Esto √∫ltimo es bastante importante que se te olvide ya que en otros lenguajes siempre es as√≠. En R, salvo que especifiquemos lo contrario, toda operaci√≥n ARITM√âTICA que hagas un vector ser√° elemento elemento: si multiplicas dos matrices, la operaci√≥n la realizar√° elemento elemento, como una multiplicaci√≥n matricial.¬†Dado que la operaci√≥n (por ejemplo, una suma) se realiza elemento elemento, ¬øqu√© suceder√° si sumamos dos vectores de distinta longitud? Prueba definir un vector con los 4 primeros impares, e intentar hacer la suma z + y (un vector de longitud 3 m√°s un vector de longitud 4).R intenta molestarte lo menos posible, as√≠ que lo que hace es reciclar: si tiene un vector de 4 elementos y le intentas sumar uno de 3 elementos, lo que har√° ser√° reciclar elementos del vector con menor longitud: har√° 1+2, 3+4, 5+6 pero‚Ä¶ 7+2 (vuelve al primero).¬†Como hemos comentado anteriormente, los valores l√≥gicosTRUE/FALSE son guardados internamente como 0/1 por lo que podemos usar operaciones aritm√©ticas con ellos. Por ejemplo, si queremos averiguar el n√∫mero de elementos de un vector que cumplen una condici√≥n l√≥gica < 2, los que lo hagan tendr√°n asignado un 1 y los que un 0, por lo que basta con sumar el vector l√≥gico para obtener el n√∫mero de elementos bajo dicha condici√≥n.","code":"\n# Multiplicamos por 2 a CADA ELEMENTO del vector\nz <- c(2, 4, 6)\n2 * z## [1]  4  8 12\n# Sumamos 3 a CADA ELEMENTO DEL VECTOR\nz + 3## [1] 5 7 9\n# Hacemos la ra√≠z cuadrada de CADA ELEMENTO DEL VECTOR\nsqrt(z)## [1] 1.414214 2.000000 2.449490\n# Elevamos al cuadrado CADA ELEMENTO DEL VECTOR\nz^2## [1]  4 16 36\ny <- c(1, 3, 5, 7)\nz + y## [1]  3  7 11  9\nsum(x < 2) # sumamos el vector de TRUE/FALSE --> n√∫mero de TRUE## [1] 3"},{"path":"operacionesvectores.html","id":"operaciones-estad√≠sticas-con-vectores-num√©ricos","chapter":"Cap√≠tulo 4 Operaciones con vectores","heading":"4.2 Operaciones estad√≠sticas con vectores num√©ricos","text":"Al igual que podemos ejecutar operaciones aritm√©ticas, podemos realizar tambi√©n operaciones estad√≠sticas con los vectores, como calcular su suma (sum()), su media (mean()), su mediana (median()), su suma acumulada (cumsum() cada elemento lo acumula al anterior) o percentiles (quantiles()).¬†WARNING:En R algunas funciones tienen argumentos por defecto, argumentos que necesitan ser asignados un valor priori. En el ejemplo de calcular los percentiles con quantile(), hay un argumento por defecto (con un valor ya asignado sino se especifica lo contrario) que es probs = c(0, 0.25, 0.5, 0.75, 1). Pero dicho argumento por defecto puede ser cambiado, por ejemplo, para sacar los percentiles 15%-30%-70%-90%.¬†CONSEJOComo podido comprobar, este otro tipo de operaciones ESTAD√çSTICAS se realizan elemento elemento: la media o la suma las realiza tomando todos los elementos del vector.¬†GLOSARIO:Media: medida de centralizaci√≥n que consiste en sumar todos los elementos y dividirlos entre la cantidad de elementos sumados. pesar de ser la m√°s conocida, la media es muy poco robusta: dado un conjunto, si se introducen valores at√≠picos o outliers (valores muy grandes o muy peque√±os), la media se perturbar con mucha facilidad. Dado un vector de valores \\(x = (x_1, \\ldots, x_n)\\), se denota como \\(\\overline{x}\\).\\[\\overline{x} = \\frac{\\displaystyle \\sum_{=1}^{n}x_i}{n}\\]Mediana: medida de centralizaci√≥n que consiste en, tras ordenar los datos de menor mayor, quedarnos con el valor que ocupa el medio (deja tantos n√∫meros por debajo como por encima). M√°s robusta que la media aunque menos la moda. Dado un vector de valores \\(x = (x_1, \\ldots, x_n)\\), se denota como \\(Me_x\\).\\[Me_x = \\displaystyle \\arg \\min_{x_i} \\left\\lbrace F_i > 0.5 \\right\\rbrace, \\quad F_i = \\frac{\\#\\left\\lbrace x_j \\leq x_i \\right\\rbrace}{n}\\]Moda: medida de centralizaci√≥n que consiste en encontrar el valor m√°s repetido (el valor trending). Es la medida de centralizaci√≥n m√°s robusta. Dado un vector de valores \\(x = (x_1, \\ldots, x_n)\\), se denota como \\(Mo_x\\).\\[Mo_x = \\displaystyle \\arg \\max_{x_i} f_i  , \\quad f_i = \\frac{\\#\\left\\lbrace x_j = x_i \\right\\rbrace}{n}\\]¬†","code":"\nsum(y) # suma## [1] 16\nmean(y) # media## [1] 4\nmedian(y) # mediana## [1] 4\ncumsum(y) # suma acumulada## [1]  1  4  9 16\ny <- c(1, 2, 5, 5, 8, 9, 10, 10, 10, 11, 13, 15, 20, 23, 24, 29)\nquantile(y) # Percentiles por defecto: cuartiles (0%-25%-50%-75%-100%)##    0%   25%   50%   75%  100% \n##  1.00  7.25 10.00 16.25 29.00\ny <- c(1, 2, 5, 5, 8, 9, 10, 10, 10, 11, 13, 15, 20, 23, 24, 29)\nquantile(y, probs = c(0.15, 0.3, 0.7, 0.9)) # Percentiles p15, p30, p70 y p90##  15%  30%  70%  90% \n##  5.0  8.5 14.0 23.5"},{"path":"operacionesvectores.html","id":"ausentes","chapter":"Cap√≠tulo 4 Operaciones con vectores","heading":"4.3 Datos ausentes: NA y NaN","text":"La vida siempre es perfecta as√≠ que en muchas ocasiones nos encontraremos con lo que llamamos en estad√≠stica un dato ausente o missing value, un valor que tenemos en nuestra variable, y un ejemplo pr√°ctico lo tenemos con los datos de vacunaci√≥n de covid del Ministerio de Sanidad que hemos tenido en 2020-2021. Cada d√≠a se publicaba un PDF (ya‚Ä¶mal) con los datos de vacunaci√≥n PERO‚Ä¶se publican datos los fines de semana: en dichas fechas hay datos que tenemos, y en R se representan por NA (significa available).","code":""},{"path":"operacionesvectores.html","id":"na-not-available","chapter":"Cap√≠tulo 4 Operaciones con vectores","heading":"4.3.1 NA: not available","text":"Vamos crear un vector de n√∫meros con datos ausentes con la orden x <- c(1, NA, 3, NA, NA, 5, 6): el vector tendr√° longitud 7 pero en el segundo, cuarto y quinto elemento tendremos un dato faltante, un lugar que tenemos relleno (pero que eliminamos).¬øPuedes aventurar que sucede cuando multiplicamos ese vector por 2 por ejemplo?¬†WARNING:Un dato que tenemos, multiplicado por 2, sigue siendo un dato ausente. Es muy importante para evitar resultados err√≥neos que entendamos que un dato ausente computa en una operaci√≥n aritm√©tica, es un hueco vac√≠o. Si hacemos la suma del vector, estamos sumando n√∫meros m√°s datos ausentes, por lo que el resultado final ser√° tambi√©n un dato ausente. Si tenemos alg√∫n dato ausente en nuestro vector, la suma final est√° su vez ausente, ¬°podemos saber cu√°nto vale!¬†Para evitar que un dato ausente en nuestros datos nos impida hacer ciertas operaciones, en muchas funciones de R podemos a√±adir el argumento na.rm = TRUE: primero elimina los datos ausentes, y luego ejecuta la funci√≥n.Una manera de localizar que elementos est√°n ausentes en nuestras variables es con la funci√≥n .na(), una funci√≥n que nos devuelve un vector de valores l√≥gico: TRUE si el elemento est√° ausente y FALSE si lo est√°.Dichos datos ausentes se pueden eliminar (sin necesidad de sumarlos) con la funci√≥n na.omit() (aunque veces lo que nos interesa es que sea ausente, introduciendo el punto medio entre su valor anterior y su valor posterior, por ejemplo).","code":"\nx <- c(1, NA, 3, NA, NA, 5, 6) # Vector num√©rico con datos faltante\nlength(x) # longitud del vector## [1] 7\nx## [1]  1 NA  3 NA NA  5  6\n2 * x # operaci√≥n aritm√©tica con un vector con NA## [1]  2 NA  6 NA NA 10 12\nsum(x) # suma de un vector que contiene NA## [1] NA\nsum(x, na.rm = TRUE) # eliminando datos ausentes## [1] 15\nis.na(x) # TRUE si est√° ausente (NA), FALSE si no lo est√°.## [1] FALSE  TRUE FALSE  TRUE  TRUE FALSE FALSE\nna.omit(x)## [1] 1 3 5 6\n## attr(,\"na.action\")\n## [1] 2 4 5\n## attr(,\"class\")\n## [1] \"omit\""},{"path":"operacionesvectores.html","id":"nan-not-a-number","chapter":"Cap√≠tulo 4 Operaciones con vectores","heading":"4.3.2 NaN: not a number","text":"Hay un tipo de dato, como resultado de operaciones permitidas o cuyo resultado es indeterminado, que en R lo veremos como NaN: number, un resultado fruto de una indeterminaci√≥n, como por ejemplo la operaci√≥n 0/0 (cuyo l√≠mite est√° definido). Importante saber que tambi√©n existe una forma de denotar al infinito como Inf, siendo el resultado de algunas operaciones como 1/0.De la misma manera que podemos localizar valores NA, tenemos nuestra disposici√≥n las funciones .infinte() y .nan() para detectar que elementos de nuestro vector son Inf o NaN, respectivamente.","code":"\n1/0## [1] Inf\n0/0## [1] NaN\nx <- c(1, NA, 3, 4, Inf, 6, 7, Inf, NaN, NA)\nis.na(x)##  [1] FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE\nis.nan(x)##  [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE\nis.infinite(x)##  [1] FALSE FALSE FALSE FALSE  TRUE FALSE FALSE  TRUE FALSE FALSE"},{"path":"operacionesvectores.html","id":"seleccionar-elementos-de-un-vector","chapter":"Cap√≠tulo 4 Operaciones con vectores","heading":"4.4 Seleccionar elementos de un vector","text":"Ya sabemos definir variables que sean vectores (recuerda: colecci√≥n de valores del mismo tipo). ¬øY si del vector original queremos EXTRAER UN SUBCONJUNTO del mismo, por ejemplo, los primeros 10 elementos?R tiene varias formas de hacer esto pero la m√°s sencilla es entendiendo que si yo quiero acceder al elemento -√©simo de un vector, deber√© usar el operador de selecci√≥n []. Veamos un ejemploDado que hemos visto que un n√∫mero es m√°s que un vector de longitud uno, esta operaci√≥n tambi√©n la podemos aplicar usando un vector de √≠ndices seleccionar, de forma que le podemos indicar simultaneamente que valores que queremosOtras veces querremos seleccionar un elemento en concreto sino filtrar algunos elementos en concreto y extraerlos, para lo cual deberemos repetir la misma operaci√≥n pero con el signo - delante: el operador [-] selecciona el elemento -√©simo del vector sino que lo elimina en nuestro filtro.¬†Sin embargo, lo habitual es que dicho filtro lo hagamos en base una condici√≥n l√≥gica. Supongamos que x <- c(7, 20, 18, 3, 19, 9, 13, 3, 45) y y <- c(17, 21, 58, 33, 15, 59, 13, 1, 45) son las edades de dos grupos de personas y que queremos quedarnos solo con los mayores edad. ¬øTenemos que andar averiguando en que posici√≥n se encuentran para luego seleccionarlos? , vamos seleccionar los elementos que cumplen una condici√≥n dada.Lo que hemos hecho ha sido pasarlo como √≠ndices un vector l√≥gico TRUE/FALSE, de forma que solo filtrar√° los que tengan un TRUE asignado, aquellos que cumplen la condici√≥n l√≥gica introducida. Esto tambi√©n nos puede servir para limpiar de datos ausentes, combinando la funci√≥n .na(), que nos localiza el lugar que ocupan los ausentes, con el operador !, que lo que hace es negar lo que venga detr√°s. Tambi√©n podemos probar combinar condiciones l√≥gicas para nuestra selecci√≥n.Como ves si un valor es NA, la evaluaci√≥n de una condici√≥n l√≥gica sobre √©l (mayor o menor de 18 a√±os) nos seguir√° devolviendo NA. Por √∫ltimo, R nos permite dar significado l√©xico nuestros valores (significan algo, solo n√∫meros), pudiendo poner nombres los elementos de un vector, permitiendo su selecci√≥n por dichos nombres.Con la funci√≥n names() adem√°s podemos, solo consultar los nombres de una variable, sino cambiarlos nuestro gusto.¬†CONSEJO: , anyExisten dos funciones muy √∫tiles en R para saber si TODOS o ALGUNO de los elementos de un vector cumple una condici√≥n. Las funciones () y () nos devolver√° un √∫nico valor l√≥gico. Estas funciones son muy √∫tiles al final de los c√≥digos para comprobar que las condiciones que tienen que verificar los datos se cumplen, y asegurarnos que el proceso se ha ejecutado correctamente (por ejemplo, que todos los datos sean positivos o haya datos ausentes).¬†","code":"\nx <- 1:100 # Vector de longitud 100 (del 1 al 100)\ny <- x[37] # Solo me interesa el elemento que ocupa el lugar 37\ny## [1] 37\nx[c(1, 4, 51, 77)] # Solo queremos acceder a los elementos en la posici√≥n 1, 4, 51, y 77## [1]  1  4 51 77\ny <- c(\"hola\", \"qu√©\", \"tal\", \"todo\", \"ok\", \"?\")\ny[1:2] # Solo queremos acceder a los elementos en la posici√≥n 1 y 2## [1] \"hola\" \"qu√©\"\nc(1:2, length(y))## [1] 1 2 6\ny[c(1:2, length(y))] # Solo accedemos a los elementos en la posici√≥n 1, 2 y adem√°s el que ocupa la √∫ltima posici√≥n (recuerda: length(y) nos da la longitud total del vector)## [1] \"hola\" \"qu√©\"  \"?\"\ny## [1] \"hola\" \"qu√©\"  \"tal\"  \"todo\" \"ok\"   \"?\"\nz <- y[-2] # Nos muestra todo y salvo el elemento que ocupa la segunda posici√≥n\nz## [1] \"hola\" \"tal\"  \"todo\" \"ok\"   \"?\"\nx <- c(7, 20, 18, 3, 19, 9, 13, 3, 45)\ny <- c(17, 21, 58, 33, 15, 59, 13, 1, 45)\nx[x >= 18] # mayores de 18 a√±os del conjunto x## [1] 20 18 19 45\ny[x >= 18] # mayores de 18 a√±os del conjunto y## [1] 21 58 15 45\nx <- c(7, NA, 20, 3, 19, 21, 25, 80, NA)\nx[x >= 18] # mayores de 18 a√±os del conjunto x## [1] NA 20 19 21 25 80 NA\nx[is.na(x)] # solo valores ausentes## [1] NA NA\nx[!is.na(x)] # sin valores ausentes: ! es el s√≠mbolo de la negaci√≥n## [1]  7 20  3 19 21 25 80\n!(x >= 18) # niega los mayores de 18 a√±os, todo lo que no cumpla esa condici√≥n## [1]  TRUE    NA FALSE  TRUE FALSE FALSE FALSE FALSE    NA\nx[x >= 18 & x <= 25] # los valores que cumplen ambas (&): entre 18 y 25 a√±os## [1] NA 20 19 21 25 NA\nx <- c(\"edad\" = 31, \"tlf\" = 613910687, \"cp\" = 33007) # cada n√∫mero tiene un significado distinto\nx##      edad       tlf        cp \n##        31 613910687     33007\nx[c(\"edad\", \"cp\")] # seleccionamos los elementos que tienen ese nombre asignado##  edad    cp \n##    31 33007\nnames(x) # Consultamos nombres## [1] \"edad\" \"tlf\"  \"cp\"\nnames(x) <- c(\"a√±os\", \"m√≥vil\", \"direcci√≥n\") # Cambiamos nombres\nnames(x) # Consultamos nuevos nombres## [1] \"a√±os\"      \"m√≥vil\"     \"direcci√≥n\"\nx##      a√±os     m√≥vil direcci√≥n \n##        31 613910687     33007\nx <- c(1, 2, 3, 4, 5, NA, 7)\nall(x < 3)## [1] FALSE\nany(x < 3)## [1] TRUE\nall(x > 0)## [1] NA\nall(na.omit(x) > 0)## [1] TRUE\nall(is.na(x))## [1] FALSE\nany(is.na(x))## [1] TRUE"},{"path":"operacionesvectores.html","id":"which","chapter":"Cap√≠tulo 4 Operaciones con vectores","heading":"4.4.1 which","text":"Hemos visto como seleccionar elementos de un vector que cumplen una condici√≥n, para veces queremos el elemento en s√≠, sino el lugar que ocupa: ¬øqu√© valores de un vector cumplen una condici√≥n l√≥gica, qu√© lugar ocupan? Para obtener dicho √≠ndice tenemos nuestro disposici√≥n la funci√≥n (), que nos devuelve el elemento en s√≠ sino su lugar.Esta funci√≥n es muy √∫til especialmente cuando queremos averiguar el valor que ocupa el m√°ximo/m√≠nimo de una colecci√≥n de valores, con las funciones .max() y .min().","code":"\nx <- c(7, NA, 20, 3, 19, 21, 25, 80, NA)\nx[x >= 18] # Accedemos a los elementos que cumplen la condici√≥n## [1] NA 20 19 21 25 80 NA\nwhich(x >= 18) # Obtenemos los lugares que ocupan los elementos que cumplen la condici√≥n## [1] 3 5 6 7 8\nmax(x, na.rm = TRUE) # m√°ximo de x (si no eliminamos NA, nos devolver√° NA)## [1] 80\nmin(x, na.rm = TRUE) # m√≠nimo de x (si no eliminamos NA, nos devolver√° NA)## [1] 3\nwhich.max(x) # Lugar que ocupa el m√°ximo## [1] 8\nx[which.max(x)]## [1] 80\nwhich.min(x) # Lugar que ocupa el m√≠nimo## [1] 4\nx[which.min(x)]## [1] 3"},{"path":"operacionesvectores.html","id":"null","chapter":"Cap√≠tulo 4 Operaciones con vectores","heading":"4.4.2 NULL","text":"veces veremos que adem√°s de NA y NaN, R nos muestra un dato llamado NULL. Cuando tenemos NA en alguna variable, el registro existe, pero est√° relleno. Sin embargo, cuando tenemos un NULL significa que ese registro ni siquiera existe: es un dato guardado pero cuyo valor desconocemos, es un dato que ni siquiera existe (por ejemplo, si guardamos datos de 7 personas, el dato de la octava persona es NA, es que hay octava persona directamente).","code":"\nx <- c(1, NA, 3, NA, NA, 5, 6)\nx[2] # NA: el registro existe pero sin dato## [1] NA\nnames(x) # No hemos definido el nombre de las variables, as√≠ que devuelve NULL## NULL"},{"path":"operacionesvectores.html","id":"ordenar-vectores","chapter":"Cap√≠tulo 4 Operaciones con vectores","heading":"4.5 Ordenar vectores","text":"Una acci√≥n habitual al trabajar con datos es saber ordenarlos: de menor mayor edad, datos m√°s recientes vs antiguos, etc. Para ello tenemos la funci√≥n sort(), que podemos usar directamente para ordenar de menor mayor, o con el argumento decreasing = TRUE, para ordenar de mayor menor.Otra forma de ordenar un vector es que R nos devuelva los √≠ndices de los elementos ordenados, y luego usar dichos √≠ndices para reorganizar los elementos, con la funci√≥n order().¬†CONSEJO: argumentos por defectoLa funci√≥n sort() es un buen ejemplo de que las funciones traen definidos argumentos por defecto (aunque los veamos priori). La orden sort(x) en realidad est√° ejecutando sort(x, decreasing = TRUE), pero como es su valor por defecto, nos podemos ahorrar incluirlo. Escribe ? help sort() en la consola y ver√°s como en la cabecera de la funci√≥n ya hay preasignado un decreasing = TRUE.","code":"\nx <- c(1, -3, 0, 10, 5, 2, 7, -13)\nsort(x) # orden de menor a mayor## [1] -13  -3   0   1   2   5   7  10\nsort(x, decreasing = FALSE) # orden de mayor a menor## [1] -13  -3   0   1   2   5   7  10\norder(x) # el elemento m√°s peque√±o es el octavo, luego el segundo, luego el tercero, luego el primero, luego el sexto, etc.## [1] 8 2 3 1 6 5 7 4\nx[order(x)] # accedemos a los √≠ndices ordenados, equivalente al sort(x)## [1] -13  -3   0   1   2   5   7  10"},{"path":"operacionesvectores.html","id":"consejos-3","chapter":"Cap√≠tulo 4 Operaciones con vectores","heading":"4.6 Consejos","text":"CONSEJOS¬†Diferencia de conjuntosUna funci√≥n muy √∫til para ver las diferencias entre dos conjuntos es setdiff(), una funci√≥n que nos devuelve los elementos distintos entre dos conjuntos.¬†Optimiza tu c√≥digoAunque parezca un tema menor, si tu c√≥digo tarda 1 milisegundo m√°s de lo que podr√≠a tardar de otra forma, si esa orden se repite muchas veces, ese milisegundo extra puede ser 5, 10 o 20 minutos m√°s que tu c√≥digo tardar√° en ejecutarse. Hay un paquete muy √∫til en R para medir tiempos de distintas √≥rdenes que hacen lo mismo (el paquete microbenchmark), vamos instalarlo.Este paquete contiene una orden para comparar el tiempo de dos √≥rdenes: necesita como primeros argumentos las dos √≥rdenes cuyos tiempos vamos comparar, y un argumento times en el que le indicamos el n√∫mero de veces que ejecutar√° cada orden para realizar los tiempos medios. Vamos comparar los comandos de ordenaci√≥n order() y sort().S√≠, est√°s viendo bien: aunque priori parezca contraintuitivo, es m√°s corto obtener los √≠ndices ordenados de un vector, y luego reordenarlo en base esos √≠ndices, que la ordenaci√≥n directa trav√©s del comando sort() (ya que usan algoritmos de ordenaci√≥n distintos).","code":"\ny <- 1:10\nz <- c(1, 3, 7, 10)\nsetdiff(y, z) # Elementos en y que no est√°n en z ## [1] 2 4 5 6 8 9\ninstall.packages(\"microbenchmark\")\nlibrary(microbenchmark)\nx <- rnorm(1e3) # 1000 elementos aleatorias de una normal N(0, 1)\nmicrobenchmark(sort(x), # primera forma\n               x[order(x)], # segunda forma\n               times = 1e3) # se repetir√° 1000 veces## Unit: microseconds\n##         expr    min      lq     mean  median      uq     max neval cld\n##      sort(x) 41.348 48.1265 57.03764 54.4150 61.2575 200.952  1000   b\n##  x[order(x)] 28.568 34.7995 40.09355 38.5755 42.4450 112.321  1000  a"},{"path":"operacionesvectores.html","id":"ejercicios-2","chapter":"Cap√≠tulo 4 Operaciones con vectores","heading":"4.7 üìù Ejercicios","text":"(haz click en las flechas para ver soluciones)üìùEjercicio 1: calcula la suma del vector vector_num mencionado anteriormente (definido como un vector que contenga los n√∫meros 1, 10, -1 y 2). Soluci√≥n:¬†üìùEjercicio 2: define otro vector vector_num2 que contenga los n√∫meros 5, -7, 8, -3, y haz la suma de vector_num y vector_num2. Soluci√≥n:¬†üìùEjercicio 3: calcula el n√∫mero de elementos mayores que 0 del resultado de la suma de vector_num y vector_num2. Soluci√≥n:¬†üìùEjercicio 4: calcula la versi√≥n ordenada del vector anterior vector_num. Soluci√≥n:¬†üìùEjercicio 5: encuentra del vector vector_num original el lugar (el √≠ndice) que ocupa su m√≠nimo y su m√°ximo. Soluci√≥n:¬†üìùEjercicio 6: encuentra del vector vector_num los elementos mayores que 1 y menores que 7. Encuentra una forma de averiguar si todos los elementos son o positivos. Soluci√≥n:¬†üìùEjercicio 7: define el vector c(-1, 0, 4, 5, -2), calcula la ra√≠z cuadrada del vector y determina que lugares son ausente de tipo NaN. Soluci√≥n:¬†üìùEjercicio 8: define el vector de los primeros n√∫meros impares (hasta el 21) y extrae los elementos que ocupan los lugares 1, 4, 5, 8. Elimina del vector el segundo elementoSoluci√≥n:","code":"\n# Vector de n√∫meros\nvector_num <- c(1, 10, -1, 2)\n\n# Suma\nsum(vector_num)## [1] 12\n# Vector de n√∫meros\nvector_num2 <- c(5, -7, 8, -3)\n\n# Suma\nvector_num + vector_num2## [1]  6  3  7 -1\n# Vector de n√∫meros\nvector_suma <- vector_num + vector_num2\n\n# Suma\nsum(vector_suma > 0)## [1] 3\n# Ordenamos el vector (con sort)\nsort(vector_num)## [1] -1  1  2 10\n# Ordenamos el vector  (con order)\nvector_num[order(vector_num)]## [1] -1  1  2 10\nvector_num <- c(1, 10, -1, 2)\n\n# Encontrando el lugar que ocupa el m√°ximo y m√≠nimo\nwhich.max(vector_num)## [1] 2\nwhich.min(vector_num)## [1] 3\n# Vector l√≥gico: mayores que 1 y menores que 7\nvector_num > 1 & vector_num < 7## [1] FALSE FALSE FALSE  TRUE\n# ¬øSon todos positivos?\nall(vector_num > 0)## [1] FALSE\n# Vector\nx <- c(-1, 0, 4, 5, -2)\n\n# ¬øCu√°les son ausentes tras aplicar la ra√≠z cuadrada?\nis.nan(sqrt(x))## [1]  TRUE FALSE FALSE FALSE  TRUE\n# Vector de impares (de 1 a 21 saltando de dos en dos)\nx <- seq(1, 21, by = 2)\n\n# Seleccionamos elementos\nx[c(1, 4, 5, 8)]## [1]  1  7  9 15\n# Eliminamos elementos\ny <- x[-2]\ny##  [1]  1  5  7  9 11 13 15 17 19 21"},{"path":"control.html","id":"control","chapter":"Cap√≠tulo 5 Estructuras de control","heading":"Cap√≠tulo 5 Estructuras de control","text":"Aunque la mayor√≠a de veces son sustituibles por otras expresiones m√°s legibles y eficientes, es importante que conozcamos como se usan las expresiones de control m√°s t√≠picas. Una expresi√≥n de control ser√° un conjunto de √≥rdenes que nos permiten decidir por donde queremos que avance nuestro programa: ¬øqu√© hacemos si sucede ? ¬øY si sucede B?Si programado en alg√∫n otro lenguaje, estar√°s echando en falta elementos como un (blabla) {...} else {...} (que los usaremos veces) o bucles y . Si es la primera que programas en alg√∫n lenguaje, dichas estructuras te las encontrar√°s programes en lo que programes:(condici√≥n) { c√≥digo } else { c√≥digo B }: si condici√≥n (por ejemplo, x == 1) es cierta, se ejecuta c√≥digo ; si es falsa, se ejecuta c√≥digo B.: bucle que permite repetir el mismo c√≥digo un n√∫mero fijo de veces (normalmente en funci√≥n de un √≠ndice).: bucle que permite repetir el mismo c√≥digo un n√∫mero priori indeterminado de veces (solo parar√≠a cuando la condici√≥n del se cumpliese).","code":""},{"path":"control.html","id":"if-else","chapter":"Cap√≠tulo 5 Estructuras de control","heading":"5.1 if-else","text":"Una de las estructuras de control m√°s famosas de cualquier lenguaje de programaci√≥n son las estructuras condicionales -else: SI las condiciones impuestas se cumplen (TRUE), ejecuta las √≥rdenes que tengamos dentro del .En caso de que se cumplan las condiciones (FALSE), suceder√° nada.Si tras el tenemos adem√°s un else, cuando la condici√≥n se cumpla, se ejecutar√° el c√≥digo que haya tras dicha part√≠cula, permiti√©ndonos decidir que sucede cuando S√ç se cumple y cuando se cumple. En el ejemplo siguiente, las √≥rdenes dentro del primer se ejecutar√°n si todas las personas son mayores de edad. En caso de cumplirse (como es el caso), se ejecutar√° lo que hay entre llaves tras el else (filtra solo los mayores de edad e imprime un mensaje por consola).Dicha estructura puede anidarse, de forma que vayamos concatenando estructuras ifelse, como en el ejemplo que tenemos debajo.Esta estructura condicional puede ser vectorizada, de forma que podamos reunir en una sola fila un n√∫mero elevado de estructuras de comparaci√≥n la funci√≥n ifelse(), cuyos argumentos de entrada ser√°n la condici√≥n evaluar, lo que sucede cuando se cumple y lo que , que aplicar√° cada elemento del vector de entrada. Por ejemplo, vamos definir un vector de nombres con algunos ausentes (NA), y vamos sustituir los ausentes por el texto \"nombre_desconocido\" (los que sean ausentes se quedan como est√°n).Esta funci√≥n ifelse() es muy util para codificar variables o averiguar cuales cumplen una condici√≥n, sin necesidad de hacer un bucle que recorra todos los valores.","code":"\n# Todas las edades son mayores de 13 a√±os\nedades <- c(14, 24, 56, 31, 20, 87, 73)\nif (all(edades >= 13)) { # Si todas las personas son mayores de edad\n  \n  print(\"todos mayores de edad\")\n  \n}## [1] \"todos mayores de edad\"\n# No todas las edades son mayores de 13 a√±os ==> no hace nada\nedades <- c(11, 24, 56, 31, 20, 87, 73)\nif (all(edades >= 13)) { # Si todas las personas son mayores de edad\n  \n  print(\"todos mayores de edad\")\n  \n}\nedades <- c(14, 24, 56, 31, 20, 87, 73)\n\nif (all(edades >= 18)) { # Si todas las personas son mayores de edad\n  \n  print(\"todos mayores de edad\")\n  \n} else { # si la condici√≥n no se cumple: filtramos solo los mayores\n\n  edades <- edades[edades >= 18]\n  print(\"alg√∫n menor de edad se ha eliminado\")\n  \n}## [1] \"alg√∫n menor de edad se ha eliminado\"\nedades## [1] 24 56 31 20 87 73\nedades <- c(14, 14, 16, 11, 2, 17, 13)\n\nif (all(edades >= 18)) { # Si todas las personas son mayores de edad\n  \n  print(\"todos mayores de edad\")\n  \n} else if (any(edades >= 18)) { # si alguna es mayor de edad\n\n  edades_18 <- edades[edades >= 18]  \n  print(\"alg√∫n menor de edad se ha eliminado\")\n  \n} else { # ninguna persona mayor de edad\n  \n  print(\"todas las personas son menores de edad\")\n  \n}## [1] \"todas las personas son menores de edad\"\nnombres <- c(\"Juan\", \"Mar√≠a\", NA, NA, \"Luc√≠a\", \"Carmen\", \"Javier\",\n             NA, \"Carlos\", NA, \"Gregorio\", \"Paloma\")\n\n# Si tiene ausente --> \"nombre_desconocido\"\n# Si no tiene ausente --> nombres originales\nnombres <- ifelse(is.na(nombres), \"nombre_desconocido\", nombres)\nnombres##  [1] \"Juan\"               \"Mar√≠a\"              \"nombre_desconocido\"\n##  [4] \"nombre_desconocido\" \"Luc√≠a\"              \"Carmen\"            \n##  [7] \"Javier\"             \"nombre_desconocido\" \"Carlos\"            \n## [10] \"nombre_desconocido\" \"Gregorio\"           \"Paloma\""},{"path":"control.html","id":"forwhile","chapter":"Cap√≠tulo 5 Estructuras de control","heading":"5.2 for/while","text":"Aunque el 99% de las veces (porcentaje inventado) los bucles pueden ser sustituidos por c√≥digos de forma vectorial mucho m√°s eficientes, veces nos quedar√° m√°s remedio que usarlos por lo que nunca viene mal conocer su estructura.Un bucle {} es una estructura que nos permite ejecutar un conjunto de √≥rdenes un n√∫mero repetido (finito y conocido) de veces: dado un conjunto de √≠ndices, el bucle ir√° recorriendo cada elemento de dicho conjunto, y para cada uno de ellos ejecutar√° lo que tenga dentro de las llaves.Lo que tenemos dentro de los par√©ntesis, en la l√≠nea del , es m√°s que la secuencia de n√∫meros que hemos aprendido construir.siempre tenemos que realizar una asignaci√≥n o cambiar una variable dentro de un bucle, podemos ejecutar acciones directamente sin asignar o guardar nada.Aunque normalmente el conjunto que recorre el bucle suelen ser √≠ndices num√©ricos, podemos recorrer cualquier tipo de objeto.¬†Otra manera de dise√±ar un bucle es con la estructura {}, que ejecutar√° el bucle un n√∫mero de veces pero que priori es desconocido hasta que la condici√≥n impuesta deje de ser TRUE (en el sabemos de antemano el n√∫mero de iteraciones).¬øY qu√© sucede cuando la condici√≥n nunca llega ser FALSE? Compru√©balo t√∫ mismo/.","code":"\nvariable <- NULL # vector donde guardaremos los pasos del bucle\nfor (i in 1:7) { \n  \n  variable[i] <- i # R es silencioso: salvo que hagamos un print dentro del bucle no nos imprimir√° nada por pantalla\n}\nvariable## [1] 1 2 3 4 5 6 7\n1:7## [1] 1 2 3 4 5 6 7\nfor (i in 1:7) { \n  \n  print(i^3) # imprimimos cada √≠ndice al cubo\n}## [1] 1\n## [1] 8\n## [1] 27\n## [1] 64\n## [1] 125\n## [1] 216\n## [1] 343\ndias_semana <- c(\"lunes\", \"martes\", \"mi√©rcoles\", \"jueves\",\n                 \"viernes\", \"s√°bado\", \"domingo\")\nnombre_mayuscula <- NULL\nfor (dias in dias_semana) { # dias recorre los d√≠as de la semana tomando sus valores\n  \n  print(toupper(dias)) # Imprimimos en may√∫sculas.\n}## [1] \"LUNES\"\n## [1] \"MARTES\"\n## [1] \"MI√âRCOLES\"\n## [1] \"JUEVES\"\n## [1] \"VIERNES\"\n## [1] \"S√ÅBADO\"\n## [1] \"DOMINGO\"\nmax_ciclos <- 10\nciclos <- 1\n\n# Mientras el n√∫mero de ciclos sea inferior 10, imprime\nwhile(ciclos <= max_ciclos) {\n  \n  print(paste(\"Todav√≠a no, vamos por el ciclo \", ciclos)) # Pegamos la frase al n√∫mero de ciclo por el que vayamos con paste\n  ciclos <- ciclos + 1\n  \n}## [1] \"Todav√≠a no, vamos por el ciclo  1\"\n## [1] \"Todav√≠a no, vamos por el ciclo  2\"\n## [1] \"Todav√≠a no, vamos por el ciclo  3\"\n## [1] \"Todav√≠a no, vamos por el ciclo  4\"\n## [1] \"Todav√≠a no, vamos por el ciclo  5\"\n## [1] \"Todav√≠a no, vamos por el ciclo  6\"\n## [1] \"Todav√≠a no, vamos por el ciclo  7\"\n## [1] \"Todav√≠a no, vamos por el ciclo  8\"\n## [1] \"Todav√≠a no, vamos por el ciclo  9\"\n## [1] \"Todav√≠a no, vamos por el ciclo  10\"\nwhile (1 > 0) { # Nunca va a dejar de ser cierto\n  \n  print(\"Presiona ESC para salir del bucle\")\n  \n}"},{"path":"control.html","id":"breaknext","chapter":"Cap√≠tulo 5 Estructuras de control","heading":"5.2.1 BREAK/NEXT","text":"En R tenemos dos comandos reservados para poder abortar un bucle o avanzar forzosamente un bucle: dichas palabras son break y next. La primera nos habilita para parar un bucle aunque haya llegado al final de su conjunto de √≠ndices recorrer (o se siga cumpliendo la condici√≥n del {}).Mientras que la segunda obliga al bucle avanzar la siguiente interacci√≥n, abortando la iteraci√≥n actual en la que se encuentra.","code":"\nfor(i in 1:10) {\n  if (i == 7) {\n    \n    break # si i es 7, el bucle frena aqu√≠ (nunca llegar√° a imprimir el 7 ni los sucesivos)\n    \n  }\n  print(i)\n}## [1] 1\n## [1] 2\n## [1] 3\n## [1] 4\n## [1] 5\n## [1] 6\nfor(i in 1:10) {\n  if (i == 7) {\n    \n    next # si i es 7, la iteraci√≥n frenar√° aqu√≠ y pasar√° a la siguiente por lo que imprimir√° todos menos el 7\n    \n  }\n  print(i)\n}## [1] 1\n## [1] 2\n## [1] 3\n## [1] 4\n## [1] 5\n## [1] 6\n## [1] 8\n## [1] 9\n## [1] 10"},{"path":"control.html","id":"repeat","chapter":"Cap√≠tulo 5 Estructuras de control","heading":"5.2.2 REPEAT","text":"Aunque es una opci√≥n muy poco usada, existe una estructura de control llamada repeat{} que nos ejecuta un bucle de forma infinita hasta que le ordenemos parar con un break.¬†WARNING: cuidado con los bucles infinitosLas estucturas {} y repeat{} son de las menos usadas por su peligrosidad, ya que si incluimos un break o la condici√≥n nunca llega ser TRUE, el bucle seguir√° ejecut√°ndose de forma infinita y solo podr√° ser detenido abortando la ejecuci√≥n con la tecla ESC.¬†","code":"\nconteo <- 0\nrepeat { \n  \n  conteo <- conteo + 1\n  if (conteo >= 100) { break }\n  \n}\nconteo## [1] 100"},{"path":"control.html","id":"consejos-4","chapter":"Cap√≠tulo 5 Estructuras de control","heading":"5.3 Consejos","text":"CONSEJOS¬†Rainbow parenthesesUno de los errores m√°s habituales, y que seguir√°s cometiendo aunque lleves a√±os programando, es cerrar un par√©ntesis que abierto, por lo que el programa sabe si acabado de llamar una orden o . Para ello en las nuevas versiones de RStudio, en el men√∫ Tools < Global Options < Code < Display podemos habilitar la opci√≥n Rainbow Parentheses que nos escribe cada par de () de un color distinto\nImagen/gr√°fica 5.1: Activando Rainbow Parentheses.\n¬†Minimiza estructuras de control en el c√≥digoPuedes colapsar las estructuras de control pulsando en la flecha que aparece la izquierda de ellas en tu script.¬†Evita bucles (si puedes)Recuerda: por lo general, di los bucles en R (intenta evitarlos, en la mayor√≠a de casos hay una alternativa mejor).¬†Evita bucles (parte II)Evita al m√°ximo los bucles en R: suele existir una forma m√°s eficiente de programarlo. Veamos un ejemplo muy sencillo: dado un vector de √≠ndices idx, queremos calcular su cuadrado y guardarlo. Vamos comparar como ser√≠a con un sencillo bucle y de forma vectorial, repiti√©ndolo 1000 veces para sacar tiempos medios, haciendo uso del paquete microbenchmark.Una tarea tan sencilla, programada en un bucle (segunda fila), tarda 40 veces m√°s que hacerlo de forma vectorial (primera fila) (elevando cada elemento al cuadrado, iterando internamente, sin necesidad de implementar un bucle).","code":"\nidx <- 1:10000\nx <- y <- rep(0, length(idx))\nmicrobenchmark::microbenchmark(x <- idx^2, \n                               for (i in idx) {  y[i] <- idx[i]^2},\n                               times = 1e3)## Unit: microseconds\n##                                     expr     min       lq       mean    median\n##                               x <- idx^2   18.00   46.752   53.58028   52.7775\n##  for (i in idx) {     y[i] <- idx[i]^2 } 1801.14 1908.463 2221.62420 1985.1430\n##         uq       max neval cld\n##    61.0455   274.928  1000  a \n##  2216.8425 12879.982  1000   b"},{"path":"control.html","id":"ejercicios-3","chapter":"Cap√≠tulo 5 Estructuras de control","heading":"5.4 üìù Ejercicios","text":"(haz click en las flechas para ver soluciones)üìùEjercicio 1: del paquete lubridate, la funci√≥n hour() nos devuelve la hora de una fecha dada, y la funci√≥n now() nos devuelve fecha y hora del momento actual. Con ambas funciones, y usando imprime por pantalla \"buenas noches\" (solo partir de las 21). Soluci√≥n:¬†üìùEjercicio 2: con las funciones del ejercicio anterior, y usando estructura -else, imprime por pantalla \"buenos d√≠as\" (de 6 14), \"buenas tardes\" (de 14 21) o \"buenas noches\" (de las 21 las 6). Soluci√≥n:¬†üìùEjercicio 3: realiza el ejercicio anterior pero sin estructura de llaves, de forma concisa con ifelse(). Mira la ayuda si la necesitases poniendo ? ifelse. Soluci√≥n:¬†üìùEjercicio 4: dise√±a un bucle de 200 iteraciones que, empezando en un valor inicial de 100 (euros), te sume 3‚Ç¨ si el n√∫mero actual es par y te reste 5‚Ç¨ si es impar.Soluci√≥n:Antes veamos qu√© es un n√∫mero par o impar: un n√∫mero par ser√° todo aquel n√∫mero que al dividir entre 2, la divisi√≥n es exacta, es decir, que su resto es nulo. Por ejemplo, al dividir 5 entre 2, el resto es 1, pero al dividir 12 entre 2 el resto es 0. Para calcula ese resto usaremos la funci√≥n %%.¬†üìùEjercicio 5: dise√±a el anterior bucle pero guardando el dinero de cada iteraci√≥n.Soluci√≥n:¬†üìùEjercicio 6: dise√±a el bucle del ejercicio 4 parando cuando nos quede dinero.Soluci√≥n:","code":"\n# Cargamos librer√≠a\nlibrary(lubridate)\n\n# Fecha actual\nfecha_actual <- now()\n\n# Estructura if\nif (hour(fecha_actual) > 21) {\n  \n  cat(\"Buenas noches\") # print/cat dos formas de imprimir por pantalla\n}\n# Fecha actual\nfecha_actual <- now()\n\n# Estructura if-else\nif (hour(fecha_actual) > 6 & hour(fecha_actual) < 14) {\n  \n  cat(\"Buenos d√≠as\")\n  \n} else if (hour(fecha_actual) > 14 & hour(fecha_actual) < 21) {\n  \n  cat(\"Buenas tardes\")\n  \n} else {\n  \n  cat(\"Buenas noches\")\n}## Buenas tardes\n# Fecha actual\nfecha_actual <- now()\n\n# Estructura if-else\ncat(ifelse(hour(fecha_actual) > 6 & hour(fecha_actual) < 14,\n           \"Buenos d√≠as\",\n           ifelse(hour(fecha_actual) > 14 &\n                    hour(fecha_actual) < 21,\n                  \"Buenas tardes\", \"Buenas noches\")))## Buenas tardes\n5 %% 2## [1] 1\n12 %% 2## [1] 0\n23 %% 2## [1] 1\n46 %% 2## [1] 0\n# dinero inicial\ndinero <- 100\n\n# Bucle for\nfor (i in 1:200) {\n  \n  dinero <- ifelse(dinero %% 2 == 0, dinero + 3, dinero  - 5)\n  \n}\ndinero## [1] -100\n# vector de importes\ndinero <- rep(0, 201)\ndinero[1] <- 100 # dinero inicial\n\n# Bucle for\nfor (i in 2:201) {\n  \n  # si dinero[i - 1] es par o  impar\n  dinero[i] <- ifelse(dinero[i - 1] %% 2 == 0, dinero[i - 1] + 3,\n                      dinero[i - 1]  - 5)\n  \n}\ndinero##   [1]  100  103   98  101   96   99   94   97   92   95   90   93   88   91   86\n##  [16]   89   84   87   82   85   80   83   78   81   76   79   74   77   72   75\n##  [31]   70   73   68   71   66   69   64   67   62   65   60   63   58   61   56\n##  [46]   59   54   57   52   55   50   53   48   51   46   49   44   47   42   45\n##  [61]   40   43   38   41   36   39   34   37   32   35   30   33   28   31   26\n##  [76]   29   24   27   22   25   20   23   18   21   16   19   14   17   12   15\n##  [91]   10   13    8   11    6    9    4    7    2    5    0    3   -2    1   -4\n## [106]   -1   -6   -3   -8   -5  -10   -7  -12   -9  -14  -11  -16  -13  -18  -15\n## [121]  -20  -17  -22  -19  -24  -21  -26  -23  -28  -25  -30  -27  -32  -29  -34\n## [136]  -31  -36  -33  -38  -35  -40  -37  -42  -39  -44  -41  -46  -43  -48  -45\n## [151]  -50  -47  -52  -49  -54  -51  -56  -53  -58  -55  -60  -57  -62  -59  -64\n## [166]  -61  -66  -63  -68  -65  -70  -67  -72  -69  -74  -71  -76  -73  -78  -75\n## [181]  -80  -77  -82  -79  -84  -81  -86  -83  -88  -85  -90  -87  -92  -89  -94\n## [196]  -91  -96  -93  -98  -95 -100\ndinero <- 100 # dinero inicial\n\n# Bucle while\nwhile (dinero > 0) {\n  \n  dinero <- ifelse(dinero %% 2 == 0, dinero + 3, dinero - 5)\n  \n}\ndinero## [1] 0"},{"path":"datos.html","id":"datos","chapter":"Cap√≠tulo 6 Tipos de datos II: datos estructurados","heading":"Cap√≠tulo 6 Tipos de datos II: datos estructurados","text":"Ya sabemos un poco la gram√°tica y ortograf√≠a de nuestro lenguaje, y algunas de las funcionalidades b√°sicas de nuestro ¬´Word¬ª. Vamos aprender c√≥mo escribir la mejor trama para la novela: hablemos de estructuras de datos.","code":""},{"path":"datos.html","id":"matrices","chapter":"Cap√≠tulo 6 Tipos de datos II: datos estructurados","heading":"6.1 Matrices","text":"Hasta ahora hemos visto solo datos en una dimensi√≥n: una variable, que tiene \\(n\\) valores num√©ricos, \\(n\\) valores l√≥gicos o \\(n\\) valores de tipo texto. Una sola variable (de \\(n\\) elementos).Pero cuando analizamos datos solemos tener varias variables distintas, por ejemplo, la estatura y el peso de una persona. Cuando tenemos distintas variables num√©ricas de IGUAL longitud, un formato de dato muy habitual es lo que conocemos como matrices: una ¬´tabla¬ª de n√∫meros, con filas y columnas.Vamos empezar con una matriz sencilla: guardamos las estaturas y pesos de 5 personas.Hasta ahora, cada variable la hemos definido por separado, pero ahora vamos juntarlas: vamos crear nuestro primer conjunto de datos juntado todas ellas en una matriz, un conjunto de n√∫meros organizado en 2 columnas (una por variable) y 5 filas o registros (una por persona). Para ello usaremos la funci√≥n cbind(), que nos concatena vectores de igual longitud en formato columna.Para practicar vamos definir otro ejemplo con las edades, tel√©fonos y c√≥digos postales de una serie de individuos.Lo que tenemos es una columna por variable y una fila por registro. Tambi√©n podemos construir la matriz por filas con el comando rbind(), que nos permite a√±adir filas una matriz o construirla desde cero (aunque lo habitual es tener cada variable en una columna).Como ves, ahora nuestros datos est√°n tabulados, tienen dos dimensiones. ¬øC√≥mo saber las dimensiones que tiene una matriz? Prueba ejecutar la funci√≥n dim().F√≠jate que dim() devuelve un vector de 2 elementos, por lo que para acceder al n√∫mero de filas deberemos ejecutar dim(x)[1] (y dim(x)[2] para el n√∫mero de columnas).Tambi√©n tenemos nuestra disposici√≥n las funciones nrow() y ncol(), que nos devuelven directamente el n√∫mero de filas y columnas.Bien, ya sabemos definir una matriz partir de variables sueltas. Igual que veces es √∫til generar un vector de elementos repetidos, tambi√©n podemos definir una matriz de n√∫meros repetidos (por ejemplo, de ceros), con la funci√≥n matrix(), indic√°ndole el n√∫mero de filas y columnas.Tambi√©n podemos definir una matriz partir de un vector num√©rico, reorganizando los valores en forma de matriz (con una dimensi√≥n tal que filas * columnas = longitud del vector), sabiendo que los elementos se van colocando por columnas (primeros valores en la primera columna, de arriba abajo).¬†Dada una matriz tambi√©n podemos darle vuelta (lo que se conoce como matriz transpuesta, donde filas pasan ser columnas y viceversa) con la funci√≥n t().Con las matrices sucede como con los vectores: cuando aplicamos una operaci√≥n aritm√©tica, se la estamos aplicando elemento elemento, por ejemplo, dividir entre 5.","code":"\nc(1, 4, NA, -2, 0)## [1]  1  4 NA -2  0\nc(\"a\", NA, \"b\", \"c\")## [1] \"a\" NA  \"b\" \"c\"\nc(TRUE, TRUE, FALSE, TRUE)## [1]  TRUE  TRUE FALSE  TRUE\nestaturas <- c(150, 160, 170, 180, 190)\npesos <- c(60, 70, 80, 90, 100)\ndatos_matriz <- cbind(estaturas, pesos) # Construimos la matriz por columnas\ndatos_matriz##      estaturas pesos\n## [1,]       150    60\n## [2,]       160    70\n## [3,]       170    80\n## [4,]       180    90\n## [5,]       190   100\nedades <- c(14, 24, 56, 31, 20, 87, 73) # vector num√©rico de longitud 7\ntlf <- c(NA, 683839390, 621539732, 618211286, NA, 914727164, NA)\ncp <- c(33007, 28019, 37005, 18003, 33091, 25073, 17140)\n\n# Construimos la matriz por columnas\ndatos_matriz <- cbind(edades, tlf, cp) \ndatos_matriz##      edades       tlf    cp\n## [1,]     14        NA 33007\n## [2,]     24 683839390 28019\n## [3,]     56 621539732 37005\n## [4,]     31 618211286 18003\n## [5,]     20        NA 33091\n## [6,]     87 914727164 25073\n## [7,]     73        NA 17140\ndatos_matriz_filas <- rbind(edades, tlf, cp) # Construimos la matriz por filas\ndatos_matriz_filas##         [,1]      [,2]      [,3]      [,4]  [,5]      [,6]  [,7]\n## edades    14        24        56        31    20        87    73\n## tlf       NA 683839390 621539732 618211286    NA 914727164    NA\n## cp     33007     28019     37005     18003 33091     25073 17140\n# A√±adimos una fila\nrbind(datos_matriz_filas, c(27, 620125780, 28051))##         [,1]      [,2]      [,3]      [,4]      [,5]      [,6]  [,7]\n## edades    14        24        56        31        20        87    73\n## tlf       NA 683839390 621539732 618211286        NA 914727164    NA\n## cp     33007     28019     37005     18003     33091     25073 17140\n##           27 620125780     28051        27 620125780     28051    27\ndim(datos_matriz)## [1] 7 3\ndim(datos_matriz_filas)## [1] 3 7\ndim(datos_matriz)[1]## [1] 7\ndim(datos_matriz)[2]## [1] 3\nnrow(datos_matriz)## [1] 7\nncol(datos_matriz)## [1] 3\nmatrix(0, nrow = 5, ncol = 3) # 5 filas, 3 columnas, todo 0's##      [,1] [,2] [,3]\n## [1,]    0    0    0\n## [2,]    0    0    0\n## [3,]    0    0    0\n## [4,]    0    0    0\n## [5,]    0    0    0\nz <- matrix(1:15, ncol = 5) # Matriz con el vector 1:5 con 5 columnas (ergo 3 filas)\nz##      [,1] [,2] [,3] [,4] [,5]\n## [1,]    1    4    7   10   13\n## [2,]    2    5    8   11   14\n## [3,]    3    6    9   12   15\nclass(z) # Clase de la variable## [1] \"matrix\"\ndatos_matriz##      edades       tlf    cp\n## [1,]     14        NA 33007\n## [2,]     24 683839390 28019\n## [3,]     56 621539732 37005\n## [4,]     31 618211286 18003\n## [5,]     20        NA 33091\n## [6,]     87 914727164 25073\n## [7,]     73        NA 17140\nt(datos_matriz) # Matriz transpuesta##         [,1]      [,2]      [,3]      [,4]  [,5]      [,6]  [,7]\n## edades    14        24        56        31    20        87    73\n## tlf       NA 683839390 621539732 618211286    NA 914727164    NA\n## cp     33007     28019     37005     18003 33091     25073 17140\ndatos_matriz / 5##      edades       tlf     cp\n## [1,]    2.8        NA 6601.4\n## [2,]    4.8 136767878 5603.8\n## [3,]   11.2 124307946 7401.0\n## [4,]    6.2 123642257 3600.6\n## [5,]    4.0        NA 6618.2\n## [6,]   17.4 182945433 5014.6\n## [7,]   14.6        NA 3428.0"},{"path":"datos.html","id":"apply-vs-bucles","chapter":"Cap√≠tulo 6 Tipos de datos II: datos estructurados","heading":"6.2 Apply vs bucles","text":"Si eres un programador avezado te estar√°s preguntando: ¬øse usan apenas los bucles en R? Existir existen, pero la raz√≥n por la que usaremos apenas bucles, e intentaremos evitarlos lo m√°ximo posible, es porque en R son muy ineficientes en tiempo de ejecuci√≥n. Vamos poner un ejemplo. Supongamos que queremos calcular la suma de cada fila (es decir, 7 valores). Con bucles ser√≠a as√≠.En el c√≥digo anterior puedes ver como para acceder la fila -√©sima de la matriz se usa el operador [, ] (dejando libre el √≠ndice de la columna), mientras que para acceder la columna j-√©sima de la matriz se usar√≠a el operador [, j]. Para acceder al elemento (, j) se usa el operador [, j].La pregunta es: ¬øhay una forma m√°s eficiente de hacerlo? La respuesta: s√≠. La funci√≥n apply() nos permite ejecutar una funci√≥n por filas o por columnas.Como puedes observar, necesitas tres argmentos y otros opcionales: la matriz, el √≠ndice por el que operar (MARGIN = 1 por filas, MARGIN = 2 por columnas) y la funci√≥n aplicar, am√©n de otros argumentos extras que pudiera necesitar la funci√≥n.Veamos qu√© es m√°s eficiente con el paquete microbenchmark, que nos permite comparar el tiempo de dos conjuntos de √≥rdenes.¬°El bucle nos tarda 40-80 veces m√°s que el apply!¬†","code":"\n# Creamos la matriz\nestaturas <- c(150, 160, 170, 180, 190)\npesos <- c(60, 70, 80, 90, 100)\nx <- cbind(estaturas, pesos)\n\n# Bucle\nsuma <- rep(0, dim(x)[1]) \nfor (i in 1:dim(x)[1]) { # Bucle recorriendo filas\n\n  suma[i] <- sum(x[i, ], na.rm = TRUE) # Suma de la fila i\n    \n}\nsuma## [1] 210 230 250 270 290\n# Suma por filas (MARGIN = 1)\nsuma_por_filas <- apply(x, MARGIN = 1, FUN = \"sum\")\nsuma_por_filas ## [1] 210 230 250 270 290\n# Una funci√≥n cualquiera por filas\noperacion_por_filas <- apply(x, MARGIN = 1, FUN = function(x) { sum(sqrt(2) - 2) })\noperacion_por_filas## [1] -0.5857864 -0.5857864 -0.5857864 -0.5857864 -0.5857864\n# Suma por columnas (MARGIN = 2)\nsuma_por_cols <- apply(x, MARGIN = 2, FUN = \"sum\")\nsuma_por_cols## estaturas     pesos \n##       850       400\nlibrary(microbenchmark)\n\n# Comparamos tiempos de ejecuci√≥n de ambas formas, y lo\n# repetimos 100 veces para sacar tiempos medios\nmicrobenchmark(\n  # √≥rdenes 1\n  for (i in 1:dim(x)[1]) {\n    \n    suma_por_filas[i] <- sum(x[i, ]) \n    \n  },\n  # √≥rdenes 2\n  apply(x, MARGIN = 1, FUN = \"sum\"), times = 500) ## Unit: microseconds\n##                                                             expr      min\n##  for (i in 1:dim(x)[1]) {     suma_por_filas[i] <- sum(x[i, ]) } 1653.313\n##                                apply(x, MARGIN = 1, FUN = \"sum\")   17.459\n##        lq       mean    median       uq      max neval cld\n##  1715.028 1917.76663 1798.4445 1970.686 5961.567   500   b\n##    22.672   37.70646   32.5285   37.650 2958.184   500  a"},{"path":"datos.html","id":"tablas-data.frames","chapter":"Cap√≠tulo 6 Tipos de datos II: datos estructurados","heading":"6.3 Tablas: data.frames","text":"Adem√°s del nombre de las columnas (heredado de los nombres de las variables con las que hemos construido las columnas), podemos poner nombre los registros, por ejemplo, el nombre de las personas las que pertenece cada dato, definiendo una nueva variable con los nombres y concaten√°ndola.¬øvisto lo que ha sucedido?Como una matriz SOLO puede tener un tipo de dato, al a√±adir una variable de tipo texto, ha convertido los n√∫meros tambi√©n texto poni√©ndole comillas: hemos roto la integridad de nuestro dato. Una forma de a√±adir nombre los registros, sin incluirlo como variable, es usando la funci√≥n row.names().¬†¬øQu√© sucede si realmente queremos a√±adir variables cuyos tipos sean distintos (¬°ojo, pero con la misma longitud!)?Vamos crear nuevas variables de texto nombres y apellidos, un valor l√≥gico casado, valores num√©ricos edades, cp y tlf, y una fecha fecha_creacion (fecha de entrada en el sistema) para cada persona.Seguimos teniendo 7 registros, uno por persona pero ahora tenemos un popurr√≠ de variables, de la misma longitud pero de tipos distintos:(edades, tlf, cp) son variables num√©ricas.(nombres, apellidos) son variables de texto.casado es una variable l√≥gica.fecha_creacion de tipo fecha.¬øQu√© suceder√≠a si yo intento mezclar todo en una matriz?Efectivamente: como en una matriz solo puede haber datos de un tipo, los n√∫meros los convierte texto, las variables l√≥gicas las convierte texto (TRUE es un valor l√≥gico, \"TRUE\" es un texto, como \"Pepito\", sin significado l√≥gico de verdadero/falso) y las fechas las ha convertido texto (aunque las veas igual, ya son de tipo de fecha, son texto y podemos operar con ellas).¬†aqu√≠ LA PREGUNTA¬øC√≥mo juntar variables de distinto tipo, sin cambiar su naturaleza, como cuando juntamos datos en una tabla de excel?El formato de tabla de datos en R que vamos empezar usar se llama data.frame: una colecci√≥n de variables de igual longitud pero cada una de un tipo distinto. Para crear un objeto de este tipo basta con usar la funci√≥n data.frame(), pas√°ndole como argumentos (separados por comas) las variables que queremos reunir, indicando en texto el nombre de las columnas.¬°TENEMOS NUESTRO PRIMER CONJUNTO DE DATOS!Puedes visualizarlo escribiendo su nombre en consola o con la funci√≥n View()","code":"\nnombres <- c(\"Sonia\", \"Carla\", \"Pepito\", \"Carlos\", \"Lara\", \"Sandra\", \"Javi\")\ncbind(nombres, datos_matriz)##      nombres  edades tlf         cp     \n## [1,] \"Sonia\"  \"14\"   NA          \"33007\"\n## [2,] \"Carla\"  \"24\"   \"683839390\" \"28019\"\n## [3,] \"Pepito\" \"56\"   \"621539732\" \"37005\"\n## [4,] \"Carlos\" \"31\"   \"618211286\" \"18003\"\n## [5,] \"Lara\"   \"20\"   NA          \"33091\"\n## [6,] \"Sandra\" \"87\"   \"914727164\" \"25073\"\n## [7,] \"Javi\"   \"73\"   NA          \"17140\"\nrow.names(datos_matriz) <- c(\"Sonia\", \"Carla\", \"Pepito\", \"Carlos\", \"Lara\", \"Sandra\", \"Javi\")\ndatos_matriz##        edades       tlf    cp\n## Sonia      14        NA 33007\n## Carla      24 683839390 28019\n## Pepito     56 621539732 37005\n## Carlos     31 618211286 18003\n## Lara       20        NA 33091\n## Sandra     87 914727164 25073\n## Javi       73        NA 17140\n# Nombres\nnombres <- c(\"Sonia\", \"Carla\", \"Pepito\", \"Carlos\", \"Lara\", \"Sandra\", \"Javi\")\n\n# Apellidos\napellidos <- c(NA, \"Gonz√°lez\", \"Fern√°ndez\", \"Mart√≠nez\", \"Li√©bana\", \"Garc√≠a\", \"Ortiz\")\n\n# C√≥digo postal\ncp <- c(28019, 28001, 34005, 18410, 33007, 34500, 28017)\n\n# Edades\nedades <- c(45, 67, NA, 31, 27, 19, 50)\n\n# Estado civil (no lo sabemos de una persona)\ncasado <- c(TRUE, FALSE, FALSE, NA, TRUE, FALSE, FALSE)\n\n# Tel√©fono\ntlf <- c(618910564, 914718475, 934567891, 620176565, NA, NA, 688921344)\n\n# Fecha de creaci√≥n (fecha en el que esa persona entra en el sistema)\n# lo convertimos a tipo fecha\nfecha_creacion <-\n  as.Date(c(\"2021-03-04\", \"2020-10-12\", \"1990-04-05\",\n            \"2019-09-10\", \"2017-03-21\", \"2020-07-07\",\n            \"2000-01-28\"))\n# Juntamos todo en una matriz (juntamos por columnas)\nx <- cbind(nombres, apellidos, edades, tlf, cp, casado, fecha_creacion)\nx##      nombres  apellidos   edades tlf         cp      casado  fecha_creacion\n## [1,] \"Sonia\"  NA          \"45\"   \"618910564\" \"28019\" \"TRUE\"  \"18690\"       \n## [2,] \"Carla\"  \"Gonz√°lez\"  \"67\"   \"914718475\" \"28001\" \"FALSE\" \"18547\"       \n## [3,] \"Pepito\" \"Fern√°ndez\" NA     \"934567891\" \"34005\" \"FALSE\" \"7399\"        \n## [4,] \"Carlos\" \"Mart√≠nez\"  \"31\"   \"620176565\" \"18410\" NA      \"18149\"       \n## [5,] \"Lara\"   \"Li√©bana\"   \"27\"   NA          \"33007\" \"TRUE\"  \"17246\"       \n## [6,] \"Sandra\" \"Garc√≠a\"    \"19\"   NA          \"34500\" \"FALSE\" \"18450\"       \n## [7,] \"Javi\"   \"Ortiz\"     \"50\"   \"688921344\" \"28017\" \"FALSE\" \"10984\"\n# D√≠as entre la primera y el segundo elemento de fecha de creaci√≥n\nfecha_creacion[1] - fecha_creacion[2]## Time difference of 143 days\n# D√≠as entre primera y segunda fecha de creaci√≥n pero tom√°ndolo de nuestra matriz (columna 7, fila 1 y 2)\nx[1, 7] - x[2, 7]## Error in x[1, 7] - x[2, 7]: argumento no-num√©rico para operador binario\n# Creamos nuestro primer data.frame\ntabla <- data.frame(\"Nombre\" = nombres, \"Apellido\" = apellidos,\n                    \"Edad\" = edades, \"Tel√©fono\" = tlf,\n                    \"C√≥digo Postal\" = cp, \"Casado\" = casado,\n                    \"Fecha_de_creaci√≥n\" = fecha_creacion)\ntabla##   Nombre  Apellido Edad  Tel√©fono C√≥digo.Postal Casado Fecha_de_creaci√≥n\n## 1  Sonia      <NA>   45 618910564         28019   TRUE        2021-03-04\n## 2  Carla  Gonz√°lez   67 914718475         28001  FALSE        2020-10-12\n## 3 Pepito Fern√°ndez   NA 934567891         34005  FALSE        1990-04-05\n## 4 Carlos  Mart√≠nez   31 620176565         18410     NA        2019-09-10\n## 5   Lara   Li√©bana   27        NA         33007   TRUE        2017-03-21\n## 6 Sandra    Garc√≠a   19        NA         34500  FALSE        2020-07-07\n## 7   Javi     Ortiz   50 688921344         28017  FALSE        2000-01-28\nView(tabla)"},{"path":"datos.html","id":"selecci√≥n-de-columnas-y-filas","chapter":"Cap√≠tulo 6 Tipos de datos II: datos estructurados","heading":"6.3.1 Selecci√≥n de columnas y filas","text":"Si tenemos un data.frame ya creado y queremos a√±adir una columna es tan simple como usar la funci√≥n data.frame() que ya hemos visto para concatenar la columna.Si queremos acceder una columna, fila o elemento en concreto, los data.frame tienen las mismas ventajas que una matriz, as√≠ basta con usar los mismos operadores.Un data.frame solo tiene las ventajas de una matriz si que tambi√©n tiene las ventajas de una tabla de datos. Por ejemplo, podemos aceder las variables por el √≠ndice de columna que ocupan pero tambi√©n acceder las columnas por su nombre, poniendo el nombre de la tabla, el s√≠mbolo $ y con el tabulador nos aparecer√° un men√∫ de columnas elegir.\nImagen/gr√°fica 6.1: Men√∫ desplegable de variables (columnas) de un data.frame.\nAdem√°s del conjunto de datos tabla que ya tenemos, vamos instalar (sino lo hemos hecho nunca en este ordenador) un paquete muy √∫til en R llamado {datasets}. Los paquetes que vayamos necesitando los instalaremos y llamaremos al inicio del c√≥digo principal.Am√©n de nuestro conjunto de datos tabla en nuestro panel de entorno, si escribimos datasets:: y pulsamos tabulador, se nos abre un desplegable con distintos conjuntos de datos para ser usados: el paquete datasets nos proporciona data.frames de prueba para que podamos usarlos en nuestros c√≥digos seg√∫n vamos aprendiendo.Una de las ventajas de los data.frame es que podemos visualizarlos como si fuera una tabla de Excel dentro de nuestro R con la funci√≥n View(). Vamos visualizar solo el conjunto de datos tabla sino tambi√©n el conjunto iris del paquete datasets: los data.frame nos permiten trabajar con ellos como bases de datos o como matrices, con las ventajas de ambos.\nImagen/gr√°fica 6.2: Men√∫ desplegable con los data.frame de prueba en datasets\n¬†En el caso de los data.frame tenemos adem√°s nuestro disposici√≥n una herramienta muy potente: la funci√≥n subset() Dicha funci√≥n nos va permitir seleccionar filas y columnas la vez, tomando de entrada los siguientes argumentosx: una tabla de entrada, un data.frame de entrada.subset: la condici√≥n l√≥gica que queramos usar para seleccionar registros (filas).select: un vector que contenga el nombre de las columnas que queremos seleccionar (lo mejor solo queremos filtrar por filas pero quiz√°s tambi√©n por columnas).Por ejemplo, vamos seleccionar solo los nombres y apellidos de aquellas personas mayores de edad de nuestro conjunto de datos tabla, y del conjunto iris vamos extraer todos los registros en los que el largo del s√©palo es mayor que 7.1, seleccionando solo las columnas de longitud de s√©palo y la especie de la planta.","code":"\n# A√±adimos una nueva columna con n¬∫ de hermanos/as\nhermanos <- c(0, 0, 1, 5, 2, 3, 0)\ntabla <- data.frame(tabla, hermanos)\ntabla##   Nombre  Apellido Edad  Tel√©fono C√≥digo.Postal Casado Fecha_de_creaci√≥n\n## 1  Sonia      <NA>   45 618910564         28019   TRUE        2021-03-04\n## 2  Carla  Gonz√°lez   67 914718475         28001  FALSE        2020-10-12\n## 3 Pepito Fern√°ndez   NA 934567891         34005  FALSE        1990-04-05\n## 4 Carlos  Mart√≠nez   31 620176565         18410     NA        2019-09-10\n## 5   Lara   Li√©bana   27        NA         33007   TRUE        2017-03-21\n## 6 Sandra    Garc√≠a   19        NA         34500  FALSE        2020-07-07\n## 7   Javi     Ortiz   50 688921344         28017  FALSE        2000-01-28\n##   hermanos\n## 1        0\n## 2        0\n## 3        1\n## 4        5\n## 5        2\n## 6        3\n## 7        0\n# Accedemos a la tercera columna\ntabla[, 3]## [1] 45 67 NA 31 27 19 50\n# Accedemos a la quinta fila\ntabla[5, ]##   Nombre Apellido Edad Tel√©fono C√≥digo.Postal Casado Fecha_de_creaci√≥n hermanos\n## 5   Lara  Li√©bana   27       NA         33007   TRUE        2017-03-21        2\n# Accedemos a la tercera variable del quinto registro\ntabla[5, 3]## [1] 27\n# Paquetes necesarios\n# install.packages(\"datasets\") # Descomentar si nunca se ha instalado\nlibrary(datasets)\nView(iris)\nView(tabla)\nsubset(tabla, subset = Edad > 18, select = c(\"Nombre\", \"Apellido\"))##   Nombre Apellido\n## 1  Sonia     <NA>\n## 2  Carla Gonz√°lez\n## 4 Carlos Mart√≠nez\n## 5   Lara  Li√©bana\n## 6 Sandra   Garc√≠a\n## 7   Javi    Ortiz\nsubset(iris, subset = Sepal.Length > 7.1, select = c(\"Sepal.Length\", \"Species\"))##     Sepal.Length   Species\n## 106          7.6 virginica\n## 108          7.3 virginica\n## 110          7.2 virginica\n## 118          7.7 virginica\n## 119          7.7 virginica\n## 123          7.7 virginica\n## 126          7.2 virginica\n## 130          7.2 virginica\n## 131          7.4 virginica\n## 132          7.9 virginica\n## 136          7.7 virginica"},{"path":"datos.html","id":"consejos-5","chapter":"Cap√≠tulo 6 Tipos de datos II: datos estructurados","heading":"6.4 Consejos","text":"CONSEJOS¬†Acceder las funciones de los paquetesA veces puede que queramos cargar todo un paquete sino solo una funci√≥n del mismo, para lo que es suficiente nombre_paquete::nombre_funcion. Recuerda que instalar un paquete es c√≥mo comprar un libro, cargar el paquete con library() es c√≥mo traer el libro comprado de la estanter√≠a tu mesa, y usar solo una funci√≥n con nombre_paquete::nombre_funcion es c√≥mo pedirle alguien que te arranque solo una p√°gina y te la traiga la mesa.¬†CONSEJO: nombre de variablesLa funci√≥n names() solo sirve para consultar los nombres de las variables de un data.frame sino tambi√©n para cambiarlos nuestro gusto.","code":"\n# Consultamos nombres\nnames(tabla)## [1] \"Nombre\"            \"Apellido\"          \"Edad\"             \n## [4] \"Tel√©fono\"          \"C√≥digo.Postal\"     \"Casado\"           \n## [7] \"Fecha_de_creaci√≥n\" \"hermanos\"\n# Cambiamos nombres\nnames(tabla) <- c(\"nombre_persona\", \"apellido_persona\", \"edad\", \"tlf\",\n                  \"cp\", \"casado\", \"f_creacion\")\ntabla##   nombre_persona apellido_persona edad       tlf    cp casado f_creacion NA\n## 1          Sonia             <NA>   45 618910564 28019   TRUE 2021-03-04  0\n## 2          Carla         Gonz√°lez   67 914718475 28001  FALSE 2020-10-12  0\n## 3         Pepito        Fern√°ndez   NA 934567891 34005  FALSE 1990-04-05  1\n## 4         Carlos         Mart√≠nez   31 620176565 18410     NA 2019-09-10  5\n## 5           Lara          Li√©bana   27        NA 33007   TRUE 2017-03-21  2\n## 6         Sandra           Garc√≠a   19        NA 34500  FALSE 2020-07-07  3\n## 7           Javi            Ortiz   50 688921344 28017  FALSE 2000-01-28  0"},{"path":"datos.html","id":"ejercicios-4","chapter":"Cap√≠tulo 6 Tipos de datos II: datos estructurados","heading":"6.5 üìù Ejercicios","text":"(haz click en las flechas para ver soluciones)Ejercicio 1: define una matriz x de ceros de 3 filas y 7 columnas. Tras ello suma un 1 cada n√∫mero de la matriz y divide el resultado entre 5Soluci√≥n:¬†Ejercicio 2: tras definir la matriz x calcula su transpuesta y obt√©n sus dimensionesSoluci√≥n:¬†Ejercicio 3: calcula la suma de cada fila de la matriz matrix(1:12, nrow = 4) usando un bucle. Haz lo mismo evitando usar bucles.Soluci√≥n:¬†Ejercicio 4: con la matriz matrix(1:12, nrow = 4) anterior, calcula la media de todos los elementos, la media de cada fila y la media de cada columna.Soluci√≥n:¬†Ejercicio 5: del data.frame iris (al que puedes acceder desde el paquete {datasets}), obt√©n el nombre de las variables.Soluci√≥n:¬†Ejercicio 6: del conjunto iris selecciona aquellas filas cuya variable Petal.Width sea distinta de 0.2.Soluci√≥n:¬†Ejercicio 7: del conjunto iris qu√©date solo con las variables Sepal.Length, Sepal.Width y Species.Soluci√≥n:¬†Ejercicio 8: del conjunto iris selecciona la vez aquellas filas cuya variable Petal.Width sea distinta de 0.2, y qu√©date solo con las variables Sepal.Length, Sepal.Width y Species.Soluci√≥n:¬†Ejercicio 9: calcula el n√∫mero de filas borradas del ejercicio anterior. Tras hacer todo ello, traduce castellano el nombre de las columnas del data.frame filtrado.Soluci√≥n:¬†Ejercicio 10: del conjunto iris accede las columnas con nombres \"Sepal.Length\" y \"Sepal.Width\".Soluci√≥n:","code":"\n# Matriz\nx <- matrix(0, nrow = 3, ncol = 7)\nx##      [,1] [,2] [,3] [,4] [,5] [,6] [,7]\n## [1,]    0    0    0    0    0    0    0\n## [2,]    0    0    0    0    0    0    0\n## [3,]    0    0    0    0    0    0    0\n(x + 1) / 5##      [,1] [,2] [,3] [,4] [,5] [,6] [,7]\n## [1,]  0.2  0.2  0.2  0.2  0.2  0.2  0.2\n## [2,]  0.2  0.2  0.2  0.2  0.2  0.2  0.2\n## [3,]  0.2  0.2  0.2  0.2  0.2  0.2  0.2\n# Transpuesta\nt(x)##      [,1] [,2] [,3]\n## [1,]    0    0    0\n## [2,]    0    0    0\n## [3,]    0    0    0\n## [4,]    0    0    0\n## [5,]    0    0    0\n## [6,]    0    0    0\n## [7,]    0    0    0\n# Dimensiones transpuesta: pasa de ser 3x7 a 7x3\ndim(t(x))## [1] 7 3\nncol(t(x)) # n√∫mero de columnas de la transpuesta## [1] 3\nnrow(t(x)) # n√∫mero de filas de la transpuesta## [1] 7\n# Matriz\nmatriz <- matrix(1:12, nrow = 4)\n\n# Con bucle (recorremos sus filas)\nsuma <- rep(0, nrow(matriz)) # Definimos un vector de 0's con tantos elementos como filas, donde iremos metiendo los valores de la suma\nfor (i in 1:nrow(matriz)) {\n  \n  suma[i] <- sum(matriz[i, ]) # Sumamos la fila i\n}\nsuma## [1] 15 18 21 24\n# Sin bucle (MARGIN = 1 ya que es una operaci√≥n por filas)\nsuma <- apply(matriz, MARGIN = 1, FUN = \"sum\")\nsuma## [1] 15 18 21 24\n# Matriz\nmatriz <- matrix(1:12, nrow = 4)\n\n#  media de todos\nmean(matriz)## [1] 6.5\n# Media por filas (MARGIN = 1 ya que es una operaci√≥n por filas)\napply(matriz, MARGIN = 1, FUN = \"mean\")## [1] 5 6 7 8\n# Media por filas (MARGIN = 2 ya que es una operaci√≥n por filas)\napply(matriz, MARGIN = 2, FUN = \"mean\")## [1]  2.5  6.5 10.5\n# Nombres de variables\nnames(iris)## [1] \"Sepal.Length\" \"Sepal.Width\"  \"Petal.Length\" \"Petal.Width\"  \"Species\"\n# Filtramos filas\nfiltro_fila <- subset(iris, subset = Petal.Width != 0.2)\nfiltro_fila##     Sepal.Length Sepal.Width Petal.Length Petal.Width    Species\n## 6            5.4         3.9          1.7         0.4     setosa\n## 7            4.6         3.4          1.4         0.3     setosa\n## 10           4.9         3.1          1.5         0.1     setosa\n## 13           4.8         3.0          1.4         0.1     setosa\n## 14           4.3         3.0          1.1         0.1     setosa\n## 16           5.7         4.4          1.5         0.4     setosa\n## 17           5.4         3.9          1.3         0.4     setosa\n## 18           5.1         3.5          1.4         0.3     setosa\n## 19           5.7         3.8          1.7         0.3     setosa\n## 20           5.1         3.8          1.5         0.3     setosa\n## 22           5.1         3.7          1.5         0.4     setosa\n## 24           5.1         3.3          1.7         0.5     setosa\n## 27           5.0         3.4          1.6         0.4     setosa\n## 32           5.4         3.4          1.5         0.4     setosa\n## 33           5.2         4.1          1.5         0.1     setosa\n## 38           4.9         3.6          1.4         0.1     setosa\n## 41           5.0         3.5          1.3         0.3     setosa\n## 42           4.5         2.3          1.3         0.3     setosa\n## 44           5.0         3.5          1.6         0.6     setosa\n## 45           5.1         3.8          1.9         0.4     setosa\n## 46           4.8         3.0          1.4         0.3     setosa\n## 51           7.0         3.2          4.7         1.4 versicolor\n## 52           6.4         3.2          4.5         1.5 versicolor\n## 53           6.9         3.1          4.9         1.5 versicolor\n## 54           5.5         2.3          4.0         1.3 versicolor\n## 55           6.5         2.8          4.6         1.5 versicolor\n## 56           5.7         2.8          4.5         1.3 versicolor\n## 57           6.3         3.3          4.7         1.6 versicolor\n## 58           4.9         2.4          3.3         1.0 versicolor\n## 59           6.6         2.9          4.6         1.3 versicolor\n## 60           5.2         2.7          3.9         1.4 versicolor\n## 61           5.0         2.0          3.5         1.0 versicolor\n## 62           5.9         3.0          4.2         1.5 versicolor\n## 63           6.0         2.2          4.0         1.0 versicolor\n## 64           6.1         2.9          4.7         1.4 versicolor\n## 65           5.6         2.9          3.6         1.3 versicolor\n## 66           6.7         3.1          4.4         1.4 versicolor\n## 67           5.6         3.0          4.5         1.5 versicolor\n## 68           5.8         2.7          4.1         1.0 versicolor\n## 69           6.2         2.2          4.5         1.5 versicolor\n## 70           5.6         2.5          3.9         1.1 versicolor\n## 71           5.9         3.2          4.8         1.8 versicolor\n## 72           6.1         2.8          4.0         1.3 versicolor\n## 73           6.3         2.5          4.9         1.5 versicolor\n## 74           6.1         2.8          4.7         1.2 versicolor\n## 75           6.4         2.9          4.3         1.3 versicolor\n## 76           6.6         3.0          4.4         1.4 versicolor\n## 77           6.8         2.8          4.8         1.4 versicolor\n## 78           6.7         3.0          5.0         1.7 versicolor\n## 79           6.0         2.9          4.5         1.5 versicolor\n## 80           5.7         2.6          3.5         1.0 versicolor\n## 81           5.5         2.4          3.8         1.1 versicolor\n## 82           5.5         2.4          3.7         1.0 versicolor\n## 83           5.8         2.7          3.9         1.2 versicolor\n## 84           6.0         2.7          5.1         1.6 versicolor\n## 85           5.4         3.0          4.5         1.5 versicolor\n## 86           6.0         3.4          4.5         1.6 versicolor\n## 87           6.7         3.1          4.7         1.5 versicolor\n## 88           6.3         2.3          4.4         1.3 versicolor\n## 89           5.6         3.0          4.1         1.3 versicolor\n## 90           5.5         2.5          4.0         1.3 versicolor\n## 91           5.5         2.6          4.4         1.2 versicolor\n## 92           6.1         3.0          4.6         1.4 versicolor\n## 93           5.8         2.6          4.0         1.2 versicolor\n## 94           5.0         2.3          3.3         1.0 versicolor\n## 95           5.6         2.7          4.2         1.3 versicolor\n## 96           5.7         3.0          4.2         1.2 versicolor\n## 97           5.7         2.9          4.2         1.3 versicolor\n## 98           6.2         2.9          4.3         1.3 versicolor\n## 99           5.1         2.5          3.0         1.1 versicolor\n## 100          5.7         2.8          4.1         1.3 versicolor\n## 101          6.3         3.3          6.0         2.5  virginica\n## 102          5.8         2.7          5.1         1.9  virginica\n## 103          7.1         3.0          5.9         2.1  virginica\n## 104          6.3         2.9          5.6         1.8  virginica\n## 105          6.5         3.0          5.8         2.2  virginica\n## 106          7.6         3.0          6.6         2.1  virginica\n## 107          4.9         2.5          4.5         1.7  virginica\n## 108          7.3         2.9          6.3         1.8  virginica\n## 109          6.7         2.5          5.8         1.8  virginica\n## 110          7.2         3.6          6.1         2.5  virginica\n## 111          6.5         3.2          5.1         2.0  virginica\n## 112          6.4         2.7          5.3         1.9  virginica\n## 113          6.8         3.0          5.5         2.1  virginica\n## 114          5.7         2.5          5.0         2.0  virginica\n## 115          5.8         2.8          5.1         2.4  virginica\n## 116          6.4         3.2          5.3         2.3  virginica\n## 117          6.5         3.0          5.5         1.8  virginica\n## 118          7.7         3.8          6.7         2.2  virginica\n## 119          7.7         2.6          6.9         2.3  virginica\n## 120          6.0         2.2          5.0         1.5  virginica\n## 121          6.9         3.2          5.7         2.3  virginica\n## 122          5.6         2.8          4.9         2.0  virginica\n## 123          7.7         2.8          6.7         2.0  virginica\n## 124          6.3         2.7          4.9         1.8  virginica\n## 125          6.7         3.3          5.7         2.1  virginica\n## 126          7.2         3.2          6.0         1.8  virginica\n## 127          6.2         2.8          4.8         1.8  virginica\n## 128          6.1         3.0          4.9         1.8  virginica\n## 129          6.4         2.8          5.6         2.1  virginica\n## 130          7.2         3.0          5.8         1.6  virginica\n## 131          7.4         2.8          6.1         1.9  virginica\n## 132          7.9         3.8          6.4         2.0  virginica\n## 133          6.4         2.8          5.6         2.2  virginica\n## 134          6.3         2.8          5.1         1.5  virginica\n## 135          6.1         2.6          5.6         1.4  virginica\n## 136          7.7         3.0          6.1         2.3  virginica\n## 137          6.3         3.4          5.6         2.4  virginica\n## 138          6.4         3.1          5.5         1.8  virginica\n## 139          6.0         3.0          4.8         1.8  virginica\n## 140          6.9         3.1          5.4         2.1  virginica\n## 141          6.7         3.1          5.6         2.4  virginica\n## 142          6.9         3.1          5.1         2.3  virginica\n## 143          5.8         2.7          5.1         1.9  virginica\n## 144          6.8         3.2          5.9         2.3  virginica\n## 145          6.7         3.3          5.7         2.5  virginica\n## 146          6.7         3.0          5.2         2.3  virginica\n## 147          6.3         2.5          5.0         1.9  virginica\n## 148          6.5         3.0          5.2         2.0  virginica\n## 149          6.2         3.4          5.4         2.3  virginica\n## 150          5.9         3.0          5.1         1.8  virginica\n# Filtramos columnas\nfiltro_col <- subset(iris,  select = c(\"Sepal.Length\", \"Sepal.Width\", \"Species\"))\nfiltro_col##     Sepal.Length Sepal.Width    Species\n## 1            5.1         3.5     setosa\n## 2            4.9         3.0     setosa\n## 3            4.7         3.2     setosa\n## 4            4.6         3.1     setosa\n## 5            5.0         3.6     setosa\n## 6            5.4         3.9     setosa\n## 7            4.6         3.4     setosa\n## 8            5.0         3.4     setosa\n## 9            4.4         2.9     setosa\n## 10           4.9         3.1     setosa\n## 11           5.4         3.7     setosa\n## 12           4.8         3.4     setosa\n## 13           4.8         3.0     setosa\n## 14           4.3         3.0     setosa\n## 15           5.8         4.0     setosa\n## 16           5.7         4.4     setosa\n## 17           5.4         3.9     setosa\n## 18           5.1         3.5     setosa\n## 19           5.7         3.8     setosa\n## 20           5.1         3.8     setosa\n## 21           5.4         3.4     setosa\n## 22           5.1         3.7     setosa\n## 23           4.6         3.6     setosa\n## 24           5.1         3.3     setosa\n## 25           4.8         3.4     setosa\n## 26           5.0         3.0     setosa\n## 27           5.0         3.4     setosa\n## 28           5.2         3.5     setosa\n## 29           5.2         3.4     setosa\n## 30           4.7         3.2     setosa\n## 31           4.8         3.1     setosa\n## 32           5.4         3.4     setosa\n## 33           5.2         4.1     setosa\n## 34           5.5         4.2     setosa\n## 35           4.9         3.1     setosa\n## 36           5.0         3.2     setosa\n## 37           5.5         3.5     setosa\n## 38           4.9         3.6     setosa\n## 39           4.4         3.0     setosa\n## 40           5.1         3.4     setosa\n## 41           5.0         3.5     setosa\n## 42           4.5         2.3     setosa\n## 43           4.4         3.2     setosa\n## 44           5.0         3.5     setosa\n## 45           5.1         3.8     setosa\n## 46           4.8         3.0     setosa\n## 47           5.1         3.8     setosa\n## 48           4.6         3.2     setosa\n## 49           5.3         3.7     setosa\n## 50           5.0         3.3     setosa\n## 51           7.0         3.2 versicolor\n## 52           6.4         3.2 versicolor\n## 53           6.9         3.1 versicolor\n## 54           5.5         2.3 versicolor\n## 55           6.5         2.8 versicolor\n## 56           5.7         2.8 versicolor\n## 57           6.3         3.3 versicolor\n## 58           4.9         2.4 versicolor\n## 59           6.6         2.9 versicolor\n## 60           5.2         2.7 versicolor\n## 61           5.0         2.0 versicolor\n## 62           5.9         3.0 versicolor\n## 63           6.0         2.2 versicolor\n## 64           6.1         2.9 versicolor\n## 65           5.6         2.9 versicolor\n## 66           6.7         3.1 versicolor\n## 67           5.6         3.0 versicolor\n## 68           5.8         2.7 versicolor\n## 69           6.2         2.2 versicolor\n## 70           5.6         2.5 versicolor\n## 71           5.9         3.2 versicolor\n## 72           6.1         2.8 versicolor\n## 73           6.3         2.5 versicolor\n## 74           6.1         2.8 versicolor\n## 75           6.4         2.9 versicolor\n## 76           6.6         3.0 versicolor\n## 77           6.8         2.8 versicolor\n## 78           6.7         3.0 versicolor\n## 79           6.0         2.9 versicolor\n## 80           5.7         2.6 versicolor\n## 81           5.5         2.4 versicolor\n## 82           5.5         2.4 versicolor\n## 83           5.8         2.7 versicolor\n## 84           6.0         2.7 versicolor\n## 85           5.4         3.0 versicolor\n## 86           6.0         3.4 versicolor\n## 87           6.7         3.1 versicolor\n## 88           6.3         2.3 versicolor\n## 89           5.6         3.0 versicolor\n## 90           5.5         2.5 versicolor\n## 91           5.5         2.6 versicolor\n## 92           6.1         3.0 versicolor\n## 93           5.8         2.6 versicolor\n## 94           5.0         2.3 versicolor\n## 95           5.6         2.7 versicolor\n## 96           5.7         3.0 versicolor\n## 97           5.7         2.9 versicolor\n## 98           6.2         2.9 versicolor\n## 99           5.1         2.5 versicolor\n## 100          5.7         2.8 versicolor\n## 101          6.3         3.3  virginica\n## 102          5.8         2.7  virginica\n## 103          7.1         3.0  virginica\n## 104          6.3         2.9  virginica\n## 105          6.5         3.0  virginica\n## 106          7.6         3.0  virginica\n## 107          4.9         2.5  virginica\n## 108          7.3         2.9  virginica\n## 109          6.7         2.5  virginica\n## 110          7.2         3.6  virginica\n## 111          6.5         3.2  virginica\n## 112          6.4         2.7  virginica\n## 113          6.8         3.0  virginica\n## 114          5.7         2.5  virginica\n## 115          5.8         2.8  virginica\n## 116          6.4         3.2  virginica\n## 117          6.5         3.0  virginica\n## 118          7.7         3.8  virginica\n## 119          7.7         2.6  virginica\n## 120          6.0         2.2  virginica\n## 121          6.9         3.2  virginica\n## 122          5.6         2.8  virginica\n## 123          7.7         2.8  virginica\n## 124          6.3         2.7  virginica\n## 125          6.7         3.3  virginica\n## 126          7.2         3.2  virginica\n## 127          6.2         2.8  virginica\n## 128          6.1         3.0  virginica\n## 129          6.4         2.8  virginica\n## 130          7.2         3.0  virginica\n## 131          7.4         2.8  virginica\n## 132          7.9         3.8  virginica\n## 133          6.4         2.8  virginica\n## 134          6.3         2.8  virginica\n## 135          6.1         2.6  virginica\n## 136          7.7         3.0  virginica\n## 137          6.3         3.4  virginica\n## 138          6.4         3.1  virginica\n## 139          6.0         3.0  virginica\n## 140          6.9         3.1  virginica\n## 141          6.7         3.1  virginica\n## 142          6.9         3.1  virginica\n## 143          5.8         2.7  virginica\n## 144          6.8         3.2  virginica\n## 145          6.7         3.3  virginica\n## 146          6.7         3.0  virginica\n## 147          6.3         2.5  virginica\n## 148          6.5         3.0  virginica\n## 149          6.2         3.4  virginica\n## 150          5.9         3.0  virginica\n# Todo de una vez\nfiltro <- subset(iris, subset = Petal.Width != 0.2, select = c(\"Sepal.Length\", \"Sepal.Width\", \"Species\"))\nfiltro##     Sepal.Length Sepal.Width    Species\n## 6            5.4         3.9     setosa\n## 7            4.6         3.4     setosa\n## 10           4.9         3.1     setosa\n## 13           4.8         3.0     setosa\n## 14           4.3         3.0     setosa\n## 16           5.7         4.4     setosa\n## 17           5.4         3.9     setosa\n## 18           5.1         3.5     setosa\n## 19           5.7         3.8     setosa\n## 20           5.1         3.8     setosa\n## 22           5.1         3.7     setosa\n## 24           5.1         3.3     setosa\n## 27           5.0         3.4     setosa\n## 32           5.4         3.4     setosa\n## 33           5.2         4.1     setosa\n## 38           4.9         3.6     setosa\n## 41           5.0         3.5     setosa\n## 42           4.5         2.3     setosa\n## 44           5.0         3.5     setosa\n## 45           5.1         3.8     setosa\n## 46           4.8         3.0     setosa\n## 51           7.0         3.2 versicolor\n## 52           6.4         3.2 versicolor\n## 53           6.9         3.1 versicolor\n## 54           5.5         2.3 versicolor\n## 55           6.5         2.8 versicolor\n## 56           5.7         2.8 versicolor\n## 57           6.3         3.3 versicolor\n## 58           4.9         2.4 versicolor\n## 59           6.6         2.9 versicolor\n## 60           5.2         2.7 versicolor\n## 61           5.0         2.0 versicolor\n## 62           5.9         3.0 versicolor\n## 63           6.0         2.2 versicolor\n## 64           6.1         2.9 versicolor\n## 65           5.6         2.9 versicolor\n## 66           6.7         3.1 versicolor\n## 67           5.6         3.0 versicolor\n## 68           5.8         2.7 versicolor\n## 69           6.2         2.2 versicolor\n## 70           5.6         2.5 versicolor\n## 71           5.9         3.2 versicolor\n## 72           6.1         2.8 versicolor\n## 73           6.3         2.5 versicolor\n## 74           6.1         2.8 versicolor\n## 75           6.4         2.9 versicolor\n## 76           6.6         3.0 versicolor\n## 77           6.8         2.8 versicolor\n## 78           6.7         3.0 versicolor\n## 79           6.0         2.9 versicolor\n## 80           5.7         2.6 versicolor\n## 81           5.5         2.4 versicolor\n## 82           5.5         2.4 versicolor\n## 83           5.8         2.7 versicolor\n## 84           6.0         2.7 versicolor\n## 85           5.4         3.0 versicolor\n## 86           6.0         3.4 versicolor\n## 87           6.7         3.1 versicolor\n## 88           6.3         2.3 versicolor\n## 89           5.6         3.0 versicolor\n## 90           5.5         2.5 versicolor\n## 91           5.5         2.6 versicolor\n## 92           6.1         3.0 versicolor\n## 93           5.8         2.6 versicolor\n## 94           5.0         2.3 versicolor\n## 95           5.6         2.7 versicolor\n## 96           5.7         3.0 versicolor\n## 97           5.7         2.9 versicolor\n## 98           6.2         2.9 versicolor\n## 99           5.1         2.5 versicolor\n## 100          5.7         2.8 versicolor\n## 101          6.3         3.3  virginica\n## 102          5.8         2.7  virginica\n## 103          7.1         3.0  virginica\n## 104          6.3         2.9  virginica\n## 105          6.5         3.0  virginica\n## 106          7.6         3.0  virginica\n## 107          4.9         2.5  virginica\n## 108          7.3         2.9  virginica\n## 109          6.7         2.5  virginica\n## 110          7.2         3.6  virginica\n## 111          6.5         3.2  virginica\n## 112          6.4         2.7  virginica\n## 113          6.8         3.0  virginica\n## 114          5.7         2.5  virginica\n## 115          5.8         2.8  virginica\n## 116          6.4         3.2  virginica\n## 117          6.5         3.0  virginica\n## 118          7.7         3.8  virginica\n## 119          7.7         2.6  virginica\n## 120          6.0         2.2  virginica\n## 121          6.9         3.2  virginica\n## 122          5.6         2.8  virginica\n## 123          7.7         2.8  virginica\n## 124          6.3         2.7  virginica\n## 125          6.7         3.3  virginica\n## 126          7.2         3.2  virginica\n## 127          6.2         2.8  virginica\n## 128          6.1         3.0  virginica\n## 129          6.4         2.8  virginica\n## 130          7.2         3.0  virginica\n## 131          7.4         2.8  virginica\n## 132          7.9         3.8  virginica\n## 133          6.4         2.8  virginica\n## 134          6.3         2.8  virginica\n## 135          6.1         2.6  virginica\n## 136          7.7         3.0  virginica\n## 137          6.3         3.4  virginica\n## 138          6.4         3.1  virginica\n## 139          6.0         3.0  virginica\n## 140          6.9         3.1  virginica\n## 141          6.7         3.1  virginica\n## 142          6.9         3.1  virginica\n## 143          5.8         2.7  virginica\n## 144          6.8         3.2  virginica\n## 145          6.7         3.3  virginica\n## 146          6.7         3.0  virginica\n## 147          6.3         2.5  virginica\n## 148          6.5         3.0  virginica\n## 149          6.2         3.4  virginica\n## 150          5.9         3.0  virginica\n# Filas borradas\nnrow(iris) - nrow(filtro)## [1] 29\n# Cambiamos nombres a castellano del conjunto filtrado\nnames(filtro) <- c(\"longitud_sepalo\", \"anchura_sepalo\", \"especies\")\n# Accedemos por √≠ndice\niris[, 1:2]##     Sepal.Length Sepal.Width\n## 1            5.1         3.5\n## 2            4.9         3.0\n## 3            4.7         3.2\n## 4            4.6         3.1\n## 5            5.0         3.6\n## 6            5.4         3.9\n## 7            4.6         3.4\n## 8            5.0         3.4\n## 9            4.4         2.9\n## 10           4.9         3.1\n## 11           5.4         3.7\n## 12           4.8         3.4\n## 13           4.8         3.0\n## 14           4.3         3.0\n## 15           5.8         4.0\n## 16           5.7         4.4\n## 17           5.4         3.9\n## 18           5.1         3.5\n## 19           5.7         3.8\n## 20           5.1         3.8\n## 21           5.4         3.4\n## 22           5.1         3.7\n## 23           4.6         3.6\n## 24           5.1         3.3\n## 25           4.8         3.4\n## 26           5.0         3.0\n## 27           5.0         3.4\n## 28           5.2         3.5\n## 29           5.2         3.4\n## 30           4.7         3.2\n## 31           4.8         3.1\n## 32           5.4         3.4\n## 33           5.2         4.1\n## 34           5.5         4.2\n## 35           4.9         3.1\n## 36           5.0         3.2\n## 37           5.5         3.5\n## 38           4.9         3.6\n## 39           4.4         3.0\n## 40           5.1         3.4\n## 41           5.0         3.5\n## 42           4.5         2.3\n## 43           4.4         3.2\n## 44           5.0         3.5\n## 45           5.1         3.8\n## 46           4.8         3.0\n## 47           5.1         3.8\n## 48           4.6         3.2\n## 49           5.3         3.7\n## 50           5.0         3.3\n## 51           7.0         3.2\n## 52           6.4         3.2\n## 53           6.9         3.1\n## 54           5.5         2.3\n## 55           6.5         2.8\n## 56           5.7         2.8\n## 57           6.3         3.3\n## 58           4.9         2.4\n## 59           6.6         2.9\n## 60           5.2         2.7\n## 61           5.0         2.0\n## 62           5.9         3.0\n## 63           6.0         2.2\n## 64           6.1         2.9\n## 65           5.6         2.9\n## 66           6.7         3.1\n## 67           5.6         3.0\n## 68           5.8         2.7\n## 69           6.2         2.2\n## 70           5.6         2.5\n## 71           5.9         3.2\n## 72           6.1         2.8\n## 73           6.3         2.5\n## 74           6.1         2.8\n## 75           6.4         2.9\n## 76           6.6         3.0\n## 77           6.8         2.8\n## 78           6.7         3.0\n## 79           6.0         2.9\n## 80           5.7         2.6\n## 81           5.5         2.4\n## 82           5.5         2.4\n## 83           5.8         2.7\n## 84           6.0         2.7\n## 85           5.4         3.0\n## 86           6.0         3.4\n## 87           6.7         3.1\n## 88           6.3         2.3\n## 89           5.6         3.0\n## 90           5.5         2.5\n## 91           5.5         2.6\n## 92           6.1         3.0\n## 93           5.8         2.6\n## 94           5.0         2.3\n## 95           5.6         2.7\n## 96           5.7         3.0\n## 97           5.7         2.9\n## 98           6.2         2.9\n## 99           5.1         2.5\n## 100          5.7         2.8\n## 101          6.3         3.3\n## 102          5.8         2.7\n## 103          7.1         3.0\n## 104          6.3         2.9\n## 105          6.5         3.0\n## 106          7.6         3.0\n## 107          4.9         2.5\n## 108          7.3         2.9\n## 109          6.7         2.5\n## 110          7.2         3.6\n## 111          6.5         3.2\n## 112          6.4         2.7\n## 113          6.8         3.0\n## 114          5.7         2.5\n## 115          5.8         2.8\n## 116          6.4         3.2\n## 117          6.5         3.0\n## 118          7.7         3.8\n## 119          7.7         2.6\n## 120          6.0         2.2\n## 121          6.9         3.2\n## 122          5.6         2.8\n## 123          7.7         2.8\n## 124          6.3         2.7\n## 125          6.7         3.3\n## 126          7.2         3.2\n## 127          6.2         2.8\n## 128          6.1         3.0\n## 129          6.4         2.8\n## 130          7.2         3.0\n## 131          7.4         2.8\n## 132          7.9         3.8\n## 133          6.4         2.8\n## 134          6.3         2.8\n## 135          6.1         2.6\n## 136          7.7         3.0\n## 137          6.3         3.4\n## 138          6.4         3.1\n## 139          6.0         3.0\n## 140          6.9         3.1\n## 141          6.7         3.1\n## 142          6.9         3.1\n## 143          5.8         2.7\n## 144          6.8         3.2\n## 145          6.7         3.3\n## 146          6.7         3.0\n## 147          6.3         2.5\n## 148          6.5         3.0\n## 149          6.2         3.4\n## 150          5.9         3.0\n# Accedemos por nombre\niris[, c(\"Sepal.Length\", \"Sepal.Width\")]##     Sepal.Length Sepal.Width\n## 1            5.1         3.5\n## 2            4.9         3.0\n## 3            4.7         3.2\n## 4            4.6         3.1\n## 5            5.0         3.6\n## 6            5.4         3.9\n## 7            4.6         3.4\n## 8            5.0         3.4\n## 9            4.4         2.9\n## 10           4.9         3.1\n## 11           5.4         3.7\n## 12           4.8         3.4\n## 13           4.8         3.0\n## 14           4.3         3.0\n## 15           5.8         4.0\n## 16           5.7         4.4\n## 17           5.4         3.9\n## 18           5.1         3.5\n## 19           5.7         3.8\n## 20           5.1         3.8\n## 21           5.4         3.4\n## 22           5.1         3.7\n## 23           4.6         3.6\n## 24           5.1         3.3\n## 25           4.8         3.4\n## 26           5.0         3.0\n## 27           5.0         3.4\n## 28           5.2         3.5\n## 29           5.2         3.4\n## 30           4.7         3.2\n## 31           4.8         3.1\n## 32           5.4         3.4\n## 33           5.2         4.1\n## 34           5.5         4.2\n## 35           4.9         3.1\n## 36           5.0         3.2\n## 37           5.5         3.5\n## 38           4.9         3.6\n## 39           4.4         3.0\n## 40           5.1         3.4\n## 41           5.0         3.5\n## 42           4.5         2.3\n## 43           4.4         3.2\n## 44           5.0         3.5\n## 45           5.1         3.8\n## 46           4.8         3.0\n## 47           5.1         3.8\n## 48           4.6         3.2\n## 49           5.3         3.7\n## 50           5.0         3.3\n## 51           7.0         3.2\n## 52           6.4         3.2\n## 53           6.9         3.1\n## 54           5.5         2.3\n## 55           6.5         2.8\n## 56           5.7         2.8\n## 57           6.3         3.3\n## 58           4.9         2.4\n## 59           6.6         2.9\n## 60           5.2         2.7\n## 61           5.0         2.0\n## 62           5.9         3.0\n## 63           6.0         2.2\n## 64           6.1         2.9\n## 65           5.6         2.9\n## 66           6.7         3.1\n## 67           5.6         3.0\n## 68           5.8         2.7\n## 69           6.2         2.2\n## 70           5.6         2.5\n## 71           5.9         3.2\n## 72           6.1         2.8\n## 73           6.3         2.5\n## 74           6.1         2.8\n## 75           6.4         2.9\n## 76           6.6         3.0\n## 77           6.8         2.8\n## 78           6.7         3.0\n## 79           6.0         2.9\n## 80           5.7         2.6\n## 81           5.5         2.4\n## 82           5.5         2.4\n## 83           5.8         2.7\n## 84           6.0         2.7\n## 85           5.4         3.0\n## 86           6.0         3.4\n## 87           6.7         3.1\n## 88           6.3         2.3\n## 89           5.6         3.0\n## 90           5.5         2.5\n## 91           5.5         2.6\n## 92           6.1         3.0\n## 93           5.8         2.6\n## 94           5.0         2.3\n## 95           5.6         2.7\n## 96           5.7         3.0\n## 97           5.7         2.9\n## 98           6.2         2.9\n## 99           5.1         2.5\n## 100          5.7         2.8\n## 101          6.3         3.3\n## 102          5.8         2.7\n## 103          7.1         3.0\n## 104          6.3         2.9\n## 105          6.5         3.0\n## 106          7.6         3.0\n## 107          4.9         2.5\n## 108          7.3         2.9\n## 109          6.7         2.5\n## 110          7.2         3.6\n## 111          6.5         3.2\n## 112          6.4         2.7\n## 113          6.8         3.0\n## 114          5.7         2.5\n## 115          5.8         2.8\n## 116          6.4         3.2\n## 117          6.5         3.0\n## 118          7.7         3.8\n## 119          7.7         2.6\n## 120          6.0         2.2\n## 121          6.9         3.2\n## 122          5.6         2.8\n## 123          7.7         2.8\n## 124          6.3         2.7\n## 125          6.7         3.3\n## 126          7.2         3.2\n## 127          6.2         2.8\n## 128          6.1         3.0\n## 129          6.4         2.8\n## 130          7.2         3.0\n## 131          7.4         2.8\n## 132          7.9         3.8\n## 133          6.4         2.8\n## 134          6.3         2.8\n## 135          6.1         2.6\n## 136          7.7         3.0\n## 137          6.3         3.4\n## 138          6.4         3.1\n## 139          6.0         3.0\n## 140          6.9         3.1\n## 141          6.7         3.1\n## 142          6.9         3.1\n## 143          5.8         2.7\n## 144          6.8         3.2\n## 145          6.7         3.3\n## 146          6.7         3.0\n## 147          6.3         2.5\n## 148          6.5         3.0\n## 149          6.2         3.4\n## 150          5.9         3.0\n# Accedemos a cada una individualmente\niris$Sepal.Length##   [1] 5.1 4.9 4.7 4.6 5.0 5.4 4.6 5.0 4.4 4.9 5.4 4.8 4.8 4.3 5.8 5.7 5.4 5.1\n##  [19] 5.7 5.1 5.4 5.1 4.6 5.1 4.8 5.0 5.0 5.2 5.2 4.7 4.8 5.4 5.2 5.5 4.9 5.0\n##  [37] 5.5 4.9 4.4 5.1 5.0 4.5 4.4 5.0 5.1 4.8 5.1 4.6 5.3 5.0 7.0 6.4 6.9 5.5\n##  [55] 6.5 5.7 6.3 4.9 6.6 5.2 5.0 5.9 6.0 6.1 5.6 6.7 5.6 5.8 6.2 5.6 5.9 6.1\n##  [73] 6.3 6.1 6.4 6.6 6.8 6.7 6.0 5.7 5.5 5.5 5.8 6.0 5.4 6.0 6.7 6.3 5.6 5.5\n##  [91] 5.5 6.1 5.8 5.0 5.6 5.7 5.7 6.2 5.1 5.7 6.3 5.8 7.1 6.3 6.5 7.6 4.9 7.3\n## [109] 6.7 7.2 6.5 6.4 6.8 5.7 5.8 6.4 6.5 7.7 7.7 6.0 6.9 5.6 7.7 6.3 6.7 7.2\n## [127] 6.2 6.1 6.4 7.2 7.4 7.9 6.4 6.3 6.1 7.7 6.3 6.4 6.0 6.9 6.7 6.9 5.8 6.8\n## [145] 6.7 6.7 6.3 6.5 6.2 5.9\niris$Sepal.Width##   [1] 3.5 3.0 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 3.7 3.4 3.0 3.0 4.0 4.4 3.9 3.5\n##  [19] 3.8 3.8 3.4 3.7 3.6 3.3 3.4 3.0 3.4 3.5 3.4 3.2 3.1 3.4 4.1 4.2 3.1 3.2\n##  [37] 3.5 3.6 3.0 3.4 3.5 2.3 3.2 3.5 3.8 3.0 3.8 3.2 3.7 3.3 3.2 3.2 3.1 2.3\n##  [55] 2.8 2.8 3.3 2.4 2.9 2.7 2.0 3.0 2.2 2.9 2.9 3.1 3.0 2.7 2.2 2.5 3.2 2.8\n##  [73] 2.5 2.8 2.9 3.0 2.8 3.0 2.9 2.6 2.4 2.4 2.7 2.7 3.0 3.4 3.1 2.3 3.0 2.5\n##  [91] 2.6 3.0 2.6 2.3 2.7 3.0 2.9 2.9 2.5 2.8 3.3 2.7 3.0 2.9 3.0 3.0 2.5 2.9\n## [109] 2.5 3.6 3.2 2.7 3.0 2.5 2.8 3.2 3.0 3.8 2.6 2.2 3.2 2.8 2.8 2.7 3.3 3.2\n## [127] 2.8 3.0 2.8 3.0 2.8 3.8 2.8 2.8 2.6 3.0 3.4 3.1 3.0 3.1 3.1 3.1 2.7 3.2\n## [145] 3.3 3.0 2.5 3.0 3.4 3.0"},{"path":"proyecto.html","id":"proyecto","chapter":"Cap√≠tulo 7 Flujo de trabajo: primer proyecto","heading":"Cap√≠tulo 7 Flujo de trabajo: primer proyecto","text":"Estamos listos/para crear nuestro primer proyecto de R para trabajar ordenadicos/.Cuando se empieza programar para un trabajo concreto de R es recomendable crearnos lo que se conoce como un proyecto de R: en lugar de ir abriendo ventanas sueltas para programar (los scripts, los archivos con extensi√≥n .R), podemos agruparlos en distintos proyectos, de forma que podamos acceder ellos de forma ordenada (algo as√≠ como crear carpetas en nuestro disco duro).","code":""},{"path":"proyecto.html","id":"crear-proyecto","chapter":"Cap√≠tulo 7 Flujo de trabajo: primer proyecto","heading":"7.1 Crear proyecto","text":"Para crear nuestro proyecto deberemos de ir al men√∫ superior File << New Project (ver 7.1)\nImagen/gr√°fica 7.1: Crear un nuevo proyecto en R.\nSe nos abrir√° una ventana con 3 opciones:New directory: crear un proyecto desde el inicio (opci√≥n recomendable).New directory: crear un proyecto desde el inicio (opci√≥n recomendable).Existing directory: crear un proyecto con los c√≥digos que tienes ya guardados en una carpeta.Existing directory: crear un proyecto con los c√≥digos que tienes ya guardados en una carpeta.Version control: para importar el proyecto de alg√∫n repositorio y vincularlo √©l.Version control: para importar el proyecto de alg√∫n repositorio y vincularlo √©l.\nImagen/gr√°fica 7.2: Opciones de creaci√≥n.\n\nImagen/gr√°fica 7.3: Clickar en ¬´New project¬ª.\nDeberemos elegir el directorio de nuestro ordenador donde queremos que se guarde (una carpeta que contendr√° todos los c√≥digos y datos de ese proyecto), as√≠ como el nombre del proyecto (que ser√° su vez el nombre de la subcarpeta que se os crear√° en el ordenador).\nImagen/gr√°fica 7.4: Nombre del proyecto.\nUna vez que el proyecto est√° creado, abriremos un script de R (donde escribiremos el c√≥digo), escribiremos si queremos una descripci√≥n del proyecto en la primera l√≠nea y guardaremos el archivo (archivo de extensi√≥n .R).\nImagen/gr√°fica 7.5: Abrir nuestro primer script de R.\n\nImagen/gr√°fica 7.6: Descripci√≥n al inicio del c√≥digo.\n\nImagen/gr√°fica 7.7: Guardamos el c√≥digo.\n\nImagen/gr√°fica 7.8: Guardamos el c√≥digo.\nEste ser√° nuestro c√≥digo principal (puedes ponerle el nombre que quieras, normalmente se le llama main.R para diferenciarlo del resto), desde el que iremos construyendo nuestro c√≥digo e iremos llamando otros archivos si es necesario. Recuerda que programar es como escribir: cuanto m√°s limpio y estructurado, mejor se entender√°.¬†La ventaja de tener los c√≥digos agrupados por proyectos es que si estamos trabajando en varios la vez podemos saltar de uno otro, visualizando solo los c√≥digos de un proyecto, y los 100 archivos que vayamos creando.\nImagen/gr√°fica 7.9: Saltar de proyecto en proyecto.\n","code":""},{"path":"proyecto.html","id":"directorios-de-trabajo-y-cabecera","chapter":"Cap√≠tulo 7 Flujo de trabajo: primer proyecto","heading":"7.2 Directorios de trabajo y cabecera","text":"Como luego veremos, es altamente recomendable que todos los archivos (c√≥digos, datos, im√°genes, recursos, etc) est√©n dentro de la misma carpeta del proyecto (aunque podamos crear subdirectorios), para que trabajar en el proyecto sea m√°s sencillo e intuitivo. Vamos crearnos dentro de la carpeta del proyecto, una subcarpeta que se llame DATOS, en donde debemos descargar todos los ficheros que hay en https://github.com/dadosdelaplace/courses-intro-r/tree/main/DATOS, y otra llamada CODIGOS, donde guardar nuestros archivos .R (por eso de ser ordenadicos).\nImagen/gr√°fica 7.10: Subcarpeta ¬´CODIGOS¬ª.\nEn esa carpeta de c√≥digos vamos crear de prueba el c√≥digo llamado variables.R donde vamos definir algunas variables que luego usaremos en el c√≥digo principal (suele suceder con variables que van ser fijas como nombres, fechas o codificaciones de variables).\nImagen/gr√°fica 7.11: Escribimos una serie de variables fijas para luego ser usadas.\nes obligatorio pero es altamente recomendable tener muy estructurado nuestros c√≥digos, de forma que el archivo .R haga una tarea concreta y definida (uno carga archivos, otro preprocesa, otro hace un modelo, otro hace las gr√°ficas), y sea el c√≥digo principal el que haga una llamada limpia todos ellos, para que en caso de error, la detecci√≥n del mismo sea m√°s sencilla.As√≠ que eso haremos: desde nuestro archivo principal main.R llamaremos ese archivo variables.R, para luego usar las variables definidas en √©l.¬øC√≥mo indicarle R donde est√° nuestro fichero?En R, como en todo lenguaje de programaci√≥n, podemos consultar lo que el ordenador llama directorio de trabajo: la carpeta ¬´base¬ª desde donde est√° ejecutando tu c√≥digo. Dicha ruta de directorio se puede consultar con la funci√≥n getwd(), pudiendo ver los archivos y carpetas que hay dentro del mismo con el comando dir()\nImagen/gr√°fica 7.12: Consultar directorio de trabajo predeterminado y archivos contenidos en √©l.\nLo ideal es empezar el c√≥digo fijando como directorio de trabajo el directorio donde tengamos nuestro archivo principalmain.R y para ello usaremos la funci√≥n setwd(), cuyo argumento ser√° la ruta donde queremos fijarlo. Para hacerlo de forma autom√°tica (y que el c√≥digo pueda ser abierto por ti pero tambi√©n por otros que tengan tu misma estructura de carpetas), obtendremos de forma autom√°tica la ruta del archivo main.R o del proyecto con la orden rstudioapi::getSourceEditorContext()$path, y despu√©s usaremos dirname() para quedarnos solo con la ruta de carpetas (eliminando el nombre del fichero al final). Esa ser√° la ruta que le pasaremos setwd(), quedando nuestro directorio de trabajo autom√°ticamente fijado, sin preocuparnos de la ruta\nImagen/gr√°fica 7.13: Fijamos de forma autom√°tico el directorio de trabajo.\nUna vez que hemos fijado nuestro directorio, para cargar c√≥digo .R, basta que usemos la funci√≥n source(), cuyo argumento ser√° la ruta del archivo. Como tenemos de directorio base el directorio en el que tenemos nuestro archivo principal (./), bastar√° que empecemos escribir source(\"./\"), presionar el tabulador, y se nos abrir√° el men√∫ de archivos de nuestro directorio de trabajo, pudiendo ir seleccionando de forma sencilla la ruta de nuestro archivo.\nImagen/gr√°fica 7.14: Cargar archivos de nuestro directorio de trabajo.\n\nImagen/gr√°fica 7.15: Cargar archivos de nuestro directorio de trabajo.\n","code":"\n# Descripci√≥n: script de prueba con variables\n\n# Variables\nx <- c(1, 2, 0, -1, 71) # Vector de n√∫meros\ny <- c(\"hola\", \"me\", \"llamo\", \"Javier\") # Vector de caracteres\napellido <- \"√Ålvarez\"\n\n# Fechas\nhoy <- as.Date(Sys.time()) # Convertir a tipo fecha la fecha de hoy\nfecha_origen <- as.Date(\"2021-01-01\") # Inicio de a√±o\ngetwd()\ndir()\n# Fijamos directorio de trabajo autom√°ticamente\nsetwd(dirname(rstudioapi::getSourceEditorContext()$path))"},{"path":"proyecto.html","id":"ejecuci√≥n","chapter":"Cap√≠tulo 7 Flujo de trabajo: primer proyecto","heading":"7.3 Ejecuci√≥n","text":"Ese archivo que hemos incluido en el c√≥digo principal nos cargar√° las variables que hemos definido en √©l, pudiendo usarlas en el c√≥digo. Vamos ejecutar lo que tenemos de momento, y para ello tenemos 2 opciones: o copiar el c√≥digo del script en la consola y pulsar ENTER, o bien, activando la casilla source save y guardando el script (solo se guardar√° sino que se ejecutar√°).\nImagen/gr√°fica 7.16: Guardamos con la casilla ¬´source save¬ª activada para que adem√°s de guardar se ejecute el c√≥digo.\nComo vemos en la imagen 7.16, una vez ejecutado, tenemos en nuestro panel de entorno (parte superior derecha) las variables ya cargadas que ten√≠amos definidas en nuestro fichero variables.R.Prueba escribir algunas funciones que hemos aprendido con dichas variables y vuelve hacer click en ¬´guardar¬ª con source save activado.La funci√≥n cat() nos muestra por consola el texto que le pasemos de argumento (funci√≥n especial para mensajes de alerta por consola)\nImagen/gr√°fica 7.17: C√°lculos con la variables definidas: suma, concatenaci√≥n de texto y diferencia de fechas.\nYa hemos ejecutado nuestro primer proyecto en .R :)¬†WARNING: guardar los scriptsLos scripts que tengas sin guardar tendr√°n un asterisco * al final del nombre en la pesta√±a superior de la ventana.","code":"\n# Sumamos 3 a cada elemento de x\nz <- x + 3\nz## [1]  4  5  3  2 74\n# Imprimimos por pantalla la frase unida, y a dicha frase\n# le pegamos nuestro apellido\ncat(paste(paste(y, collapse = \" \"), apellido))## hola me llamo Javier √Ålvarez\n# D√≠as que han pasado desde el inicio de a√±o\ndias <- hoy - fecha_origen\ndias## Time difference of 356 days"},{"path":"proyecto.html","id":"consejos-6","chapter":"Cap√≠tulo 7 Flujo de trabajo: primer proyecto","heading":"7.4 Consejos","text":"CONSEJOS¬†Cambiar la notaci√≥n exponencialPor defecto, R muestra los n√∫meros en formato de notaci√≥n exponencial. Por ejemplo, el n√∫mero 1000000 nos lo mostrar√° por defecto como 1e+06. veces podemos querer que se muestre con todas sus cifras (por ejemplo, en el t√≠tulo o leyenda de una gr√°fica): para anular la notaci√≥n exponencial, escribe al inicio del c√≥digo options(\"scipen\" = 10).¬†Limpiar consolaPodemos limpiar la consola clickando en al escoba que tenemos en la parte superior derecha de la misma. Esta acci√≥n nos elimina ninguna variable, simplemente nos limpia la consola de mensajes.¬†Comentarios en los c√≥digosEs crucial que intentes documentar al m√°ximo tu c√≥digo y que te acostumbres ello desde el principio, dejando expl√≠cito que haces en cada paso, tanto para ti como para otra persona que pueda leer tu c√≥digo y lo entienda. Para ello usaremos # comentario cuando queramos dejar comentarios en el c√≥digo. Dichas partes, am√©n de estar en otro color, son le√≠das por R ni ejecutadas: son comentarios que el programa ¬´ve¬ª, solo son para nosotros.¬†Extraer fecha y hora de hoyLa funci√≥n Sys.time() accede al sistema de nuestro ordenador para decirnos la fecha y hora del momento de la ejecuci√≥n de dicha funci√≥n.","code":"\nSys.time()## [1] \"2021-12-23 17:55:20 CET\""},{"path":"importar-exportar.html","id":"importar-exportar","chapter":"Cap√≠tulo 8 Importando/exportando","heading":"Cap√≠tulo 8 Importando/exportando","text":"Hemos aprendido crear nuestros propios datos pero la mayor√≠a de veces los cargaremos de distintos archivos, fuentes, etc. Vamos ver algunas de las formas m√°s comunes de importar (cargar) datos.","code":""},{"path":"importar-exportar.html","id":"importaci√≥n-de-datos","chapter":"Cap√≠tulo 8 Importando/exportando","heading":"8.1 Importaci√≥n de datos","text":"Las formas m√°s comunes de importar (cargar) datos son:desde un archivo propio de R (extensi√≥n .RData).desde un archivo separado por comas (un archivo .csv).desde un excel (archivo .xlsx).desde un enlace de internet.desde un paquete.","code":""},{"path":"importar-exportar.html","id":"archivo-.rdata","chapter":"Cap√≠tulo 8 Importando/exportando","heading":"8.1.1 Archivo .RData","text":"La forma m√°s sencilla de guardar datos y variables en R, y que adem√°s ocupa menos espacio en nuestro disco duro, es guardarlo en archivos propios que tiene R como son los archivos con extensiones .rda y .RData.Es recomendable tener los datos en la misma carpeta del proyecto pero una carpeta separada, ya que podemos tener muchos archivos y as√≠ mezclamos dichos ficheros con los c√≥digos que escirbamos. En la carpeta DATOS del proyecto tenemos 4 archivos .RData: coches.RData, panel_vacunas_ccaa.RData, panel_vacunas_fecha.RData y panel_variables.RData. ¬øC√≥mo cargar archivos .RData?Muy sencillo: como son ficheros nativos de R, basta con usar la funci√≥n de carga load(), y dentro la ruta de los archivos.\nImagen/gr√°fica 8.1: Importaci√≥n de ficheros de extensi√≥n .RData.\nComo ves en la imagen 8.1, en el panel de entorno de la parte superior derecha ahora tendremos 4 data.frames que antes ten√≠amos. Un funci√≥n muy √∫til es head(), con argumento el nombre de un data.frame, que nos permite visualizar las primeras columnas.","code":"\n# Al fijar directorio de trabajo, no necesitamos toda la ruta, solo \"./\" y la ruta dentro de la carpeta del proyecto\nload(\"./DATOS/coches.RData\") \nload(\"./DATOS/panel_vacunas_ccaa.RData\")\nload(\"./DATOS/panel_vacunas_fecha.RData\")\nload(\"./DATOS/panel_variables.RData\")\n# Ver las primeras filas de la tabla que guarda distintos modelos de coche y caracter√≠sticas\nhead(coches)##                    consumo cilindrada     peso  potencia   tiempo\n## Mazda RX4         11.20069   2621.936 1188.411 111.52570 40.91298\n## Mazda RX4 Wag     11.20069   2621.936 1304.077 111.52570 42.30491\n## Datsun 710        10.31643   1769.807 1052.333  94.28991 46.25702\n## Hornet 4 Drive    10.99134   4227.872 1458.298 111.52570 48.32006\n## Hornet Sportabout 12.57832   5899.356 1560.356 177.42725 42.30491\n## Valiant           12.99528   3687.097 1569.428 106.45635 50.25883\n##                                motor transmision ncyl ncarb ngear\n## Mazda RX4             cilindros en V      Manual    6     4     4\n## Mazda RX4 Wag         cilindros en V      Manual    6     4     4\n## Datsun 710        cilindros en serie      Manual    4     1     4\n## Hornet 4 Drive    cilindros en serie  Autom√°tica    6     1     3\n## Hornet Sportabout     cilindros en V  Autom√°tica    8     2     3\n## Valiant           cilindros en serie  Autom√°tica    6     1     3"},{"path":"importar-exportar.html","id":"archivo-.csv","chapter":"Cap√≠tulo 8 Importando/exportando","heading":"8.1.2 Archivo .csv","text":"Otra opci√≥n de importaci√≥n habitual son los archivos .csv (comma separated values): son archivos separados por comas (u otro caracter como puntos, puntos y comas, o tabuladores). En apariencia cuando los abrimos en el ordenador son como un Excel (ya que los abre el Excel), pero ocupan mucho menos que un Excel y su lectura es universal (independiente de tener instalado o el Excel) ya que son archivos de texto sin formato.Para leer un archivo .csv basta con usar la funci√≥n read_csv() del paquete readr y la mayor√≠a de las veces basta indicarle la ruta del archivo para su lectura (argumento file).\nImagen/gr√°fica 8.2: Paquete readr.\nYa tenemos nuestro archivo .csv cargado y adem√°s en formato tibble. Como hemos mentado anteriormente, las tablas en formato tibble son una especie particular de tablas data.frame con una gesti√≥n m√°s eficiente.","code":"\ninstall.packages(\"readr\")\nlibrary(readr)\nvacunas_esp <- read_csv(file = \"./DATOS/datos_ES.csv\")\nhead(vacunas_esp)## # A tibble: 6 √ó 71\n##   fechas     ISO   poblacion porc_pobl_total poblacion_mayor_‚Ä¶ porc_pobl_total_‚Ä¶\n##   <date>     <chr>     <dbl>           <dbl>             <dbl>             <dbl>\n## 1 2021-01-05 ES     47450795             100          40129822               100\n## 2 2021-01-06 ES     47450795             100          40129822               100\n## 3 2021-01-07 ES     47450795             100          40129822               100\n## 4 2021-01-08 ES     47450795             100          40129822               100\n## 5 2021-01-09 ES     47450795             100          40129822               100\n## 6 2021-01-10 ES     47450795             100          40129822               100\n## # ‚Ä¶ with 65 more variables: dosis_entrega_pfizer <dbl>,\n## #   dosis_entrega_astra <dbl>, dosis_entrega_moderna <dbl>,\n## #   dosis_entrega_janssen <dbl>, dosis_entrega <dbl>,\n## #   dosis_entrega_100hab <dbl>, porc_entregadas_sobre_total <dbl>,\n## #   dosis_diarias_entrega_pfizer <dbl>, dosis_diarias_entrega_astra <dbl>,\n## #   dosis_diarias_entrega_moderna <dbl>, dosis_diarias_entrega <dbl>,\n## #   dosis_7D_entrega_pfizer <dbl>, dosis_7D_entrega_astra <dbl>, ‚Ä¶\nvacunas_esp[1:5, 1:7] # Primeras filas y columnas## # A tibble: 5 √ó 7\n##   fechas     ISO   poblacion porc_pobl_total poblacion_mayor_‚Ä¶ porc_pobl_total_‚Ä¶\n##   <date>     <chr>     <dbl>           <dbl>             <dbl>             <dbl>\n## 1 2021-01-05 ES     47450795             100          40129822               100\n## 2 2021-01-06 ES     47450795             100          40129822               100\n## 3 2021-01-07 ES     47450795             100          40129822               100\n## 4 2021-01-08 ES     47450795             100          40129822               100\n## 5 2021-01-09 ES     47450795             100          40129822               100\n## # ‚Ä¶ with 1 more variable: dosis_entrega_pfizer <dbl>"},{"path":"importar-exportar.html","id":"archivo-.xlsx","chapter":"Cap√≠tulo 8 Importando/exportando","heading":"8.1.3 Archivo .xlsx","text":"Muchas veces tendremos un .csv (por desgracia) y nos tocar√° leer desde un excel. Para ello deberemos instalar (la primera vez) y cargar el paquete readxl que nos permitir√° usar funciones para cargar archivos .xls (la funci√≥n read_xls()) y archivos .xlsx (la funci√≥n read_xlsx()). Adem√°s del argumento path con la ruta del archivo, podemos en el argumento sheet indicarle la hoja de Excel leer (en caso de tener varias).","code":"\ninstall.packages(\"readxl\")\nlibrary(readxl)\nboston <- read_xlsx(path = \"./DATOS/Boston.xlsx\")\nhead(boston)## # A tibble: 6 √ó 14\n##      crim    zn indus  chas   nox    rm   age   dis   rad   tax ptratio black\n##     <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl>   <dbl> <dbl>\n## 1 0.00632    18  2.31     0 0.538  6.58  65.2  4.09     1   296    15.3  397.\n## 2 0.0273      0  7.07     0 0.469  6.42  78.9  4.97     2   242    17.8  397.\n## 3 0.0273      0  7.07     0 0.469  7.18  61.1  4.97     2   242    17.8  393.\n## 4 0.0324      0  2.18     0 0.458  7.00  45.8  6.06     3   222    18.7  395.\n## 5 0.0690      0  2.18     0 0.458  7.15  54.2  6.06     3   222    18.7  397.\n## 6 0.0298      0  2.18     0 0.458  6.43  58.7  6.06     3   222    18.7  394.\n## # ‚Ä¶ with 2 more variables: lstat <dbl>, medv <dbl>"},{"path":"importar-exportar.html","id":"desde-web","chapter":"Cap√≠tulo 8 Importando/exportando","heading":"8.1.4 Desde web","text":"Muchas veces querremos cargar archivos colgados en la web que, aunque al descargarlos son .csv o .xlsx, son archivos din√°micos que sabemos que van ir cambiando, como por ejemplo los datos de casos covid, hospitalizados, ingresos UCI y fallecidos, de la p√°gina del ISCIII https://cnecovid.isciii.es/covid19/#documentaci%C3%B3n-y-datos.\nImagen/gr√°fica 8.3: Archivos de la pandemia en el ISCIII.\nEsos archivos cambian cada d√≠a, por lo que para visualizarlos, analizarlos o guardarlos cada d√≠a, tendr√≠amos que, cada d√≠a, entrar de forma manual la p√°gina y bajarnos el archivo. O ‚Ä¶R nos permite leer archivos subidos en una web, d√°ndole la funci√≥n de lectura el enlace del archivo en lugar de la ruta local de nuestro ordenador (para averiguar el enlace, basta con clickar bot√≥n derecho en la web y seleccionar ¬´copiar direcci√≥n de enlace¬ª)Mientras el enlace web cambie, cada vez que ejecutemos esa orden en nuestro c√≥digo tendremos en datos_ISCIII el √∫ltimo archivo actualizado que haya, sea el que sea, sin tener que descargarlo de forma manual, ¬°y sin necesidad de guardarlo en nuestro local, solo en la memoria virtual de nuestra sesi√≥n de R!","code":"\ndatos_ISCIII <- read_csv(file = \"https://cnecovid.isciii.es/covid19/resources/casos_hosp_uci_def_sexo_edad_provres.csv\")\nhead(datos_ISCIII)## # A tibble: 6 √ó 8\n##   provincia_iso sexo  grupo_edad fecha      num_casos num_hosp num_uci num_def\n##   <chr>         <chr> <chr>      <date>         <dbl>    <dbl>   <dbl>   <dbl>\n## 1 A             H     0-9        2020-01-01         0        0       0       0\n## 2 A             H     10-19      2020-01-01         0        0       0       0\n## 3 A             H     20-29      2020-01-01         0        0       0       0\n## 4 A             H     30-39      2020-01-01         0        0       0       0\n## 5 A             H     40-49      2020-01-01         0        0       0       0\n## 6 A             H     50-59      2020-01-01         0        0       0       0"},{"path":"importar-exportar.html","id":"desde-paquete","chapter":"Cap√≠tulo 8 Importando/exportando","heading":"8.1.5 Desde paquete","text":"Por √∫ltimo, una opci√≥n muy com√∫n es cargar datos desde paquetes que ya los tienen (o los consiguen trav√©s de API). Un ejemplo de ello es el paquete MASS, que contiene una gran cantidad de conjuntos de datos para usarlos en nuestro propio aprendizaje, como es el conjunto MASS::Boston con los datos de viviendas de los suburbios de la ciudad, o el paquete {datasets}, con conjuntos de datos tan variopintos como los pasajeros del Titanic (y si sobrevivieron o ) en datasets::Titanic.Veamos otro ejemplo con uno de los paquetes m√°s √∫tiles para conseguir datos, el paquete del EUROSTAT.","code":"\nhead(MASS::Boston)##      crim zn indus chas   nox    rm  age    dis rad tax ptratio  black lstat\n## 1 0.00632 18  2.31    0 0.538 6.575 65.2 4.0900   1 296    15.3 396.90  4.98\n## 2 0.02731  0  7.07    0 0.469 6.421 78.9 4.9671   2 242    17.8 396.90  9.14\n## 3 0.02729  0  7.07    0 0.469 7.185 61.1 4.9671   2 242    17.8 392.83  4.03\n## 4 0.03237  0  2.18    0 0.458 6.998 45.8 6.0622   3 222    18.7 394.63  2.94\n## 5 0.06905  0  2.18    0 0.458 7.147 54.2 6.0622   3 222    18.7 396.90  5.33\n## 6 0.02985  0  2.18    0 0.458 6.430 58.7 6.0622   3 222    18.7 394.12  5.21\n##   medv\n## 1 24.0\n## 2 21.6\n## 3 34.7\n## 4 33.4\n## 5 36.2\n## 6 28.7\nhead(datasets::Titanic)## [1]  0  0 35  0  0  0\nlibrary(eurostat)\n\n# Buscamos datos por palabras clave\nsearch_eurostat(\"education\")## # A tibble: 1,062 √ó 8\n##    title   code  type  `last update of‚Ä¶ `last table str‚Ä¶ `data start` `data end`\n##    <chr>   <chr> <chr> <chr>            <chr>            <chr>        <chr>     \n##  1 Popula‚Ä¶ cens‚Ä¶ data‚Ä¶ 01.04.2019       08.02.2021       2011         2011      \n##  2 Popula‚Ä¶ cens‚Ä¶ data‚Ä¶ 26.08.2015       08.02.2021       2011         2011      \n##  3 Employ‚Ä¶ cens‚Ä¶ data‚Ä¶ 26.03.2009       08.02.2021       2001         2001      \n##  4 Popula‚Ä¶ cens‚Ä¶ data‚Ä¶ 26.03.2009       08.02.2021       2001         2001      \n##  5 Pupils‚Ä¶ educ‚Ä¶ data‚Ä¶ 14.12.2021       08.02.2021       2013         2019      \n##  6 Pupils‚Ä¶ educ‚Ä¶ data‚Ä¶ 14.12.2021       08.02.2021       2013         2019      \n##  7 Pupils‚Ä¶ educ‚Ä¶ data‚Ä¶ 14.12.2021       08.02.2021       2013         2019      \n##  8 Pupils‚Ä¶ educ‚Ä¶ data‚Ä¶ 14.12.2021       08.02.2021       2013         2019      \n##  9 Pupils‚Ä¶ educ‚Ä¶ data‚Ä¶ 14.12.2021       08.02.2021       2013         2019      \n## 10 Studen‚Ä¶ educ‚Ä¶ data‚Ä¶ 14.12.2021       08.02.2021       2013         2019      \n## # ‚Ä¶ with 1,052 more rows, and 1 more variable: values <chr>\n# Accedemos a un dato concreto por codigo\nget_eurostat(\"hlth_ehis_de3\")## # A tibble: 1,536 √ó 6\n##    sex   age    isced97 geo   time       values\n##    <chr> <chr>  <chr>   <chr> <date>      <dbl>\n##  1 F     TOTAL  ED0-2   BE    2008-01-01   19.1\n##  2 F     TOTAL  ED3_4   BE    2008-01-01   20.2\n##  3 F     TOTAL  ED5_6   BE    2008-01-01   11.5\n##  4 F     TOTAL  TOTAL   BE    2008-01-01   17  \n##  5 F     Y15-24 ED0-2   BE    2008-01-01   17.1\n##  6 F     Y15-24 ED3_4   BE    2008-01-01   21.3\n##  7 F     Y15-24 ED5_6   BE    2008-01-01   10.3\n##  8 F     Y15-24 TOTAL   BE    2008-01-01   16.1\n##  9 F     Y25-34 ED0-2   BE    2008-01-01   29.3\n## 10 F     Y25-34 ED3_4   BE    2008-01-01   27.4\n## # ‚Ä¶ with 1,526 more rows"},{"path":"importar-exportar.html","id":"exportaci√≥n-de-datos","chapter":"Cap√≠tulo 8 Importando/exportando","heading":"8.2 Exportaci√≥n de datos","text":"Aunque se puede exportar en cualquier formato que puedas importar, vamos ver las dos formas m√°s √∫tiles y eficientes de exportar datos en R:fichero .RData.fichero .csv (obviaremos la exportaci√≥n Excel porque un .csv ya es posible abrirlo con dicho engendro del demonio).","code":""},{"path":"importar-exportar.html","id":"guardar-en-.rdata","chapter":"Cap√≠tulo 8 Importando/exportando","heading":"8.2.1 Guardar en .RData","text":"La exportaci√≥n en fichero .RData es la opci√≥n m√°s recomendable si t√∫ o tu equipo solo trabaj√°is con R, es la opci√≥n nativa de fichero, para que su importaci√≥n sea tan sencilla como una funci√≥n load(). Para exportar en R.Data basta con uses la funci√≥n save(), ind√≠candole lo que quieres guardar y la ruta donde quieres guardarlo.Es importante entender que la principal ventaja de exportar un fichero .RData es que se est√° portando una tabla, o un fichero tabulado con un formato de filas y columnas: est√°s exportando cualquier cosa, cualquier variable de R, con la naturaleza de esa variable intacta, sin necesidad de pasarlo otro formato.Para tenerlo organizado, la orden anterior est√° hecha habiendo creado en nuestra carpeta del proyecto una carpeta EXPORTAR para guardar lo que vayamos exportando. Ese fichero solo podr√° ser abierto por R, pero cuando lo cargemos, tendremos la variable nombres tal cual la hemos guardado.","code":"\n# Exportamos en .RData la variable nombres \nsave(nombres, file = \"./EXPORTAR/nombres.RData\")"},{"path":"importar-exportar.html","id":"guardar-en-.csv","chapter":"Cap√≠tulo 8 Importando/exportando","heading":"8.2.2 Guardar en .csv","text":"siempre trabajamos en R y veces necesitamos una exportaci√≥n de un data.frame o una tabla que podamos abrir en nuestra ordenador, ya sea para explic√°rsela alguien o para envi√°rsela otra persona. Para ello exportaremos en .csv, un fichero sin formato, y que es capaz de ser abierto por todo tipo de hojas de c√°lculo: basta que usemos la funci√≥n write.csv() del paquete readr.¬†WARNING: l√≠neas de c√≥digo en los erroresDado que los errores del c√≥digo nos vendr√°n referenciados en la consola por el n√∫mero de l√≠nea donde fueron detectados, puede sernos muy √∫til mostrar dichos n√∫meros en la barra lateral izquierda, yendo Tools << Global Options << Code << Display << Show line numbers\nImagen/gr√°fica 8.4: L√≠neas de c√≥digo.\n","code":"\n# Exportamos en .csv el data.frame tabla\nwrite_csv(tabla, file = \"./EXPORTAR/tabla.csv\")"},{"path":"importar-exportar.html","id":"consejos-7","chapter":"Cap√≠tulo 8 Importando/exportando","heading":"8.3 Consejos","text":"CONSEJOS¬†Paquete rvestEn dicho paquete tienes m√°s funciones para una lectura directamente como si navegaras por una p√°gina web. Ver https://github.com/tidyverse/rvest.¬†Margen derecho en la ventana de scriptsAunque afecte nuestro c√≥digo escribir todo en una l√≠nea sin saltos de l√≠nea, somos b√°rbaros/. ¬øPor qu√© cuadno escribes en un Word lo haces en formato vertical pero cuando programas pones todas las √≥rdenes seguidas? Recuerda que la legibilidad de tu c√≥digo solo te ahorrar√° tiempo sino que te har√° programar mejor. ¬øC√≥mo podemos fijar un margen imaginario para nosotros ser quienes demos al ENTER? Yendo Tools << Global Options << Code << Display << Show margin (es un margen imaginario para ser nosotros quienes lo hagamos efectivo, R le da igual)\nImagen/gr√°fica 8.5: Margen derecho.\n","code":"\n# Ejemplo cargando datos de una tabla de wikipedia: \n# encuestas elecciones alemanas 2021\nlibrary(rvest)\nlibrary(tidyverse)\nwiki <- paste0(\"https://es.wikipedia.org/wiki/\",\n              \"Elecciones_federales_de_Alemania_de_2021\")\nhtml<- read_html(wiki)\ndatos <- html_nodes(html,\".wikitable\")\n\n# Tabla (tibble) (e ignoramos filas con alg√∫n valores ausentes)\nresultados_encuestas <-\n  html_table(datos[[5]], header = TRUE) %>% drop_na()\n\n# Resumen de columnas: casa encuestadora, fecha, muestra, partidos\nglimpse(resultados_encuestas)## Rows: 122\n## Columns: 10\n## $ Encuesta  <chr> \"Wahlkreisprognose[84]\", \"Ipsos[85]\", \"Forschungsgruppe Wahl‚Ä¶\n## $ Fecha     <chr> \"22‚Äì24 Sep 2021\", \"22‚Äì23 Sep 2021\", \"22‚Äì23 Sep 2021\", \"20‚Äì23‚Ä¶\n## $ Muestra   <chr> \"1,400\", \"2,000\", \"1,273\", \"2,002\", \"1,554\", \"10,012\", \"2,36‚Ä¶\n## $ SPD       <dbl> 25.5, 26.0, 25.0, 25.0, 26.0, 25.0, 25.0, 25.0, 25.0, 25.0, ‚Ä¶\n## $ `CDU/CSU` <dbl> 22.5, 22.0, 23.0, 22.0, 25.0, 23.0, 21.0, 21.5, 21.0, 22.0, ‚Ä¶\n## $ Gr√ºne     <dbl> 14.0, 16.0, 16.5, 17.0, 16.0, 16.0, 14.0, 15.0, 16.0, 15.0, ‚Ä¶\n## $ FDP       <dbl> 12.0, 12.0, 11.0, 12.0, 10.5, 12.0, 11.0, 12.5, 11.0, 12.0, ‚Ä¶\n## $ AfD       <dbl> 11.0, 11.0, 10.0, 10.0, 10.0, 10.0, 12.0, 11.0, 11.0, 11.0, ‚Ä¶\n## $ Linke     <dbl> 7.0, 7.0, 6.0, 6.0, 5.0, 6.0, 7.0, 6.5, 7.0, 6.5, 6.0, 6.0, ‚Ä¶\n## $ Otros     <chr> \"8\", \"6\", \"8.5\", \"8\", \"7.5\", \"8\", \"9\", \"8.5\", \"9\", \"8.5\", \"8‚Ä¶"},{"path":"listas.html","id":"listas","chapter":"Cap√≠tulo 9 Listas","heading":"Cap√≠tulo 9 Listas","text":"Hasta ahora hemos hecho un resumen de los elementos b√°sicos de R:vectores: colecci√≥n de elementos de igual tipo. Recuerda que un elemento individual, por ejemplo x <- 1, es en realidad un vector (de longitud 1). Pueden ser n√∫meros, caracteres, fechas o valores l√≥gicos, entre otros.vectores: colecci√≥n de elementos de igual tipo. Recuerda que un elemento individual, por ejemplo x <- 1, es en realidad un vector (de longitud 1). Pueden ser n√∫meros, caracteres, fechas o valores l√≥gicos, entre otros.matrices: colecci√≥n BIDIMENSIONAL de elementos de igual tipo e igual longitud.matrices: colecci√≥n BIDIMENSIONAL de elementos de igual tipo e igual longitud.data.frame: colecci√≥n BIDIMENSIONAL de elementos de igual longitud pero de cualquier tipo, lo m√°s parecido lo que conocemos como una tabla en Excel.data.frame: colecci√≥n BIDIMENSIONAL de elementos de igual longitud pero de cualquier tipo, lo m√°s parecido lo que conocemos como una tabla en Excel.Adem√°s hemos visto una serie de herramientas para tratar esos datos:estructuras condicionalesif-elsebucles para repetir trozos de c√≥digo.organizar el c√≥digo en proyectos para facilitar nuestro trabajoimportar/exportar datosCon todos estos ingredientes estamos preparados/para ver el que probablemente sea el tipo de dato m√°s importante en R: las listas.Las listas son colecciones de variables de diferente tipo pero que pueden ser tambi√©n de diferente longitud, con estructuras totalmente heter√≥geneas, de ah√≠ que sea el formato de salida de much√≠simas funciones de R que te devuelven la vez un cadena de texto, un vector de n√∫meros o una tabla, todo guardado en la misma variable (incluso una lista puede tener dentro su vez otra lista).Vamos crear nuestra primera lista con tres elementos: el nombre de nuestros padres/madres, nuestro lugar de nacimiento y edades de nuestros hermanos.Si observas el objeto que hemos definido como lista, la longitud del objeto es de 3: tenemos guardados tres elementosun vector de caracteres (de longitud 2)un caracter (vector de longitud 1)un vector de n√∫meros (de longitud 3)Tenemos guardados elementos de distinto tipo (algo que ya pod√≠amos con los data.frame pero de longitudes dispares).Para acceder un elemento de la lista tenemos dos opciones:Acceder por √≠ndice: con el operador [[]] accedemos al elemento -√©simo de la lista.Acceder por √≠ndice: con el operador [[]] accedemos al elemento -√©simo de la lista.Acceder por nombre: con el operador $nombre_elemento accedemos al elemento por su nombreAcceder por nombre: con el operador $nombre_elemento accedemos al elemento por su nombreDada su heterogeneidad y flexibilidad, para acceder un elemento particular, las listas tienen una forma peculiar de acceder (con el corchete doble, en contraposici√≥n con el corchete simple que nos permite acceder varios elementos la vez)Las listas nos dan tanta flexibilidad que es el formato de dato natural para guardar datos que est√°n estructurados, como pueden ser los datos almacenados en el registro de una personaHemos creado ahora una lista algo m√°s compleja de 4 elementos:nacimiento: una fecha.notas_insti: un data.frame.tel√©fonos: vector de n√∫meros.nombre_padres: vector de texto.Como hemos comentado, tambi√©n podemos aplicar la recursividad y hacer listas con otras listas dentro, de forma que para acceder cada nivel deberemos usar el operador [[]].Un ejemplo de la utilidad de las listas la tenemos en los archivos R.Data de vacunas que hemos cargado en nuestro script. Con names(panel_vacunas) podemos ver que elementos contiene en el primer nivel.Cada elemento de la lista es un data.frame de una comunidad auton√≥noma, que su vez contiene una serie de variables (columnas) para cada una de las fechas (filas): ¬°nos permite guardar ¬´datos n-imensionales¬ª!.El acceso lo podemos realizar por orden que ocupa en la lista pero tambi√©n de forma intuitiva con $ y el c√≥digo ISO de la comunidad aut√≥noma. Lo mismo podemos hacer con el panel de fechas, donde ahora cada elemento de la lista es una fecha, y en cada elemento de ella, est√° guardada la informaci√≥n de cada variable (columna) y cada comunidad (fila).¬†WARNING: operaciones aritm√©ticas con listasUna lista se puede vectorizar de forma inmediata, por lo cualquier operaci√≥n aritm√©tica aplicada una lista dar√° error (para ello est√° disponible la funci√≥n lapply(), cuyo uso corresponde otros cursos m√°s avanzados).¬†","code":"\nvariable_1 <- c(\"Paloma\", \"Gregorio\")\nvariable_2 <- \"Madrid\"\nvariable_3 <- c(25, 30, 26)\n\nlista <- list(\"progenitores\" = variable_1,\n              \"lugar_nacimiento\" = variable_2,\n              \"edades_hermanos\" = variable_3)\nlista## $progenitores\n## [1] \"Paloma\"   \"Gregorio\"\n## \n## $lugar_nacimiento\n## [1] \"Madrid\"\n## \n## $edades_hermanos\n## [1] 25 30 26\nlength(lista)## [1] 3\ndim(lista) # devolver√° NULL al no tener dos dimensiones## NULL\nlength(lista)## [1] 3\nclass(lista) # de tipo lista## [1] \"list\"\n# Accedemos por √≠ndice\nlista[[1]]## [1] \"Paloma\"   \"Gregorio\"\n# Accedemos por nombre\nlista$progenitores## [1] \"Paloma\"   \"Gregorio\"\n# Varios elementos\nlista[1:2]## $progenitores\n## [1] \"Paloma\"   \"Gregorio\"\n## \n## $lugar_nacimiento\n## [1] \"Madrid\"\n# Fecha de nacimiento\nfecha_nacimiento <- as.Date(\"1989-09-10\")\n\n# Notas de asignaturas en primer y segundo parcial\nnotas <- data.frame(\"biolog√≠a\" = c(5, 7), \"f√≠sica\" = c(4, 5),\n                    \"matem√°ticas\" = c(8, 9.5))\nrow.names(notas) <- # Nombre a las filas\n  c(\"primer_parcial\", \"segundo_parcial\")\n\n# N√∫meros de tel√©fono\ntlf <- c(\"914719567\", \"617920765\", \"716505013\")\n\n# Nombres\npadres <- c(\"Juan\", \"Julia\")\n\n# Guardamos TODO en una lista (con nombres de cada elemento)\ndatos <- list(\"nacimiento\" = fecha_nacimiento,\n              \"notas_insti\" = notas, \"tel√©fonos\" = tlf,\n              \"nombre_padres\" = padres)\ndatos## $nacimiento\n## [1] \"1989-09-10\"\n## \n## $notas_insti\n##                 biolog√≠a f√≠sica matem√°ticas\n## primer_parcial         5      4         8.0\n## segundo_parcial        7      5         9.5\n## \n## $tel√©fonos\n## [1] \"914719567\" \"617920765\" \"716505013\"\n## \n## $nombre_padres\n## [1] \"Juan\"  \"Julia\"\nnames(datos)## [1] \"nacimiento\"    \"notas_insti\"   \"tel√©fonos\"     \"nombre_padres\"\nlength(datos)## [1] 4\ndatos[[1]]## [1] \"1989-09-10\"\ndatos$nacimiento## [1] \"1989-09-10\"\ndatos[[2]]##                 biolog√≠a f√≠sica matem√°ticas\n## primer_parcial         5      4         8.0\n## segundo_parcial        7      5         9.5\ndatos$notas_insti##                 biolog√≠a f√≠sica matem√°ticas\n## primer_parcial         5      4         8.0\n## segundo_parcial        7      5         9.5\nlista_de_listas <- list(\"lista_1\" = datos[3:4], \"lista_2\" = datos[1:2])\nnames(lista_de_listas) # Nombres de los elementos del primer nivel## [1] \"lista_1\" \"lista_2\"\nnames(lista_de_listas[[1]]) # Nombres de los elementos guardados en el primer elemento, que es a su vez una lista## [1] \"tel√©fonos\"     \"nombre_padres\"\nlista_de_listas[[1]][[1]] # Elemento 1 de la lista guardada como elemento 1 de la lista superior## [1] \"914719567\" \"617920765\" \"716505013\"\nnames(panel_vacunas)##  [1] \"AN\"   \"AR\"   \"AS\"   \"IB\"   \"CN\"   \"CB\"   \"CL\"   \"CM\"   \"CT\"   \"VC\"  \n## [11] \"EX\"   \"GA\"   \"RI\"   \"MD\"   \"MC\"   \"NC\"   \"PV\"   \"CE\"   \"ML\"   \"FFAA\"\n## [21] \"ES\"\nclass(panel_vacunas$ES)## [1] \"data.frame\"\nnames(panel_vacunas$ES)##  [1] \"fechas\"                              \n##  [2] \"ISO\"                                 \n##  [3] \"poblacion\"                           \n##  [4] \"porc_pobl_total\"                     \n##  [5] \"poblacion_mayor_16a\"                 \n##  [6] \"porc_pobl_total_mayor_16a\"           \n##  [7] \"dosis_entrega_pfizer\"                \n##  [8] \"dosis_entrega_astra\"                 \n##  [9] \"dosis_entrega_moderna\"               \n## [10] \"dosis_entrega_janssen\"               \n## [11] \"dosis_entrega\"                       \n## [12] \"dosis_entrega_100hab\"                \n## [13] \"porc_entregadas_sobre_total\"         \n## [14] \"dosis_diarias_entrega_pfizer\"        \n## [15] \"dosis_diarias_entrega_astra\"         \n## [16] \"dosis_diarias_entrega_moderna\"       \n## [17] \"dosis_diarias_entrega\"               \n## [18] \"dosis_7D_entrega_pfizer\"             \n## [19] \"dosis_7D_entrega_astra\"              \n## [20] \"dosis_7D_entrega_moderna\"            \n## [21] \"dosis_7D_entrega\"                    \n## [22] \"dosis_7D_entrega_100hab\"             \n## [23] \"dosis_admin\"                         \n## [24] \"dosis_primera\"                       \n## [25] \"dosis_pauta_completa\"                \n## [26] \"dosis_admin_100hab\"                  \n## [27] \"porc_admin_sobre_ccaa\"               \n## [28] \"porc_admin_vs_total\"                 \n## [29] \"dosis_diarias_admin\"                 \n## [30] \"dosis_diarias_admin_100hab\"          \n## [31] \"crec_diario_dosis_admin\"             \n## [32] \"dosis_diarias_primera\"               \n## [33] \"dosis_diarias_segunda\"               \n## [34] \"dosis_7D_admin\"                      \n## [35] \"dosis_7D_admin_100hab\"               \n## [36] \"crec_7D_dosis_admin\"                 \n## [37] \"porc_admin_vs_total_7D\"              \n## [38] \"personas_vacunadas\"                  \n## [39] \"personas_pauta_completa\"             \n## [40] \"personas_1dosis\"                     \n## [41] \"porc_personas_vacunadas\"             \n## [42] \"porc_personas_pauta_completa\"        \n## [43] \"porc_personas_vacunadas_16a\"         \n## [44] \"porc_personas_pauta_completa_16a\"    \n## [45] \"personas_vacunadas_diarias\"          \n## [46] \"personas_pauta_completa_diarias\"     \n## [47] \"porc_personas_vacunadas_diarias\"     \n## [48] \"porc_personas_pauta_completa_diarias\"\n## [49] \"personas_vacunadas_7D\"               \n## [50] \"personas_pauta_completa_7D\"          \n## [51] \"porc_personas_vacunadas_7D\"          \n## [52] \"porc_personas_pauta_completa_7D\"     \n## [53] \"porc_personas_vacunadas_16a_7D\"      \n## [54] \"porc_personas_pauta_completa_16a_7D\" \n## [55] \"crec_diario_personas_vacunadas\"      \n## [56] \"crec_7D_personas_vacunadas\"          \n## [57] \"crec_diario_personas_pauta_completa\" \n## [58] \"crec_7D_personas_pauta_completa\"     \n## [59] \"desv_porc_admin_vs_total\"            \n## [60] \"desv_dosis_entrega\"                  \n## [61] \"desv_porc_personas_vacunadas\"        \n## [62] \"desv_porc_personas_pauta_completa\"   \n## [63] \"fecha_30vacunados_ritmo7D\"           \n## [64] \"fecha_50vacunados_ritmo7D\"           \n## [65] \"fecha_70vacunados_ritmo7D\"           \n## [66] \"fecha_30inmunizados_ritmo7D\"         \n## [67] \"fecha_50inmunizados_ritmo7D\"         \n## [68] \"fecha_70inmunizados_ritmo7D\"         \n## [69] \"fecha_30inmunizados_16a_ritmo7D\"     \n## [70] \"fecha_50inmunizados_16a_ritmo7D\"     \n## [71] \"fecha_70inmunizados_16a_ritmo7D\"\nhead(panel_vacunas$ES[, 1:5])##        fechas ISO poblacion porc_pobl_total poblacion_mayor_16a\n## 1  2021-01-05  ES  47450795             100            40129822\n## 2  2021-01-06  ES  47450795             100            40129822\n## 21 2021-01-07  ES  47450795             100            40129822\n## 3  2021-01-08  ES  47450795             100            40129822\n## 11 2021-01-09  ES  47450795             100            40129822\n## 12 2021-01-10  ES  47450795             100            40129822\nnames(panel_vacunas_fecha)##   [1] \"2021-01-05\" \"2021-01-06\" \"2021-01-07\" \"2021-01-08\" \"2021-01-09\"\n##   [6] \"2021-01-10\" \"2021-01-11\" \"2021-01-12\" \"2021-01-13\" \"2021-01-14\"\n##  [11] \"2021-01-15\" \"2021-01-16\" \"2021-01-17\" \"2021-01-18\" \"2021-01-19\"\n##  [16] \"2021-01-20\" \"2021-01-21\" \"2021-01-22\" \"2021-01-23\" \"2021-01-24\"\n##  [21] \"2021-01-25\" \"2021-01-26\" \"2021-01-27\" \"2021-01-28\" \"2021-01-29\"\n##  [26] \"2021-01-30\" \"2021-01-31\" \"2021-02-01\" \"2021-02-02\" \"2021-02-03\"\n##  [31] \"2021-02-04\" \"2021-02-05\" \"2021-02-06\" \"2021-02-07\" \"2021-02-08\"\n##  [36] \"2021-02-09\" \"2021-02-10\" \"2021-02-11\" \"2021-02-12\" \"2021-02-13\"\n##  [41] \"2021-02-14\" \"2021-02-15\" \"2021-02-16\" \"2021-02-17\" \"2021-02-18\"\n##  [46] \"2021-02-19\" \"2021-02-20\" \"2021-02-21\" \"2021-02-22\" \"2021-02-23\"\n##  [51] \"2021-02-24\" \"2021-02-25\" \"2021-02-26\" \"2021-02-27\" \"2021-02-28\"\n##  [56] \"2021-03-01\" \"2021-03-02\" \"2021-03-03\" \"2021-03-04\" \"2021-03-05\"\n##  [61] \"2021-03-06\" \"2021-03-07\" \"2021-03-08\" \"2021-03-09\" \"2021-03-10\"\n##  [66] \"2021-03-11\" \"2021-03-12\" \"2021-03-13\" \"2021-03-14\" \"2021-03-15\"\n##  [71] \"2021-03-16\" \"2021-03-17\" \"2021-03-18\" \"2021-03-19\" \"2021-03-20\"\n##  [76] \"2021-03-21\" \"2021-03-22\" \"2021-03-23\" \"2021-03-24\" \"2021-03-25\"\n##  [81] \"2021-03-26\" \"2021-03-27\" \"2021-03-28\" \"2021-03-29\" \"2021-03-30\"\n##  [86] \"2021-03-31\" \"2021-04-01\" \"2021-04-02\" \"2021-04-03\" \"2021-04-04\"\n##  [91] \"2021-04-05\" \"2021-04-06\" \"2021-04-07\" \"2021-04-08\" \"2021-04-09\"\n##  [96] \"2021-04-10\" \"2021-04-11\" \"2021-04-12\" \"2021-04-13\" \"2021-04-14\"\n## [101] \"2021-04-15\" \"2021-04-16\" \"2021-04-17\" \"2021-04-18\" \"2021-04-19\"\n## [106] \"2021-04-20\" \"2021-04-21\" \"2021-04-22\" \"2021-04-23\"\nnames(panel_vacunas_fecha$`2021-04-23`)##  [1] \"ccaa\"                                \n##  [2] \"fechas\"                              \n##  [3] \"ISO\"                                 \n##  [4] \"poblacion\"                           \n##  [5] \"porc_pobl_total\"                     \n##  [6] \"poblacion_mayor_16a\"                 \n##  [7] \"porc_pobl_total_mayor_16a\"           \n##  [8] \"dosis_entrega_pfizer\"                \n##  [9] \"dosis_entrega_astra\"                 \n## [10] \"dosis_entrega_moderna\"               \n## [11] \"dosis_entrega_janssen\"               \n## [12] \"dosis_entrega\"                       \n## [13] \"dosis_entrega_100hab\"                \n## [14] \"porc_entregadas_sobre_total\"         \n## [15] \"dosis_diarias_entrega_pfizer\"        \n## [16] \"dosis_diarias_entrega_astra\"         \n## [17] \"dosis_diarias_entrega_moderna\"       \n## [18] \"dosis_diarias_entrega\"               \n## [19] \"dosis_7D_entrega_pfizer\"             \n## [20] \"dosis_7D_entrega_astra\"              \n## [21] \"dosis_7D_entrega_moderna\"            \n## [22] \"dosis_7D_entrega\"                    \n## [23] \"dosis_7D_entrega_100hab\"             \n## [24] \"dosis_admin\"                         \n## [25] \"dosis_primera\"                       \n## [26] \"dosis_pauta_completa\"                \n## [27] \"dosis_admin_100hab\"                  \n## [28] \"porc_admin_sobre_ccaa\"               \n## [29] \"porc_admin_vs_total\"                 \n## [30] \"dosis_diarias_admin\"                 \n## [31] \"dosis_diarias_admin_100hab\"          \n## [32] \"crec_diario_dosis_admin\"             \n## [33] \"dosis_diarias_primera\"               \n## [34] \"dosis_diarias_segunda\"               \n## [35] \"dosis_7D_admin\"                      \n## [36] \"dosis_7D_admin_100hab\"               \n## [37] \"crec_7D_dosis_admin\"                 \n## [38] \"porc_admin_vs_total_7D\"              \n## [39] \"personas_vacunadas\"                  \n## [40] \"personas_pauta_completa\"             \n## [41] \"personas_1dosis\"                     \n## [42] \"porc_personas_vacunadas\"             \n## [43] \"porc_personas_pauta_completa\"        \n## [44] \"porc_personas_vacunadas_16a\"         \n## [45] \"porc_personas_pauta_completa_16a\"    \n## [46] \"personas_vacunadas_diarias\"          \n## [47] \"personas_pauta_completa_diarias\"     \n## [48] \"porc_personas_vacunadas_diarias\"     \n## [49] \"porc_personas_pauta_completa_diarias\"\n## [50] \"personas_vacunadas_7D\"               \n## [51] \"personas_pauta_completa_7D\"          \n## [52] \"porc_personas_vacunadas_7D\"          \n## [53] \"porc_personas_pauta_completa_7D\"     \n## [54] \"porc_personas_vacunadas_16a_7D\"      \n## [55] \"porc_personas_pauta_completa_16a_7D\" \n## [56] \"crec_diario_personas_vacunadas\"      \n## [57] \"crec_7D_personas_vacunadas\"          \n## [58] \"crec_diario_personas_pauta_completa\" \n## [59] \"crec_7D_personas_pauta_completa\"     \n## [60] \"desv_porc_admin_vs_total\"            \n## [61] \"desv_dosis_entrega\"                  \n## [62] \"desv_porc_personas_vacunadas\"        \n## [63] \"desv_porc_personas_pauta_completa\"   \n## [64] \"fecha_30vacunados_ritmo7D\"           \n## [65] \"fecha_50vacunados_ritmo7D\"           \n## [66] \"fecha_70vacunados_ritmo7D\"           \n## [67] \"fecha_30inmunizados_ritmo7D\"         \n## [68] \"fecha_50inmunizados_ritmo7D\"         \n## [69] \"fecha_70inmunizados_ritmo7D\"         \n## [70] \"fecha_30inmunizados_16a_ritmo7D\"     \n## [71] \"fecha_50inmunizados_16a_ritmo7D\"     \n## [72] \"fecha_70inmunizados_16a_ritmo7D\"\nhead(panel_vacunas_fecha$`2021-04-23`[, 1:7])##     ccaa     fechas ISO poblacion porc_pobl_total poblacion_mayor_16a\n## 77    AN 2021-04-23  AN   8464411          17.838             7062213\n## 771   AR 2021-04-23  AR   1329391           2.802             1132764\n## 772   AS 2021-04-23  AS   1018784           2.147              901209\n## 773   IB 2021-04-23  IB   1171543           2.469              986279\n## 774   CN 2021-04-23  CN   2175952           4.586             1871033\n## 775   CB 2021-04-23  CB    582905           1.228              501384\n##     porc_pobl_total_mayor_16a\n## 77                     17.598\n## 771                     2.823\n## 772                     2.246\n## 773                     2.458\n## 774                     4.662\n## 775                     1.249\ndatos <- list(\"a\" = 1:5, \"b\" = 10:20)\ndatos / 2## Error in datos/2: argumento no-num√©rico para operador binario\nlapply(datos, FUN = function(x) { x / 2})## $a\n## [1] 0.5 1.0 1.5 2.0 2.5\n## \n## $b\n##  [1]  5.0  5.5  6.0  6.5  7.0  7.5  8.0  8.5  9.0  9.5 10.0"},{"path":"listas.html","id":"ejercicios-5","chapter":"Cap√≠tulo 9 Listas","heading":"9.1 üìù Ejercicios","text":"Ejercicio 1: define una lista de 4 elementos de tipos distintos y accede al segundo de ellos (yo incluir√© uno que sea un data.frame para que veas que en una lista cabe de todo).Soluci√≥n:¬†Ejercicio 2: accede los elementos que ocupan los lugares 1 y 4 de la lista definida anteriormente.Soluci√≥n:Otra opci√≥n es acceder con los nombres¬†Ejercicio 3: define una lista de 4 elementos que contenga, en una sola variable, tu nombre, apellido, edad (como dato num√©rico) y si est√°s soltero/.Soluci√≥n:","code":"\n# Ejemplo: lista con texto, num√©rico, l√≥gico y un data.frame\nlista_ejemplo <- list(\"nombre\" = \"Javier\", \"cp\" = 28019,\n                      \"soltero\" = TRUE,\n                      \"notas\" = data.frame(\"mates\" = c(7.5, 8, 9),\n                                           \"lengua\" = c(10, 5, 6),\n                                           \"gimnasia\" = c(4, 8, 6)))\nlista_ejemplo## $nombre\n## [1] \"Javier\"\n## \n## $cp\n## [1] 28019\n## \n## $soltero\n## [1] TRUE\n## \n## $notas\n##   mates lengua gimnasia\n## 1   7.5     10        4\n## 2   8.0      5        8\n## 3   9.0      6        6\n# Longitud\nlength(lista_ejemplo)## [1] 4\n# Accedemos al elemento dos\nlista_ejemplo[[2]]## [1] 28019\n# Accedemos al 1 y al 4\nlista_ejemplo[c(1, 4)]## $nombre\n## [1] \"Javier\"\n## \n## $notas\n##   mates lengua gimnasia\n## 1   7.5     10        4\n## 2   8.0      5        8\n## 3   9.0      6        6\n# Accedemos al 1 y al 4\nlista_ejemplo$nombre## [1] \"Javier\"\nlista_ejemplo$notas##   mates lengua gimnasia\n## 1   7.5     10        4\n## 2   8.0      5        8\n## 3   9.0      6        6\nlista_ejemplo[c(\"nombre\", \"notas\")]## $nombre\n## [1] \"Javier\"\n## \n## $notas\n##   mates lengua gimnasia\n## 1   7.5     10        4\n## 2   8.0      5        8\n## 3   9.0      6        6\nlibrary(lubridate)\n# Creamos lista: con lubridate calculamos la diferencia de a√±os desde la fecha de nuestro nacimiento hasta hoy (sea cuando sea hoy)\nlista_personal <- list(\"nombre\" = \"Javier\",\n                       \"apellidos\" = \"√Ålvarez Li√©bana\",\n                       \"edad\" = time_length(interval(ymd(\"1989-09-10\"), ymd(Sys.Date())), unit = \"years\"),\n                       \"soltero\" = TRUE)\nlista_personal## $nombre\n## [1] \"Javier\"\n## \n## $apellidos\n## [1] \"√Ålvarez Li√©bana\"\n## \n## $edad\n## [1] 32.28493\n## \n## $soltero\n## [1] TRUE\n# Otra opci√≥n: la edad calculada con floor (quita decimales y se queda con la parte entera)\nlista_personal <- list(\"nombre\" = \"Javier\",\n                       \"apellidos\" = \"√Ålvarez Li√©bana\",\n                       \"edad\" = floor(time_length(interval(ymd(\"1989-09-10\"), ymd(today())), unit = \"years\")),\n                       \"soltero\" = TRUE)\nlista_personal## $nombre\n## [1] \"Javier\"\n## \n## $apellidos\n## [1] \"√Ålvarez Li√©bana\"\n## \n## $edad\n## [1] 32\n## \n## $soltero\n## [1] TRUE"},{"path":"factores.html","id":"factores","chapter":"Cap√≠tulo 10 Factores","heading":"Cap√≠tulo 10 Factores","text":"¬øQu√© nos puede quedar m√°s all√° de las listas? Hay una forma de guardar los datos muy particular en R, que nos permite diferenciar variables por su contenido en s√≠ sino por lo que representan: hablemos de factoresLos factores la manera que tiene R para definir variables categ√≥ricas, tambi√©n llamadas cualitativas, variables que aunque puedan ser n√∫meros, en realidad representa categor√≠as (categor√≠a 1, 2, 3‚Ä¶). Algunos ejemplos de variables categ√≥ricas o cualitativas son las siguientes:Estado civil (soltero/casado/viudo)Diagn√≥stico del paciente (sano/leve/grave/fallecido)Religi√≥n (musulm√°n/cat√≥lico/ateo/budista)Pa√≠s (Espa√±a/Francia/Argentina)Notas (suspenso/aprobado/notable/sobresaliente)Colores (rojo/azul/verde)C√≥digo postal (28017/34001/18003/33009)¬øQu√© diferencias observas entre ellas?Si las observas, bien algunas de ellas tienen asignadas una jerarqu√≠a (orden), pesar de ser variables cualitativas. Es el caso de notas y diagn√≥stico, y son variables que llamamos variables cualitativas ordinales. En otros casos, se puede (ni se deber√≠a) establecer una jerarqu√≠a, como es el caso de estado civil, religi√≥n, pa√≠s, colores o c√≥digo postal, variables cualitativas nominales. Adem√°s esta √∫ltima es especial ya que es una varibale CUALItativa aunque est√© formada por n√∫meros: el c√≥digo postal, los DNI, las tarjetas sanitarias, son variables que permiten identificar registros, direcciones o inviduos, por lo que su naturaleza es cuantitativa (cuantifican ninguna cantidad) sino cualitativa.Esas variables cualitativas en R se llaman factores. Internamente los factores se guardan como variable num√©ricas enteras (enumerando las categor√≠as) pero se nos mostar√°n con el nombre asignada dicha categor√≠a. Para convertir una variable factor basta con ejecutar la funci√≥n factor(), que nos convierte cada valor diferente en una categor√≠a (para ver valores diferentes de un vector, usar la funci√≥n unique()).¬†WARNING: un factor es una CATEGOR√çA, un n√∫meroEs importante entender que un factor es una CATEGOR√çA, como rojo/blanco/negro, por lo que desde el momento en el que lo convertimos en factor, ya podemos hacer operaciones aritm√©ticas (podemos sumar categor√≠as, solo n√∫meros).¬†Como puedes observar, al tenerlo en factor, adem√°s de la variable en s√≠ se nos muestra debajo los levels, los niveles permitidos de las categor√≠as. Si le indicamos que nombres queremos, nos convierte los valores texto y lo toma como nombre de categor√≠a. Con el argumento labels podemos configurarlo nuestro gusto. Con la funci√≥n levels podemos reasignarle nombres tras su generaci√≥n.Aunque sirve tambi√©n para variables num√©ricas, la funci√≥n table() nos calcula las frecuencias de cada una de las categor√≠as, las veces que se repiten en nuestro conjunto (es una forma eficiente de guardar categor√≠as ya que solo se guardan los valores √∫nicos y el n√∫mero de veces que se repiten, as√≠ como su lugar).Una ventaja de los factores es que le podemos indicar que considere que las categor√≠as son ordinales con el argumento ordered = TRUE.Las variables cualitativas ordinales pueden ser comparadas al tener un orden.Y con summary() adem√°s podemos obtener un resumen de nuestras categor√≠asPara convertir de factor num√©rica (y poder operar aritm√©ticamente con ellos), basta usar la funci√≥n .numeric().Tambi√©n podemos convertir variables continuas (o discretas) factores indicando los rangos de las categor√≠as que queremos asignar con la funci√≥n cut(). Por ejemplo, supongamos que tenemos notas num√©ricas de clase y queremos asignar una nota categ√≥rica. En el argumento breaks debemos indicarle los cortes que queremos en los datos, teniendo n+1 valores, siendo n el n√∫mero de categor√≠as. Con right = FALSE le vamos indicar que los intervalos son abiertos por la derecha.Adem√°s, la funci√≥n cut() identifica los datos de tipo fecha, pudiendo hacer cortes por unidades temporales.","code":"\ndatos <- c(1, 2, 3, 1, 2, 3, 2, 3, 3, 1)\nunique(datos)## [1] 1 2 3\ndatos##  [1] 1 2 3 1 2 3 2 3 3 1\n# Convertimos a factor\ndatos_factor <- factor(datos) \ndatos_factor ##  [1] 1 2 3 1 2 3 2 3 3 1\n## Levels: 1 2 3\ndatos + 1##  [1] 2 3 4 2 3 4 3 4 4 2\ndatos_factor + 1##  [1] NA NA NA NA NA NA NA NA NA NA\ndatos_factor <-\n  factor(datos, labels = paste(\"Categor√≠a\", sort(unique(datos)))) # damos nombre de categor√≠a 1, 2, 3...\ndatos_factor ##  [1] Categor√≠a 1 Categor√≠a 2 Categor√≠a 3 Categor√≠a 1 Categor√≠a 2 Categor√≠a 3\n##  [7] Categor√≠a 2 Categor√≠a 3 Categor√≠a 3 Categor√≠a 1\n## Levels: Categor√≠a 1 Categor√≠a 2 Categor√≠a 3\n# Renombramos si queremos\nlevels(datos_factor) <- c(\"C1\", \"C2\", \"C3\")\ndatos_factor##  [1] C1 C2 C3 C1 C2 C3 C2 C3 C3 C1\n## Levels: C1 C2 C3\ntable(datos_factor)## datos_factor\n## C1 C2 C3 \n##  3  3  4\nnotas <- c(7, 2, 10, 5, 7, 8, 10, 8, 2, 2, 5, 5, 5, 10) # notas de clase: tienen un orden\nnotas_factor <- factor(notas)\nnotas_factor[1] < notas_factor[2]## [1] NA\nnotas_factor_ordenados <- factor(notas, ordered = TRUE)\nnotas_factor_ordenados##  [1] 7  2  10 5  7  8  10 8  2  2  5  5  5  10\n## Levels: 2 < 5 < 7 < 8 < 10\nnotas_factor_ordenados[1] < notas_factor_ordenados[2] # nos dice que la categor√≠a 7 no es menor que la categor√≠a 2## [1] FALSE\nsummary(notas_factor_ordenados)##  2  5  7  8 10 \n##  3  4  2  2  3\nnotas_factor_ordenados + 1##  [1] NA NA NA NA NA NA NA NA NA NA NA NA NA NA\nas.numeric(notas_factor_ordenados) + 1##  [1] 4 2 6 3 4 5 6 5 2 2 3 3 3 6\nmean(as.numeric(notas_factor_ordenados))## [1] 2.857143\nnotas <- c(7.4, 1.1, 2.9, 10, 5.2, 7.7, 8.9, 10, 8.1, 2.6, 2.4, 5.5, 5, 5, 10, 6.3, 9.4) # notas de clase\nnotas_categoricas <- cut(notas, breaks = c(0, 5, 7, 9, 10, 10.1), labels = c(\"suspenso\", \"aprobado\", \"notable\", \"sobresaliente\", \"mh\"), right = FALSE)\nnotas_categoricas##  [1] notable       suspenso      suspenso      mh            aprobado     \n##  [6] notable       notable       mh            notable       suspenso     \n## [11] suspenso      aprobado      aprobado      aprobado      mh           \n## [16] aprobado      sobresaliente\n## Levels: suspenso aprobado notable sobresaliente mh\nfechas <- as.Date(c(\"2021-04-10\", \"2021-03-10\", \"2021-01-01\", \"2020-01-15\", \"2020-09-10\", \"2020-09-15\", \"2020-07-08\"))\nfechas_cortes <- cut(fechas, breaks = \"year\")\nlevels(fechas_cortes) <- c(\"2020\", \"2021\")\nfechas_cortes## [1] 2021 2021 2021 2020 2020 2020 2020\n## Levels: 2020 2021"},{"path":"factores.html","id":"consejos-8","chapter":"Cap√≠tulo 10 Factores","heading":"10.1 Consejos","text":"CONSEJOS¬†Paquete forcatsEn dicho paquete tienes muchas funcionalidades para trabajar con factores. Ver https://forcats.tidyverse.org/.\nImagen/gr√°fica 10.1: Paquete lubridate.\n¬†","code":""},{"path":"factores.html","id":"ejercicios-6","chapter":"Cap√≠tulo 10 Factores","heading":"10.2 üìù Ejercicios","text":"Ejercicio 1: define una variable de 5 elementos con los valores vector_char <- c(\"H\", \"H\", \"M\", \"H\", \"M\", \"M\", \"H\"). Convierte la variable factor, y renombra los niveles como \"Hombre\" y \"Mujer\".Soluci√≥n:¬†Ejercicio 2: define un vector con nombres de algunos animales y convierte el vector factor.Soluci√≥n:¬†Ejercicio 3: define un vector con las notas notas_char <- c(\"Suspenso\", \"Aprobado\", \"Notable\", \"Sobresaliente\", \"Matr√≠cula\") y convi√©rtelo factor. OJO: ¬øes una variable cualitativa nominal u ordinal? Calcula el resumen de la variable.Soluci√≥n:¬†Ejercicio 4: de la variable notas_char anterior compara el elemento segundo y el cuarto.Soluci√≥n:","code":"\n# Vector de caracteres\nvector_char <- c(\"H\", \"H\", \"M\", \"H\", \"M\", \"M\", \"H\")\nvector_char## [1] \"H\" \"H\" \"M\" \"H\" \"M\" \"M\" \"H\"\nclass(vector_char)## [1] \"character\"\n# Convertimos a factor\nvector_factor <- factor(vector_char)\nvector_factor## [1] H H M H M M H\n## Levels: H M\nclass(vector_factor)## [1] \"factor\"\n# Renombramos niveles\nlevels(vector_factor) <- c(\"Hombre\", \"Mujer\")\nvector_factor## [1] Hombre Hombre Mujer  Hombre Mujer  Mujer  Hombre\n## Levels: Hombre Mujer\n# Ejemplo\nanimales_char <- c(\"perro\", \"gato\", \"p√°jaro\", \"perro\", \"loro\", \"gato\", \"perro\", \"le√≥n\")\nanimales_char## [1] \"perro\"  \"gato\"   \"p√°jaro\" \"perro\"  \"loro\"   \"gato\"   \"perro\"  \"le√≥n\"\nclass(animales_char)## [1] \"character\"\n# Convertimos a factor\nanimales_vector <- factor(animales_char)\nanimales_vector## [1] perro  gato   p√°jaro perro  loro   gato   perro  le√≥n  \n## Levels: gato le√≥n loro p√°jaro perro\nclass(animales_vector)## [1] \"factor\"\n# Notas (es ordinal)\nnotas_char <- c(\"Aprobado\", \"Suspenso\", \"Sobresaliente\", \"Notable\",\n                \"Matr√≠cula\", \"Aprobado\", \"Aprobado\", \"Notable\",\n                \"Suspenso\", \"Sobresaliente\",\n                \"Matr√≠cula\", \"Suspenso\")\nnotas_char ##  [1] \"Aprobado\"      \"Suspenso\"      \"Sobresaliente\" \"Notable\"      \n##  [5] \"Matr√≠cula\"     \"Aprobado\"      \"Aprobado\"      \"Notable\"      \n##  [9] \"Suspenso\"      \"Sobresaliente\" \"Matr√≠cula\"     \"Suspenso\"\n# Convertimos a factor ORDENADO\nnotas_factor <-\n  factor(notas_char, order = TRUE,\n         levels =  c(\"Suspenso\", \"Aprobado\", \"Notable\", \n                     \"Sobresaliente\", \"Matr√≠cula\"))\nnotas_factor##  [1] Aprobado      Suspenso      Sobresaliente Notable       Matr√≠cula    \n##  [6] Aprobado      Aprobado      Notable       Suspenso      Sobresaliente\n## [11] Matr√≠cula     Suspenso     \n## Levels: Suspenso < Aprobado < Notable < Sobresaliente < Matr√≠cula\n# Resumen\nsummary(notas_factor)##      Suspenso      Aprobado       Notable Sobresaliente     Matr√≠cula \n##             3             3             2             2             2\nnotas_factor[2] < notas_factor[4]## [1] TRUE\nnotas_factor[2] > notas_factor[4]## [1] FALSE"},{"path":"funciones.html","id":"funciones","chapter":"Cap√≠tulo 11 Creaci√≥n de funciones","heading":"Cap√≠tulo 11 Creaci√≥n de funciones","text":"En R solo podemos usar las funciones predeterminadas que vienen ya cargadas, o las de los paquetes que instalamos, sino que adem√°s podemos crear nuestras propias funciones, para automatizar tareas que vayamos repetir lo largo de nuestro c√≥digo.¬øC√≥mo crear nuestra propia funci√≥n? Veamos su sintaxis b√°sica. Para crear una funci√≥n necesitamos un nombre, por ejemplo nombre_funcion (sin espacios ni caracteres extra√±os), al que le asignamos la orden function(). Dentro de function() tendr√≠amos que definir los argumentos de entrada que vamos usar.argumento_1, argumento_2, ‚Ä¶: ser√°n los argumentos de entrada, los argumentos que toma la funci√≥n para ejecutar el c√≥digo que tiene dentroc√≥digo: l√≠neas de c√≥digo que queramos que ejecute la funci√≥n. IMPORTANTE: todas las variables que definamos dentro de la funci√≥n son variables locales, solo existir√°n dentro de la funci√≥n salvo que especifiquemos lo contrario.return(variable_salida): dentro del comando return() se introducir√° la salida de la funci√≥n, que puede ser un n√∫mero, un data.frame, una gr√°fica, una matriz‚Ä¶ o todo junto en una lista.","code":"\nnombre_funcion <- function(argumento_1, argumento_2, ... ) {\n  \n  # C√≥digo que queramos ejecutar en la funci√≥n\n  c√≥digo\n  \n  # Salida\n  return(variable_salida)\n}"},{"path":"funciones.html","id":"primera-funci√≥n","chapter":"Cap√≠tulo 11 Creaci√≥n de funciones","heading":"11.1 Primera funci√≥n","text":"Veamos un ejemplo muy simple de funci√≥n para calcular el √°rea de un rect√°ngulo: dados dos lados lado_1 y lado_2, deber√° devolver el √°rea como su producto.Tambi√©n podemos hacer la definici√≥n directa sin almacenar variables.¬øC√≥mo aplicar la funci√≥n? Con el nombre y los valores de los argumentos.Imagina ahora que nos damos cuenta que el 90% de las veces el √°rea que nos toca calcular es la de un cuadrado: R nos permite definir argumentos en la funci√≥n con valores por defecto (tomar√°n dicho valor salvo que le asignemos otro). ¬øPor qu√© asignar lado_2 = lado_1 por defecto, para ahorrar l√≠neas de c√≥digo y tiempo?Compliquemos un poco la funci√≥n y a√±adamos en la salida los valores de cada lado etiquetados como primer lado y segundo lado.Veamos que nos devuelve ahoraF√≠jate que puedes guardar la salida de forma conjunta para luego acceder solo uno de los elementos de la lista de salida.Antes nos daba igual el orden de los argumentos pero ahora , ya que en la salida incluimos lado_1 y lado_2. Es altamente recomendable hacer la llamada la funci√≥n indicando expl√≠citamente los argumentos argumento_1 = valor_1 para mejorar la legibilidad e interpretabilidad de nuestro c√≥digo (recuerda: programa como escribir√≠as una novela).","code":"\n# Definici√≥n del nombre de funci√≥n y argumentos de entrada\ncalcular_area <- function(lado_1, lado_2) {\n  \n  # Cuerpo de la funci√≥n\n  area <- lado_1 * lado_2\n  \n  # Resultado que devolvemos\n  return(area)\n  \n}\n# Definici√≥n del nombre de funci√≥n y argumentos de entrada\ncalcular_area <- function(lado_1, lado_2) {\n\n  # Resultado que devolvemos\n  return(lado_1 * lado_2)\n  \n}\n# Aplicaci√≥n de la funci√≥n con los par√°metros por defecto\ncalcular_area(5, 3) # √°rea de un rect√°ngulo 5 x 3 ## [1] 15\n# Definici√≥n del nombre de funci√≥n y argumentos de entrada\ncalcular_area <- function(lado_1, lado_2 = lado_1) {\n  \n  # Cuerpo de la funci√≥n\n  area <- lado_1 * lado_2\n  \n  # Resultado que devolvemos\n  return(area)\n  \n}\ncalcular_area(lado_1 = 5) # si no indicamos nada, lado_2 = lado_1## [1] 25\n# Definici√≥n del nombre de funci√≥n y argumentos de entrada\ncalcular_area <- function(lado_1, lado_2 = lado_1) {\n  \n  # Cuerpo de la funci√≥n\n  area <- lado_1 * lado_2\n  \n  # Resultado que devolvemos en modo lista ya que devolvemos\n  # varios argumentos a la vez (podemos dar a cada elemento \n  # de la lista con un nombre que nos permita identificarlo)\n  return(list(\"area\" = area, \"lado_1\" = lado_1, \"lado_2\" = lado_2))\n  \n}\ncalcular_area(5, 3)## $area\n## [1] 15\n## \n## $lado_1\n## [1] 5\n## \n## $lado_2\n## [1] 3\nx <- calcular_area(5, 3)\nx$area## [1] 15\nx$lado_1## [1] 5\nx$lado_2## [1] 3\ncalcular_area(lado_1 = 5, lado_2 = 3)## $area\n## [1] 15\n## \n## $lado_1\n## [1] 5\n## \n## $lado_2\n## [1] 3"},{"path":"funciones.html","id":"segunda-funci√≥n","chapter":"Cap√≠tulo 11 Creaci√≥n de funciones","heading":"11.2 Segunda funci√≥n","text":"Vayamos con un ejemplo m√°s complejo. Imaginemos que en nuestro c√≥digo vamos tener calcular, para cada d√≠a, el n√∫mero de vacunas diarias administradas, el n√∫mero de vacunas administradas en los √∫ltimos 7 d√≠as y el n√∫mero de vacunadas administradas en los √∫ltimos 14 d√≠as, usando tan solo el n√∫mero de vacunadas acumuladas. Para ello vamos usar la funci√≥n diff() que nos calcula las diferencias de un vector dado.¬øCu√°nto ocupar√≠a realizar esta misma tarea para cada comunidad, y cada variable? ¬øPor qu√© la automatizamos?Como vemos, los argumentos pueden ser cualquier tipo de variable, y nos permite adem√°s generalizar y automatizar una tarea para que pueda ser usada incluso en alg√∫n escenario para el que tuvi√©ramos previsto (acumulados ‚Ä¶ 13 d√≠as, por ejemplo). Para que nuestra funci√≥n sea realmente √∫til debemos intentar asignar nombres de funciones y argumentos lo m√°s concisos posibles y evidentes en su interpretaci√≥n.F√≠jate que hemos devuelto solo el √∫ltimo acumulado (hemos dado la vuelta al vector resultante y nos hemos quedado con el primer elemento). Para hacer que la salida sea m√°s interpretable, muchas de las funciones en R tienen como salida una lista, con unos nombres asignados.","code":"\nvacunas <- c(50, 60, 71, 52, 63, 40, 77, 50, 65, 70,\n             90, 100, 73, 48, 250, 200, 124)\ndiff(vacunas) # vector con [elemento2 - elemento1, elemento3 - elemento2, elemento4 - elemento3, ...]##  [1]  10  11 -19  11 -23  37 -27  15   5  20  10 -27 -25 202 -50 -76\ndiff(vacunas, 3) # vector con [elemento4 - elemento1, elemento5 - elemento2, elemento6 - elemento3, ...]##  [1]   2   3 -31  25 -13  25  -7  40  35   3 -42 150 127  76\ndiff(vacunas, 7) # vector con [elemento8 - elemento1, elemento9 - elemento2, elemento10 - elemento3, ...]##  [1]   0   5  -1  38  37  33 -29 200 135  54\n# Para Espa√±a\ndatos_diarios <- diff(vacunas)\ndatos_7D <- diff(vacunas, 7) # diferencias a 7 d√≠as\ndatos_14D <- diff(vacunas, 14) # diferencias a 14 d√≠as\ndatos_acumulados <- function(variable_acumulada, dias_dif = c(1, 7, 14)) {\n  \n  # Dentro de las llaves el cuerpo de la funci√≥n\n  acumulados_diferenciales <- NULL\n  for (i in dias_dif) { # Vamos calculando tantos acumulados diferenciales como le hayamos pasado por el argumento dias_dif\n    \n    # A lo que ten√≠amos, le concatenamos por columnas uno nuevo\n    acumulados_diferenciales <- c(acumulados_diferenciales,\n                                  rev(diff(variable_acumulada, i))[1])\n  \n  }\n  \n  # La salida de la funci√≥n\n  return(acumulados_diferenciales)\n}\ndatos_acumulados(vacunas)## [1] -76  54  53\ndatos_acumulados(vacunas)## [1] -76  54  53\ndatos_acumulados(vacunas, dias_dif = c(1, 3, 13, 15))## [1] -76  76  72  64\ndatos_acumulados <- function(variable_acumulada) {\n  \n  # Datos\n  dato_diario <- diff(variable_acumulada)\n  dato_7D <- diff(variable_acumulada, 7)\n  dato_14D <- diff(variable_acumulada, 14)\n\n  # La salida de la funci√≥n como una lista, con 3 vectores\n  return(list(\"diario\" = dato_diario, \"7D\" = dato_7D,\n              \"14D\" = dato_14D))\n}\ndatos_salida <- datos_acumulados(vacunas)\nnames(datos_salida)## [1] \"diario\" \"7D\"     \"14D\"\ndatos_salida## $diario\n##  [1]  10  11 -19  11 -23  37 -27  15   5  20  10 -27 -25 202 -50 -76\n## \n## $`7D`\n##  [1]   0   5  -1  38  37  33 -29 200 135  54\n## \n## $`14D`\n## [1] 200 140  53"},{"path":"funciones.html","id":"variables-localesglobales","chapter":"Cap√≠tulo 11 Creaci√≥n de funciones","heading":"11.3 Variables locales/globales","text":"Hemos dicho que ¬´lo local se queda en lo local¬ª, ¬øpero qu√© sucede si nombramos una variable dentro de una funci√≥n que se nos ha olvidado asignar un valor dentro de la misma? Debemos ser cautos al usar funciones en R, ya que debido la ¬´regla lexicogr√°fica¬ª, si una variable se define dentro de la funci√≥n, R buscar√° dicha variable en el entorno de variable.Si una variable ya est√° definida fuera de la funci√≥n (entorno global), y adem√°s es usada dentro de la misma cambiando su valor, el valor de dicha variable solo cambia dentro de la funci√≥n pero en el entorno global.Si queremos que adem√°s de cambiar localmente lo haga globalmente deberemos usar la doble asignaci√≥n (<<-).","code":"\nx <- 1\nfuncion_ejemplo <- function() {\n    \n  print(x) # No devuelve nada per se, solo realiza la acci√≥n de imprimir en consola\n}\nfuncion_ejemplo()## [1] 1\nx <- 1\nfuncion_ejemplo <- function() {\n    \n  x <- 2\n  print(x) # lo que vale dentro\n}\nfuncion_ejemplo() # lo que vale dentro## [1] 2\nprint(x) # lo que vale fuera## [1] 1\nx <- 1\ny <- 2\nfuncion_ejemplo <- function() {\n  \n  x <- 3 # no cambia globalmente, solo localmente\n  y <<- 0 # cambia globalmente\n  print(x)\n  print(y)\n}\n\nfuncion_ejemplo() # lo que vale dentro## [1] 3\n## [1] 0\nx # lo que vale fuera## [1] 1\ny # lo que vale fuera## [1] 0"},{"path":"funciones.html","id":"ejercicios-7","chapter":"Cap√≠tulo 11 Creaci√≥n de funciones","heading":"11.4 üìù Ejercicios","text":"Ejercicio 1: define una funci√≥n propia llamada pares que, dados dos n√∫meros x e y, nos diga si la suma de ambos es par o .Soluci√≥n:Tambi√©n se puede definir directamente como¬†Ejercicio 2: define una funci√≥n propia llamada proximo_par que, dados un n√∫mero x, nos diga si es par y, en aso de serlo, nos devuelva el pr√≥ximo n√∫mero que si lo sea.Soluci√≥n:","code":"\n# Definimos funci√≥n\npares <- function(x, y) {\n  \n  # Sumamos\n  suma <- x + y\n  \n  # Comprobamos si es par calculando el resto al dividir entre 2: si al dividir suma entre 2 el resto es 0 ==> es par\n  \n  par <- suma %% 2 == 0\n  \n  # Devolvemos la salida\n  return(par)\n}\n\n# Aplicamos la funci√≥n\npares(1, 3)## [1] TRUE\npares(1, 0)## [1] FALSE\npares(2, 6)## [1] TRUE\npares(2, 7)## [1] FALSE\n# Definimos funci√≥n\npares <- function(x, y) {\n\n  # Devolvemos la salida\n  return((x + y) %% 2 == 0)\n}\n\npares(1, 3)## [1] TRUE\npares(1, 0)## [1] FALSE\npares(2, 6)## [1] TRUE\npares(2, 7)## [1] FALSE\n# Definimos funci√≥n\nproximo_par <- function(x) {\n  \n  # ¬øpar? TRUE/FALSE\n  par <- (x %% 2) == 0\n  \n  # Si es par, devolvemos el propio n√∫mero (era par), sino le sumamos uno\n  if (par) {\n    \n    return(list(\"par\" = par, \"proximo\" = x))\n    \n  } else { # Si no es par, devolvemos el siguiente (que ser√° par) \n    \n    return(list(\"par\" = par, \"proximo\" = x + 1))\n  \n  }\n  # Devolvemos una lista de dos elementos: par (TRUE/FALSE) y proximo (si es par, el propio x, sino x + 1)\n}\n\n# Aplicamos la funci√≥n\nproximo_par(7)## $par\n## [1] FALSE\n## \n## $proximo\n## [1] 8\nproximo_par(8)## $par\n## [1] TRUE\n## \n## $proximo\n## [1] 8"},{"path":"tidydata.html","id":"tidydata","chapter":"Cap√≠tulo 12 Tidy data: ordenando datos","heading":"Cap√≠tulo 12 Tidy data: ordenando datos","text":"Empieza lo interesante :)\nImagen/gr√°fica 12.1: Flujo deseable de datos seg√∫n Hadley Wickham, extra√≠da de https://r4ds..co.nz/wrangle-intro.html\nF√≠jate bien en el anterior flujo de trabajo: aunque el objetivo de este manual es muy introductorio, y vamos profundizar excesivamente en ninguna de las etapas, vamos intentar tener unas nociones b√°sicas para preparar y manejar los datos.El primero de los pasos, la importaci√≥n de datos, la hemos revisado de forma superficial en la Secci√≥n 8, pero nos bastar√° con lo aprendido para poder empezar manipular datos. Antes de pasar al segundo paso, la limpieza de los datos, vamos repasar los tipos de datos que hemos hasta ahora.","code":""},{"path":"tidydata.html","id":"repaso_datos","chapter":"Cap√≠tulo 12 Tidy data: ordenando datos","heading":"12.1 Repaso: tipos de datos","text":"¬øExisten m√°s tipos de datos de los que ya conocemos?La respuesta te la estar√°s imaginando: s√≠. De hecho es solo que existan m√°s sino que puedes crear tus propios tipos de datos, pero seguramente acabar√°n siendo, en su nivel m√°s profundo, una combinaci√≥n de alguna de las estructuras que ya conocemos. El objetivo de este curso es empezar ser aut√≥nomo/en el an√°lisis de datos, pero es un curso profundo de R, as√≠ que (de momento) vamos quedarnos como estamos.¬†GLOSARIO:Si es importante entender las diferencias entre los datos que ya hemos definido.Vectores: es el tipo de dato m√°s simple, una colecci√≥n de valores PERO DEL MISMO TIPO. Los vectores pueden ser de longitud 1 (valores individuales secas), una colecci√≥n de n√∫meros, una colecci√≥n de cadenas de texto o una colecci√≥n de valores l√≥gicos (pudiendo tener dentro datos ausentes, o valores especiales como Inf o NaN)Vectores: es el tipo de dato m√°s simple, una colecci√≥n de valores PERO DEL MISMO TIPO. Los vectores pueden ser de longitud 1 (valores individuales secas), una colecci√≥n de n√∫meros, una colecci√≥n de cadenas de texto o una colecci√≥n de valores l√≥gicos (pudiendo tener dentro datos ausentes, o valores especiales como Inf o NaN)Matrices: se pueden entender como una especie de colecci√≥n de vectores, una colecci√≥n de colecciones, un tipo de dato BIDIMENSIONAL. Una matriz se conforma de filas y columnas pero, de nuevo, LOS DATOS DEBEN SER DEL MISMO TIPO, y los vectores concatenados que forma las filas y/o columnas DEBEN TENER LA MISMA LONGITUD.Matrices: se pueden entender como una especie de colecci√≥n de vectores, una colecci√≥n de colecciones, un tipo de dato BIDIMENSIONAL. Una matriz se conforma de filas y columnas pero, de nuevo, LOS DATOS DEBEN SER DEL MISMO TIPO, y los vectores concatenados que forma las filas y/o columnas DEBEN TENER LA MISMA LONGITUD.data,frame: son datos estructurados, lo que comunmente conocemos como ¬´tablas¬ª. diferencia de las matrices, aunque deben SEGUIR TENIENDO LA MISMA LONGITUD, las variables que lo conforman pueden ser de TIPOS DIFERENTES, puediendo tener el mismo conjunto de datos num√©ricos, caracteres, l√≥gicos, etc.\ndata,frame: son datos estructurados, lo que comunmente conocemos como ¬´tablas¬ª. diferencia de las matrices, aunque deben SEGUIR TENIENDO LA MISMA LONGITUD, las variables que lo conforman pueden ser de TIPOS DIFERENTES, puediendo tener el mismo conjunto de datos num√©ricos, caracteres, l√≥gicos, etc.Listas: las listas son una concatenaci√≥n de elementos, secas, de forma que nos permite concatenar cualquier tipo de dato anterior, pudiendo ser de DIFERENTE LONGITUD Y DIFERENTE TIPO.\nListas: las listas son una concatenaci√≥n de elementos, secas, de forma que nos permite concatenar cualquier tipo de dato anterior, pudiendo ser de DIFERENTE LONGITUD Y DIFERENTE TIPO.¬†WARNING: cuidado con las listasComo hemos mencionado, una lista se puede vectorizar de forma inmediata, por lo cualquier operaci√≥n aritm√©tica aplicada una lista dar√° error. Para poder operar con ellas tenemos una opci√≥n que es aplicar la funci√≥n lapply(), o directamente acudir al paquete purrr (te animo investigar en dicho paquete pero se escapa de los objetivos del curso).","code":""},{"path":"tidydata.html","id":"tibble","chapter":"Cap√≠tulo 12 Tidy data: ordenando datos","heading":"12.2 Mejorando los data.frame: tibble","text":"Antes de ordenar, limpiar y procesar nuestros datos, vamos ver un tipo de dato que quiz√°s hayamos mencionado por encima: las tablas tibble. Los datos en formato tibble (del paquete tibble) son un tipo de data.frame mejorado, para una gesti√≥n m√°s √°gil, eficiente y coherente. Las tablas en formato tibble (su clase ser√° tbl_df) tiene 4 ventajas principales frente los ya vistos data.frame:Permite imprimir por consola la tabla con mayor informaci√≥n de las variables, y solo imprime por defecto las primeras filas (todas si son 20 o menos, 10 si son m√°s de 20 filas).Puedes imprimir las filas y columnas que quieras con print(), pero por defecto te aseguras de saturar la consola.Mantiene la integridad de los datos (cambia los tipos de las variables y hace una carga de datos inteligente, interpretando las fechas como tal).Mantiene la integridad de los datos (cambia los tipos de las variables y hace una carga de datos inteligente, interpretando las fechas como tal).La funci√≥n tibble() construye las variables secuencialmente, pudiendo hacer uso en la propia definici√≥n de variables reci√©n definidas en dicha definici√≥n.La funci√≥n tibble() construye las variables secuencialmente, pudiendo hacer uso en la propia definici√≥n de variables reci√©n definidas en dicha definici√≥n.Si accedes una columna que existe avisa con un warning.solo te cambiar√° el tipo de datos sino que te cambiar√° el nombre de las variables (los data.frame transforma los caracteres que sean letras).Realiza una carga de los datos m√°s √°gil¬†Puedes consultar m√°s funcionalidades de dichos datos en https://tibble.tidyverse.org/.","code":"\nlibrary(tibble)\n\n# data.frame\ntabla_df <-\n  data.frame(\"x\" = 1:50,\n             \"y\" = rep(c(\"a\", \"b\", \"c\", \"d\", \"e\"), 10),\n             \"z\" = 11:60,\n             \"logica\" = rep(c(TRUE, TRUE, FALSE, TRUE, FALSE), 10))\ntabla_df##     x y  z logica\n## 1   1 a 11   TRUE\n## 2   2 b 12   TRUE\n## 3   3 c 13  FALSE\n## 4   4 d 14   TRUE\n## 5   5 e 15  FALSE\n## 6   6 a 16   TRUE\n## 7   7 b 17   TRUE\n## 8   8 c 18  FALSE\n## 9   9 d 19   TRUE\n## 10 10 e 20  FALSE\n## 11 11 a 21   TRUE\n## 12 12 b 22   TRUE\n## 13 13 c 23  FALSE\n## 14 14 d 24   TRUE\n## 15 15 e 25  FALSE\n## 16 16 a 26   TRUE\n## 17 17 b 27   TRUE\n## 18 18 c 28  FALSE\n## 19 19 d 29   TRUE\n## 20 20 e 30  FALSE\n## 21 21 a 31   TRUE\n## 22 22 b 32   TRUE\n## 23 23 c 33  FALSE\n## 24 24 d 34   TRUE\n## 25 25 e 35  FALSE\n## 26 26 a 36   TRUE\n## 27 27 b 37   TRUE\n## 28 28 c 38  FALSE\n## 29 29 d 39   TRUE\n## 30 30 e 40  FALSE\n## 31 31 a 41   TRUE\n## 32 32 b 42   TRUE\n## 33 33 c 43  FALSE\n## 34 34 d 44   TRUE\n## 35 35 e 45  FALSE\n## 36 36 a 46   TRUE\n## 37 37 b 47   TRUE\n## 38 38 c 48  FALSE\n## 39 39 d 49   TRUE\n## 40 40 e 50  FALSE\n## 41 41 a 51   TRUE\n## 42 42 b 52   TRUE\n## 43 43 c 53  FALSE\n## 44 44 d 54   TRUE\n## 45 45 e 55  FALSE\n## 46 46 a 56   TRUE\n## 47 47 b 57   TRUE\n## 48 48 c 58  FALSE\n## 49 49 d 59   TRUE\n## 50 50 e 60  FALSE\n# tibble\ntabla_tb <- tibble(\"x\" = 1:50,\n             \"y\" = rep(c(\"a\", \"b\", \"c\", \"d\", \"e\"), 10),\n             \"z\" = 11:60,\n             \"logica\" = rep(c(TRUE, TRUE, FALSE, TRUE, FALSE), 10))\ntabla_tb## # A tibble: 50 √ó 4\n##        x y         z logica\n##    <int> <chr> <int> <lgl> \n##  1     1 a        11 TRUE  \n##  2     2 b        12 TRUE  \n##  3     3 c        13 FALSE \n##  4     4 d        14 TRUE  \n##  5     5 e        15 FALSE \n##  6     6 a        16 TRUE  \n##  7     7 b        17 TRUE  \n##  8     8 c        18 FALSE \n##  9     9 d        19 TRUE  \n## 10    10 e        20 FALSE \n## # ‚Ä¶ with 40 more rows\nprint(tabla_tb, n = 13, width = Inf)## # A tibble: 50 √ó 4\n##        x y         z logica\n##    <int> <chr> <int> <lgl> \n##  1     1 a        11 TRUE  \n##  2     2 b        12 TRUE  \n##  3     3 c        13 FALSE \n##  4     4 d        14 TRUE  \n##  5     5 e        15 FALSE \n##  6     6 a        16 TRUE  \n##  7     7 b        17 TRUE  \n##  8     8 c        18 FALSE \n##  9     9 d        19 TRUE  \n## 10    10 e        20 FALSE \n## 11    11 a        21 TRUE  \n## 12    12 b        22 TRUE  \n## 13    13 c        23 FALSE \n## # ‚Ä¶ with 37 more rows\n# data.frame\ndata.frame(\"x\" = 1:5,\n           \"y\" = c(\"a\", \"b\", \"c\", \"d\", \"e\"),\n           \"z\" = 11:15,\n           \"logica\" = c(TRUE, TRUE, FALSE, TRUE, FALSE),\n           \"x*z\" = x * z)##   x y  z logica x.z\n## 1 1 a 11   TRUE   4\n## 2 2 b 12   TRUE   5\n## 3 3 c 13  FALSE   3\n## 4 4 d 14   TRUE   2\n## 5 5 e 15  FALSE  74\n# tibble\ntibble(\"x\" = 1:5,\n       \"y\" = c(\"a\", \"b\", \"c\", \"d\", \"e\"),\n       \"z\" = 11:15,\n       \"logica\" = c(TRUE, TRUE, FALSE, TRUE, FALSE),\n       \"x*z\" = x * z)## # A tibble: 5 √ó 5\n##       x y         z logica `x*z`\n##   <int> <chr> <int> <lgl>  <int>\n## 1     1 a        11 TRUE      11\n## 2     2 b        12 TRUE      24\n## 3     3 c        13 FALSE     39\n## 4     4 d        14 TRUE      56\n## 5     5 e        15 FALSE     75\n# data.frame\ntabla_df$variable_inexistente## NULL\n# tibble\ntabla_tb$variable_inexistente## Warning: Unknown or uninitialised column: `variable_inexistente`.## NULL\n# data.frame\ndata.frame(\":)\" = \"emoticono\", \" \" = \"en blanco\", \"2000\" = \"n√∫mero\")##         X..        X.  X2000\n## 1 emoticono en blanco n√∫mero\n# tibble\ntibble(\":)\" = \"emoticono\", \" \" = \"en blanco\", \"2000\" = \"n√∫mero\")## # A tibble: 1 √ó 3\n##   `:)`      ` `       `2000`\n##   <chr>     <chr>     <chr> \n## 1 emoticono en blanco n√∫mero\nlibrary(microbenchmark)\nlibrary(readr)\n\nruta <- \"./DATOS/datos_ES.csv\"\n\n# Comparamos read_csv (tibble) con read.csv (data.frame)\nmicrobenchmark(read_csv(file = ruta), read.csv(file = ruta), times = 10)## Unit: milliseconds\n##                   expr       min        lq      mean    median        uq\n##  read_csv(file = ruta) 59.678251 63.715236 66.751112 64.717135 70.577673\n##  read.csv(file = ruta)  5.730614  5.956986  6.408648  6.264476  6.991701\n##        max neval cld\n##  80.330034    10   b\n##   7.306393    10  a"},{"path":"tidydata.html","id":"tidy","chapter":"Cap√≠tulo 12 Tidy data: ordenando datos","heading":"12.3 Tidy data vs messy data","text":"Tidy datasets alike, every messy dataset messy way (Hadley Wickham, Chief Scientist en RStudio)Hasta ahora solo le hemos dado importancia al ¬´qu√©¬ª pero al ¬´c√≥mo¬ª manejamos los datos. La organizaci√≥n de nuestros datos es fundamental para que la preparaci√≥n y explotaci√≥n de los datos sea lo m√°s eficiente posible: la limpieza y preprocesamiento puede llevarnos hasta el 80% del tiempo en nuestro an√°lisis si se hace forma correcta (Dasu Johnson 2003).El concepto tidy data fue introducido por Hadley Wickham (Wickham 2014) como objetivo del entorno de paquetes que posteriormente se fueron desarrollando en el entorno tidyverse. Los conjuntos tidy o datos ordenados tienen tres objetivosEstandarizaci√≥n en su estructura.Sencillez en su manipulaci√≥n.Listos para ser modelizados y visualizados.Para ello, los datos ordenados o tidy data deben cumplir:Cada variable en una columna.Cada observaci√≥n/registro/individuo en una fila diferente.Cada celda con un √∫nico valor.Cada conjunto o unidad observacional conforma una tabla.Si contamos con m√∫ltiples tablas, debemos tener una columna com√∫n en cada una que nos permita cruzarlas.\nImagen/gr√°fica 12.2: Infograf√≠a con datos ordenados (tidy data) extra√≠da de https://r4ds..co.nz/tidy-data.html\nLo contrario lo llamaremos datos desordenados o messy data. Para trabajar con los datos vamos cargar tidyverse, un entorno de paquetes para el manejo de datos (ver m√°s detalles en Transformando los datos: incursi√≥n al universo tidyverse).","code":"\ninstall.packages(\"tidyverse\") # SOLO la primera vez\nlibrary(tidyverse)"},{"path":"tidydata.html","id":"messy-data-valores-en-columnas-en-lugar-de-variables","chapter":"Cap√≠tulo 12 Tidy data: ordenando datos","heading":"12.3.1 Messy data: valores en columnas en lugar de variables","text":"Vamos visualizar la tabla table4a del paquete tidyr (que ya lo tenemos cargado del entorno tidyverse).Si te fijas, tenemos una columna country, representando una variable con el nombre de los pa√≠ses, ¬°pero las otras columnas representan cada una una sola variable! Ambas son la misma variable, solo que medida en a√±os distintos (que deber√≠a ser su vez otra variable): cada fila est√° representando dos observaciones (1999, 2000) en lugar de un solo registro. Lo que haremos ser√° incluir una nueva columna llamada year que nos marque el a√±o y otra values que nos diga el valor de la variable de inter√©s en cada uno de esos a√±os.Con la funci√≥n pivot_longer del mencionada paquete le indicaremos lo siguiente:cols: el nombre de las columnas que vamos pivotar (con comillas porque son n√∫meros, texto como nombre).names_to: el nombre de la columna la que vamos mandar los valores que figuran ahora en los nombres de las columnas.values_to: el nombre de la columna la que vamos mandar los valores.Ahora tenemos un registro por fila, una variable por columna y cada celda representa un √∫nico valor. Este ejemplo de messy data lo podemos encontrar muy menudo cuando construimos rangos de variables pensando que es mejor tener una tabla m√°s compacta (alargar la tabla lo ancho en lugar de lo largo). Es el caso de la tabla relig_income.Salvo la primera, el resto de columnas tienen como nombre los valores de una variable en s√≠ misma (ingresos). Para ordenar los datos vamos razonar de la misma manera solo que ahora, en lugar de indicarle el nombre de todas las columnas que queremos usar de entrada, vamos indicarle de forma m√°s corta la columna que queremos seleccionar.Lo que hacemos con pivot_longer() es ¬´ampliar¬ª la tabla, haci√©ndola m√°s larga (m√°s filas) pero con menos columnas.","code":"\ntable4a## # A tibble: 3 √ó 3\n##   country     `1999` `2000`\n## * <chr>        <int>  <int>\n## 1 Afghanistan    745   2666\n## 2 Brazil       37737  80488\n## 3 China       212258 213766\ntable4a %>% pivot_longer(cols = c(\"1999\", \"2000\"),\n                         names_to = \"year\",\n                         values_to = \"values\")## # A tibble: 6 √ó 3\n##   country     year  values\n##   <chr>       <chr>  <int>\n## 1 Afghanistan 1999     745\n## 2 Afghanistan 2000    2666\n## 3 Brazil      1999   37737\n## 4 Brazil      2000   80488\n## 5 China       1999  212258\n## 6 China       2000  213766\nrelig_income## # A tibble: 18 √ó 11\n##    religion `<$10k` `$10-20k` `$20-30k` `$30-40k` `$40-50k` `$50-75k` `$75-100k`\n##    <chr>      <dbl>     <dbl>     <dbl>     <dbl>     <dbl>     <dbl>      <dbl>\n##  1 Agnostic      27        34        60        81        76       137        122\n##  2 Atheist       12        27        37        52        35        70         73\n##  3 Buddhist      27        21        30        34        33        58         62\n##  4 Catholic     418       617       732       670       638      1116        949\n##  5 Don‚Äôt k‚Ä¶      15        14        15        11        10        35         21\n##  6 Evangel‚Ä¶     575       869      1064       982       881      1486        949\n##  7 Hindu          1         9         7         9        11        34         47\n##  8 Histori‚Ä¶     228       244       236       238       197       223        131\n##  9 Jehovah‚Ä¶      20        27        24        24        21        30         15\n## 10 Jewish        19        19        25        25        30        95         69\n## 11 Mainlin‚Ä¶     289       495       619       655       651      1107        939\n## 12 Mormon        29        40        48        51        56       112         85\n## 13 Muslim         6         7         9        10         9        23         16\n## 14 Orthodox      13        17        23        32        32        47         38\n## 15 Other C‚Ä¶       9         7        11        13        13        14         18\n## 16 Other F‚Ä¶      20        33        40        46        49        63         46\n## 17 Other W‚Ä¶       5         2         3         4         2         7          3\n## 18 Unaffil‚Ä¶     217       299       374       365       341       528        407\n## # ‚Ä¶ with 3 more variables: $100-150k <dbl>, >150k <dbl>,\n## #   Don't know/refused <dbl>\n# No necesitamos las comillas en el nombre de columnas salvo que tengan caracteres que no sean letras\nrelig_income %>% pivot_longer(-religion, names_to = \"ingresos\",\n                              values_to = \"frecuencia\")## # A tibble: 180 √ó 3\n##    religion ingresos           frecuencia\n##    <chr>    <chr>                   <dbl>\n##  1 Agnostic <$10k                      27\n##  2 Agnostic $10-20k                    34\n##  3 Agnostic $20-30k                    60\n##  4 Agnostic $30-40k                    81\n##  5 Agnostic $40-50k                    76\n##  6 Agnostic $50-75k                   137\n##  7 Agnostic $75-100k                  122\n##  8 Agnostic $100-150k                 109\n##  9 Agnostic >150k                      84\n## 10 Agnostic Don't know/refused         96\n## # ‚Ä¶ with 170 more rows"},{"path":"tidydata.html","id":"messy-data-una-observaci√≥n-guardada-en-varias-filas","chapter":"Cap√≠tulo 12 Tidy data: ordenando datos","heading":"12.3.2 Messy data: una observaci√≥n guardada en varias filas","text":"Vamos visualizar ahora la tabla table2 del paquete tidyr.F√≠jate en las cuatro primeras filas: los registros con el mismo a√±o deber√≠an ser el mismo, es la misma informaci√≥n, deber√≠a estar en la misma fila, pero est√° dividada en dos. Por un lado una fila para la variable cases y otra para population. Lo que haremos ser√° lo opuesto antes: con pivot_wider() ¬´ampliaremos¬ª la tabla lo ancho, haci√©ndola menos (menos filas) pero con m√°s columnas.names_from: el nombre de la columna de la que vamos sacar las nuevas columnas que vamos crear (cases y population).values_from: el nombre de la columna de la que vamos sacar los valores.Ahora tenemos cada registro en una fila, que nos indica pa√≠s-a√±o-casos-poblaci√≥n.","code":"\ntable2## # A tibble: 12 √ó 4\n##    country      year type            count\n##    <chr>       <int> <chr>           <int>\n##  1 Afghanistan  1999 cases             745\n##  2 Afghanistan  1999 population   19987071\n##  3 Afghanistan  2000 cases            2666\n##  4 Afghanistan  2000 population   20595360\n##  5 Brazil       1999 cases           37737\n##  6 Brazil       1999 population  172006362\n##  7 Brazil       2000 cases           80488\n##  8 Brazil       2000 population  174504898\n##  9 China        1999 cases          212258\n## 10 China        1999 population 1272915272\n## 11 China        2000 cases          213766\n## 12 China        2000 population 1280428583\ntable2 %>% pivot_wider(names_from = type, values_from = count)## # A tibble: 6 √ó 4\n##   country      year  cases population\n##   <chr>       <int>  <int>      <int>\n## 1 Afghanistan  1999    745   19987071\n## 2 Afghanistan  2000   2666   20595360\n## 3 Brazil       1999  37737  172006362\n## 4 Brazil       2000  80488  174504898\n## 5 China        1999 212258 1272915272\n## 6 China        2000 213766 1280428583"},{"path":"tidydata.html","id":"messy-data-una-celda-con-m√∫ltiples-valores","chapter":"Cap√≠tulo 12 Tidy data: ordenando datos","heading":"12.3.3 Messy data: una celda con m√∫ltiples valores","text":"Por √∫ltimo vamos visualizar la tabla table3 del paquete tidyr.En la variable rate hay guardados dos valores, separados por /, lo que hace que en una celda tiene un √∫nico valor sino dos. La funci√≥n separate() del paquete tidyr nos permitir√° separar los m√∫ltiples valores de la columnarate simplemente indic√°ndole el nombre de las nuevas columnas en el argumento = ..., creando una nueva columna para cada uno de ellos.Por defecto lo que hace es localizar como separador cualquier caracter que sea alfa-num√©rico. Si queremos un caracter concreto para dividir podemos indic√°rselo expl√≠citamenteSi usas un separador que est√° en los datos te devolver√° dichas columnas vac√≠as ya que ha podido dividirlas.De la misma manera que podemos separar columnas tambi√©n podemos unirlas. Para ello vamos usar la tabla table5 del ya mencionado paquete. Con la funci√≥n unite() vamos unir el siglo (en century) y el a√±o (en year), y al inicio le indicaremos como se llamar√° la nueva variable (a√±o_completo).Como pasaba en separate(), tiene un argumento de separador por defecto, en este caso sep = \"_\". Si queremos cambiarlo podemos hacerlo indic√°ndoselo expl√≠citamente.","code":"\ntable3## # A tibble: 6 √ó 3\n##   country      year rate             \n## * <chr>       <int> <chr>            \n## 1 Afghanistan  1999 745/19987071     \n## 2 Afghanistan  2000 2666/20595360    \n## 3 Brazil       1999 37737/172006362  \n## 4 Brazil       2000 80488/174504898  \n## 5 China        1999 212258/1272915272\n## 6 China        2000 213766/1280428583\ntable3 %>% separate(rate, into = c(\"cases\", \"population\"))## # A tibble: 6 √ó 4\n##   country      year cases  population\n##   <chr>       <int> <chr>  <chr>     \n## 1 Afghanistan  1999 745    19987071  \n## 2 Afghanistan  2000 2666   20595360  \n## 3 Brazil       1999 37737  172006362 \n## 4 Brazil       2000 80488  174504898 \n## 5 China        1999 212258 1272915272\n## 6 China        2000 213766 1280428583\ntable3 %>% separate(rate, into = c(\"cases\", \"population\"), sep = \"/\")## # A tibble: 6 √ó 4\n##   country      year cases  population\n##   <chr>       <int> <chr>  <chr>     \n## 1 Afghanistan  1999 745    19987071  \n## 2 Afghanistan  2000 2666   20595360  \n## 3 Brazil       1999 37737  172006362 \n## 4 Brazil       2000 80488  174504898 \n## 5 China        1999 212258 1272915272\n## 6 China        2000 213766 1280428583\ntable3 %>% separate(rate, into = c(\"cases\", \"population\"), sep = \".\")## Warning: Expected 2 pieces. Additional pieces discarded in 6 rows [1, 2, 3, 4,\n## 5, 6].## # A tibble: 6 √ó 4\n##   country      year cases population\n##   <chr>       <int> <chr> <chr>     \n## 1 Afghanistan  1999 \"\"    \"\"        \n## 2 Afghanistan  2000 \"\"    \"\"        \n## 3 Brazil       1999 \"\"    \"\"        \n## 4 Brazil       2000 \"\"    \"\"        \n## 5 China        1999 \"\"    \"\"        \n## 6 China        2000 \"\"    \"\"\ntable5 %>% unite(a√±o_completo, century, year)## # A tibble: 6 √ó 3\n##   country     a√±o_completo rate             \n##   <chr>       <chr>        <chr>            \n## 1 Afghanistan 19_99        745/19987071     \n## 2 Afghanistan 20_00        2666/20595360    \n## 3 Brazil      19_99        37737/172006362  \n## 4 Brazil      20_00        80488/174504898  \n## 5 China       19_99        212258/1272915272\n## 6 China       20_00        213766/1280428583\ntable5 %>%\n  unite(a√±o_completo, century, year, sep = \"\")## # A tibble: 6 √ó 3\n##   country     a√±o_completo rate             \n##   <chr>       <chr>        <chr>            \n## 1 Afghanistan 1999         745/19987071     \n## 2 Afghanistan 2000         2666/20595360    \n## 3 Brazil      1999         37737/172006362  \n## 4 Brazil      2000         80488/174504898  \n## 5 China       1999         212258/1272915272\n## 6 China       2000         213766/1280428583"},{"path":"tidydata.html","id":"consejos-9","chapter":"Cap√≠tulo 12 Tidy data: ordenando datos","heading":"12.4 Consejos","text":"CONSEJOS¬†Convertir tibbleSi ya tienes un data.frame es altamente recomendable convertirlo tibble con as_tibble()¬†Convertir variables al procesarUna opci√≥n muy √∫til que podemos usar al aplicar la separaci√≥n de los m√∫ltiples valores es convertir los datos al tipo adecuado. Los datos unidos en rate eran caracteres ya que ten√≠a el separador / (pod√≠an ser num√©ricos). Al separarlos, por defecto, aunque ahora ya son solo n√∫meros, los separa como si fueran textos. Con convert = TRUE podemos indicarle que identifique el tipo de dato y lo convierta (f√≠jate en la cabecera de las columnas ahora).Dicha funci√≥n tambi√©n puede ser usada para dividir cifras, como por ejemplo el a√±o","code":"\nas_tibble(tabla_df)## # A tibble: 50 √ó 4\n##        x y         z logica\n##    <int> <fct> <int> <lgl> \n##  1     1 a        11 TRUE  \n##  2     2 b        12 TRUE  \n##  3     3 c        13 FALSE \n##  4     4 d        14 TRUE  \n##  5     5 e        15 FALSE \n##  6     6 a        16 TRUE  \n##  7     7 b        17 TRUE  \n##  8     8 c        18 FALSE \n##  9     9 d        19 TRUE  \n## 10    10 e        20 FALSE \n## # ‚Ä¶ with 40 more rows\ntable3 %>% \n  separate(rate, into = c(\"cases\", \"population\"), convert = TRUE)## # A tibble: 6 √ó 4\n##   country      year  cases population\n##   <chr>       <int>  <int>      <int>\n## 1 Afghanistan  1999    745   19987071\n## 2 Afghanistan  2000   2666   20595360\n## 3 Brazil       1999  37737  172006362\n## 4 Brazil       2000  80488  174504898\n## 5 China        1999 212258 1272915272\n## 6 China        2000 213766 1280428583\ntable3 %>% separate(year,\n                    into = c(\"siglo\", \"a√±o\"),\n                    sep = 2)## # A tibble: 6 √ó 4\n##   country     siglo a√±o   rate             \n##   <chr>       <chr> <chr> <chr>            \n## 1 Afghanistan 19    99    745/19987071     \n## 2 Afghanistan 20    00    2666/20595360    \n## 3 Brazil      19    99    37737/172006362  \n## 4 Brazil      20    00    80488/174504898  \n## 5 China       19    99    212258/1272915272\n## 6 China       20    00    213766/1280428583"},{"path":"tidydata.html","id":"ejercicios-8","chapter":"Cap√≠tulo 12 Tidy data: ordenando datos","heading":"12.5 üìù Ejercicios","text":"(haz click en las flechas para ver soluciones)üìùEjercicio 1: ¬øes el conjunto de datos datasets::anscombe (del paquete {datasets}) de tipo tibble? Soluci√≥n:Recuerda que podemos cargar elementos de un paquete (en este caso {datasets}) cargando library(datasets) y luego el elemento, o bien datasets::anscombe (prefijo::nombre).La respuesta: . Tienes muchas formas de comprobarlo si imprimes el conjunto por defecto.Imprime por defecto todas las filas (tiene 32 filas, deber√≠a imprimir solo 10 si fuese un tibble, para saturar consola).especifica al imprimir que es de tipo tibble.especifica al imprimir el tipo de dato de las columnas.Imprime el nombre de las filas (el nombre de los modelos) como si fuera una variable (¬°que existe!).As√≠ deber√≠a de salir si fuera tibble.¬†üìùEjercicio 2: define un tibble con tres variables num√©ricas , b, c, tal que la tercera sea el producto de las dos primeras c = * b. Int√©ntalo hacer con un data.frameSoluci√≥n:Un ejemplo:Si lo intentamos con un data.frame, intentar√° buscar una variable real que tengamos guardada que se llame y b, sin encontrarlas.¬†üìùEjercicio 3: define un tibble con tres variables de nombres variable, 2, tercera :), e intenta acceder ellas.Soluci√≥n:Las variables solo con caracteres del alfabeto se podr√°n acceder sin necesidad de comillas.Tambi√©n se puede acceder por el orden que ocupan:Y tambi√©n por el nombre entre corchetes (doble corchete extrae la variable fuera del tibble, corchete simple en formato tibble):¬†üìùEjercicio 4: convierte en tidy data el siguiente data.frame.Soluci√≥n:El problema es que las dos columnas con nombres de a√±o son en realidad valores que deber√≠an pasar ser variables, as√≠ que deber√≠amos disminuir aplicar pivot_longer()¬†üìùEjercicio 5: convierte en tidy data el siguiente data.frame.Soluci√≥n:El problema es que las filas que comparten a√±o son el mismo registro (pero con dos caracter√≠sticas que tenemos divididas en dos filas), as√≠ que deber√≠amos disminuir aplicar pivot_wider()¬†üìùEjercicio 6: convierte en tidy data la tabla table5 del paquete tidyr.Soluci√≥n:Primero uniremos el siglo y las dos √∫ltimas cifras del a√±o para obtener el a√±o completo (guardado en a√±o)Tras ello deberemos separar el valor del ratio en denominador y numerador (ya que ahora hay dos valores en una celda), y convertiremos el tipo de dato en la salida para que sea n√∫mero.","code":"\nmtcars##                      mpg cyl  disp  hp drat    wt  qsec vs am gear carb\n## Mazda RX4           21.0   6 160.0 110 3.90 2.620 16.46  0  1    4    4\n## Mazda RX4 Wag       21.0   6 160.0 110 3.90 2.875 17.02  0  1    4    4\n## Datsun 710          22.8   4 108.0  93 3.85 2.320 18.61  1  1    4    1\n## Hornet 4 Drive      21.4   6 258.0 110 3.08 3.215 19.44  1  0    3    1\n## Hornet Sportabout   18.7   8 360.0 175 3.15 3.440 17.02  0  0    3    2\n## Valiant             18.1   6 225.0 105 2.76 3.460 20.22  1  0    3    1\n## Duster 360          14.3   8 360.0 245 3.21 3.570 15.84  0  0    3    4\n## Merc 240D           24.4   4 146.7  62 3.69 3.190 20.00  1  0    4    2\n## Merc 230            22.8   4 140.8  95 3.92 3.150 22.90  1  0    4    2\n## Merc 280            19.2   6 167.6 123 3.92 3.440 18.30  1  0    4    4\n## Merc 280C           17.8   6 167.6 123 3.92 3.440 18.90  1  0    4    4\n## Merc 450SE          16.4   8 275.8 180 3.07 4.070 17.40  0  0    3    3\n## Merc 450SL          17.3   8 275.8 180 3.07 3.730 17.60  0  0    3    3\n## Merc 450SLC         15.2   8 275.8 180 3.07 3.780 18.00  0  0    3    3\n## Cadillac Fleetwood  10.4   8 472.0 205 2.93 5.250 17.98  0  0    3    4\n## Lincoln Continental 10.4   8 460.0 215 3.00 5.424 17.82  0  0    3    4\n## Chrysler Imperial   14.7   8 440.0 230 3.23 5.345 17.42  0  0    3    4\n## Fiat 128            32.4   4  78.7  66 4.08 2.200 19.47  1  1    4    1\n## Honda Civic         30.4   4  75.7  52 4.93 1.615 18.52  1  1    4    2\n## Toyota Corolla      33.9   4  71.1  65 4.22 1.835 19.90  1  1    4    1\n## Toyota Corona       21.5   4 120.1  97 3.70 2.465 20.01  1  0    3    1\n## Dodge Challenger    15.5   8 318.0 150 2.76 3.520 16.87  0  0    3    2\n## AMC Javelin         15.2   8 304.0 150 3.15 3.435 17.30  0  0    3    2\n## Camaro Z28          13.3   8 350.0 245 3.73 3.840 15.41  0  0    3    4\n## Pontiac Firebird    19.2   8 400.0 175 3.08 3.845 17.05  0  0    3    2\n## Fiat X1-9           27.3   4  79.0  66 4.08 1.935 18.90  1  1    4    1\n## Porsche 914-2       26.0   4 120.3  91 4.43 2.140 16.70  0  1    5    2\n## Lotus Europa        30.4   4  95.1 113 3.77 1.513 16.90  1  1    5    2\n## Ford Pantera L      15.8   8 351.0 264 4.22 3.170 14.50  0  1    5    4\n## Ferrari Dino        19.7   6 145.0 175 3.62 2.770 15.50  0  1    5    6\n## Maserati Bora       15.0   8 301.0 335 3.54 3.570 14.60  0  1    5    8\n## Volvo 142E          21.4   4 121.0 109 4.11 2.780 18.60  1  1    4    2\nclass(mtcars)## [1] \"data.frame\"\nas_tibble(mtcars)## # A tibble: 32 √ó 11\n##      mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb\n##    <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl>\n##  1  21       6  160    110  3.9   2.62  16.5     0     1     4     4\n##  2  21       6  160    110  3.9   2.88  17.0     0     1     4     4\n##  3  22.8     4  108     93  3.85  2.32  18.6     1     1     4     1\n##  4  21.4     6  258    110  3.08  3.22  19.4     1     0     3     1\n##  5  18.7     8  360    175  3.15  3.44  17.0     0     0     3     2\n##  6  18.1     6  225    105  2.76  3.46  20.2     1     0     3     1\n##  7  14.3     8  360    245  3.21  3.57  15.8     0     0     3     4\n##  8  24.4     4  147.    62  3.69  3.19  20       1     0     4     2\n##  9  22.8     4  141.    95  3.92  3.15  22.9     1     0     4     2\n## 10  19.2     6  168.   123  3.92  3.44  18.3     1     0     4     4\n## # ‚Ä¶ with 22 more rows\nclass(as_tibble(mtcars))## [1] \"tbl_df\"     \"tbl\"        \"data.frame\"\ntibble(\"a\" = 1:7, \"b\" = 11:17, \"c\" = a * b)## # A tibble: 7 √ó 3\n##       a     b     c\n##   <int> <int> <int>\n## 1     1    11    11\n## 2     2    12    24\n## 3     3    13    39\n## 4     4    14    56\n## 5     5    15    75\n## 6     6    16    96\n## 7     7    17   119\ndata.frame(\"a\" = 1:7, \"b\" = 11:17, \"c\" = a * b)##   a  b  c\n## 1 1 11 10\n## 2 2 12 10\n## 3 3 13 10\n## 4 4 14 10\n## 5 5 15 10\n## 6 6 16 10\n## 7 7 17 10\n# Definimos el tibble\ndatos_tb <- tibble(\"variable\" = 1:7, \"tercera falsa :)\" = 0,\n                   \"2\" = 11:17)\n\n# Accedemos a sus columnas\ndatos_tb$variable## [1] 1 2 3 4 5 6 7\ndatos_tb$`tercera falsa :)`## [1] 0 0 0 0 0 0 0\ndatos_tb$`2`## [1] 11 12 13 14 15 16 17\ndatos_tb[1]## # A tibble: 7 √ó 1\n##   variable\n##      <int>\n## 1        1\n## 2        2\n## 3        3\n## 4        4\n## 5        5\n## 6        6\n## 7        7\ndatos_tb[2]## # A tibble: 7 √ó 1\n##   `tercera falsa :)`\n##                <dbl>\n## 1                  0\n## 2                  0\n## 3                  0\n## 4                  0\n## 5                  0\n## 6                  0\n## 7                  0\ndatos_tb[3]## # A tibble: 7 √ó 1\n##     `2`\n##   <int>\n## 1    11\n## 2    12\n## 3    13\n## 4    14\n## 5    15\n## 6    16\n## 7    17\ndatos_tb[\"variable\"]## # A tibble: 7 √ó 1\n##   variable\n##      <int>\n## 1        1\n## 2        2\n## 3        3\n## 4        4\n## 5        5\n## 6        6\n## 7        7\ndatos_tb[[\"variable\"]]## [1] 1 2 3 4 5 6 7\ndatos_tb[\"tercera falsa :)\"]## # A tibble: 7 √ó 1\n##   `tercera falsa :)`\n##                <dbl>\n## 1                  0\n## 2                  0\n## 3                  0\n## 4                  0\n## 5                  0\n## 6                  0\n## 7                  0\ndatos_tb[\"2\"]## # A tibble: 7 √ó 1\n##     `2`\n##   <int>\n## 1    11\n## 2    12\n## 3    13\n## 4    14\n## 5    15\n## 6    16\n## 7    17\ntabla_tb <- tibble(\"trimestre\" = c(\"T1\", \"T2\", \"T3\"),\n                   \"2020\" = c(10, 12, 7.5),\n                   \"2021\" = c(8, 0, 9))\n# Aplicamos pivot_longer\ntabla_tb %>% pivot_longer(cols = c(\"2020\", \"2021\"),\n                          names_to = \"a√±o\", values_to = \"valores\")## # A tibble: 6 √ó 3\n##   trimestre a√±o   valores\n##   <chr>     <chr>   <dbl>\n## 1 T1        2020     10  \n## 2 T1        2021      8  \n## 3 T2        2020     12  \n## 4 T2        2021      0  \n## 5 T3        2020      7.5\n## 6 T3        2021      9\ntabla_tb <- tibble(\"a√±o\" = c(2019, 2019, 2020, 2020, 2021, 2021),\n                   \"variable\" = c(\"A\", \"B\", \"A\", \"B\", \"A\", \"B\"),\n                   \"valor\" = c(10, 9383, 7.58, 10839, 9, 32949))\n# Aplicamos pivot_wider\ntabla_tb %>% pivot_wider(names_from = \"variable\", values_from = \"valor\")## # A tibble: 3 √ó 3\n##     a√±o     A     B\n##   <dbl> <dbl> <dbl>\n## 1  2019 10     9383\n## 2  2020  7.58 10839\n## 3  2021  9    32949\ntable5 %>%\n  unite(a√±o, century, year, sep = \"\")## # A tibble: 6 √ó 3\n##   country     a√±o   rate             \n##   <chr>       <chr> <chr>            \n## 1 Afghanistan 1999  745/19987071     \n## 2 Afghanistan 2000  2666/20595360    \n## 3 Brazil      1999  37737/172006362  \n## 4 Brazil      2000  80488/174504898  \n## 5 China       1999  212258/1272915272\n## 6 China       2000  213766/1280428583\ntable5 %>%\n  unite(a√±o, century, year, sep = \"\") %>%\n  separate(rate, c(\"numerador\", \"denominador\"), convert = TRUE)## # A tibble: 6 √ó 4\n##   country     a√±o   numerador denominador\n##   <chr>       <chr>     <int>       <int>\n## 1 Afghanistan 1999        745    19987071\n## 2 Afghanistan 2000       2666    20595360\n## 3 Brazil      1999      37737   172006362\n## 4 Brazil      2000      80488   174504898\n## 5 China       1999     212258  1272915272\n## 6 China       2000     213766  1280428583"},{"path":"tidyverse.html","id":"tidyverse","chapter":"Cap√≠tulo 13 Incursi√≥n a tidyverse","heading":"Cap√≠tulo 13 Incursi√≥n a tidyverse","text":"Intentaremos que nuestros datos sean Tidy dataConocemos un formato amable de almacenar los datos como son los data.frame de tipo tibbleSin embargo muchas veces los datos los tenemos en el formato deseado, o directamente queremos realizar algunas transformaciones en los mismos, crear nuevas variables u obtener res√∫menes num√©ricos. En esta secci√≥n aprenderemos explorar, procesar, depurar, transformar y analizar num√©ricamente los datos, haciendo uso principalmente de los paquetes tidyverse y skimrEl entorno tidyverse es una de las herramientas m√°s importantes en el manejo de datos en R, una colecci√≥n de paquetes pensada para el manejo, la exploraci√≥n, el an√°lisis y la visualizaci√≥n de datos, compartiendo una misma filosof√≠a y gram√°tica. Puedes ver su documentaci√≥n en https://www.tidyverse.org/. Esta secci√≥n pretende ser una introducci√≥n dicho entorno, y lo haremos principalmente con el conjunto de datos starwars, del paquete dplyr (ya cargado en tidyverse).Dicho conjunto de datos, extra√≠da de la Star Wars API, recopila diferentes datos y caracter√≠sticas de los personajes de la saga Star Wars. Como habr√°s advertido, starwars es una tabla en un formato ya conocido, un tibble, en el que se nos especifica al inicio de la tabla de qu√© tipo son cada columna:int: n√∫meros enteros.dbl: n√∫meros reales (o racionales).chr: cadenas de texto.lgl: valores l√≥gicos (TRUE o FALSE).fct: factores, variables cualitativas (categor√≠as).date: fechas.Las funciones que veremos lo largo de esta secci√≥n siempre van compartir una misma metodolog√≠a: primero escribimos el nombre una tabla (data.frame o tibble), despu√©s lo que queremos hacer dicho conjunto de datos (con las variables SIN comillas) encandenando √≥rdenes con %>% (lo que se conoce como pipes), y obtenemos una nueva tabla en el mismo formato de entrada.Con glimpse(starwars) podemos obtener una visi√≥n global de las variables que tenemos.Los datos podemos verlos escribiendo el nombre de la tabla en la consola (recuerda que si es un tibble, para evitar saturar la consola, te saca un extracto, todas las columnas y filas) o bien con la funci√≥n print(), indic√°ndole n√∫mero de filas (n = 15 por ejemplo) y n√∫mero de columnas (width = Inf si queremos mostrar todas).F√≠jate que las 3 √∫ltimas variables son de tipo lista (echa un vistazo Listas). Por ejemplo, en starwars$films se guardan para cada personaje la colecci√≥n de pel√≠culas de la saga en las que aparece (algunos tendr√°n 1 solo nombre, otros 7).\nImagen/gr√°fica 13.1: Cheet sheet de las opciones del paquete dplyr para la manipulaci√≥n de datos extra√≠da de https://github.com/rstudio/cheatsheets/blob/master/data-transformation.pdf\n","code":"\nlibrary(tidyverse)\nlibrary(skimr)\nstarwars## # A tibble: 87 √ó 14\n##    name    height  mass hair_color  skin_color eye_color birth_year sex   gender\n##    <chr>    <int> <dbl> <chr>       <chr>      <chr>          <dbl> <chr> <chr> \n##  1 Luke S‚Ä¶    172    77 blond       fair       blue            19   male  mascu‚Ä¶\n##  2 C-3PO      167    75 <NA>        gold       yellow         112   none  mascu‚Ä¶\n##  3 R2-D2       96    32 <NA>        white, bl‚Ä¶ red             33   none  mascu‚Ä¶\n##  4 Darth ‚Ä¶    202   136 none        white      yellow          41.9 male  mascu‚Ä¶\n##  5 Leia O‚Ä¶    150    49 brown       light      brown           19   fema‚Ä¶ femin‚Ä¶\n##  6 Owen L‚Ä¶    178   120 brown, grey light      blue            52   male  mascu‚Ä¶\n##  7 Beru W‚Ä¶    165    75 brown       light      blue            47   fema‚Ä¶ femin‚Ä¶\n##  8 R5-D4       97    32 <NA>        white, red red             NA   none  mascu‚Ä¶\n##  9 Biggs ‚Ä¶    183    84 black       light      brown           24   male  mascu‚Ä¶\n## 10 Obi-Wa‚Ä¶    182    77 auburn, wh‚Ä¶ fair       blue-gray       57   male  mascu‚Ä¶\n## # ‚Ä¶ with 77 more rows, and 5 more variables: homeworld <chr>, species <chr>,\n## #   films <list>, vehicles <list>, starships <list>\n# Tipo de datos\nclass(starwars)## [1] \"tbl_df\"     \"tbl\"        \"data.frame\"\n# Dimensi√≥n de los datos\ndim(starwars)## [1] 87 14\n# Resumen por columnas\nglimpse(starwars)## Rows: 87\n## Columns: 14\n## $ name       <chr> \"Luke Skywalker\", \"C-3PO\", \"R2-D2\", \"Darth Vader\", \"Leia Or‚Ä¶\n## $ height     <int> 172, 167, 96, 202, 150, 178, 165, 97, 183, 182, 188, 180, 2‚Ä¶\n## $ mass       <dbl> 77.0, 75.0, 32.0, 136.0, 49.0, 120.0, 75.0, 32.0, 84.0, 77.‚Ä¶\n## $ hair_color <chr> \"blond\", NA, NA, \"none\", \"brown\", \"brown, grey\", \"brown\", N‚Ä¶\n## $ skin_color <chr> \"fair\", \"gold\", \"white, blue\", \"white\", \"light\", \"light\", \"‚Ä¶\n## $ eye_color  <chr> \"blue\", \"yellow\", \"red\", \"yellow\", \"brown\", \"blue\", \"blue\",‚Ä¶\n## $ birth_year <dbl> 19.0, 112.0, 33.0, 41.9, 19.0, 52.0, 47.0, NA, 24.0, 57.0, ‚Ä¶\n## $ sex        <chr> \"male\", \"none\", \"none\", \"male\", \"female\", \"male\", \"female\",‚Ä¶\n## $ gender     <chr> \"masculine\", \"masculine\", \"masculine\", \"masculine\", \"femini‚Ä¶\n## $ homeworld  <chr> \"Tatooine\", \"Tatooine\", \"Naboo\", \"Tatooine\", \"Alderaan\", \"T‚Ä¶\n## $ species    <chr> \"Human\", \"Droid\", \"Droid\", \"Human\", \"Human\", \"Human\", \"Huma‚Ä¶\n## $ films      <list> <\"The Empire Strikes Back\", \"Revenge of the Sith\", \"Return‚Ä¶\n## $ vehicles   <list> <\"Snowspeeder\", \"Imperial Speeder Bike\">, <>, <>, <>, \"Imp‚Ä¶\n## $ starships  <list> <\"X-wing\", \"Imperial shuttle\">, <>, <>, \"TIE Advanced x1\",‚Ä¶\n# Imprimir personalizado\nprint(starwars, n = 5, width = Inf)## # A tibble: 87 √ó 14\n##   name           height  mass hair_color skin_color  eye_color birth_year sex   \n##   <chr>           <int> <dbl> <chr>      <chr>       <chr>          <dbl> <chr> \n## 1 Luke Skywalker    172    77 blond      fair        blue            19   male  \n## 2 C-3PO             167    75 <NA>       gold        yellow         112   none  \n## 3 R2-D2              96    32 <NA>       white, blue red             33   none  \n## 4 Darth Vader       202   136 none       white       yellow          41.9 male  \n## 5 Leia Organa       150    49 brown      light       brown           19   female\n##   gender    homeworld species films     vehicles  starships\n##   <chr>     <chr>     <chr>   <list>    <list>    <list>   \n## 1 masculine Tatooine  Human   <chr [5]> <chr [2]> <chr [2]>\n## 2 masculine Tatooine  Droid   <chr [6]> <chr [0]> <chr [0]>\n## 3 masculine Naboo     Droid   <chr [7]> <chr [0]> <chr [0]>\n## 4 masculine Tatooine  Human   <chr [4]> <chr [0]> <chr [1]>\n## 5 feminine  Alderaan  Human   <chr [5]> <chr [1]> <chr [0]>\n## # ‚Ä¶ with 82 more rows"},{"path":"tidyverse.html","id":"operaciones-con-filas","chapter":"Cap√≠tulo 13 Incursi√≥n a tidyverse","heading":"13.1 Operaciones con filas","text":"Empecemos por c√≥mo seleccionar filas. Principalmente tenemos tres opciones: seleccionarlas en base alg√∫n filtro o condici√≥n (solo los mayores de tal edad, por ejemplo), extraer filas por su √≠ndice de fila o extraer filas aleatoriamente.","code":""},{"path":"tidyverse.html","id":"seleccionar-filas-filter-slice","chapter":"Cap√≠tulo 13 Incursi√≥n a tidyverse","heading":"13.1.1 Seleccionar filas (filter, slice)","text":"La funci√≥n filter() nos permite seleccionar filas en base que se cumpla una o varias condiciones respecto las variables. Para usarla basta con que introduzcamos como argumento el conjunto de condiciones que debe cumplir (recuerda: nombre de columnas sin comillas). Supongamos que queremos por ejemplo seleccionar solo los personajes con ojos marrones: nos bastar√° con usar filter() con la condici√≥n eye_color == \"brown\".En tan solo una l√≠nea hemos hecho m√°s de lo que parece: R ha ¬´recorrido¬ª (algo similar un bucle) cada una de las filas y ha ido comprobando que fila cumple la condici√≥n y cual . Con la misma l√≥gica podemos seleccionar los personajes que TIENEN ojos marrones, cambiando == por !=Tambi√©n se pueden seleccionar los personajes que tienen los ojos de una serie de colores permitidos.Si es una variable num√©rica tambi√©n podemos seleccionar por rango con (), por ejemplo, los personajes cuya altura est√° entre 120 y 160 cm.Las condiciones se pueden concatenar y complejizar todo lo que queramos, pudiendo en pocas l√≠neas realizar un filtro complejo, por ejemplo personajes con ohos marrones y que sean humanos.Tambi√©n podemos filtrar personajes con ojos marrones, azules o rojos, que sean humanos, y con menos de 50 a√±os.Muchas veces querremos extraer filas simplemente por el lugar que ocupan, sin hacer que dependa de ninguna condici√≥n. Vamos extraer las filas quinta, sexta, s√©ptima, octava, novena y d√©cima con slice().Podemos combinar los √≠ndices para extraer por ejemplo solo los pares o filas concretas separadas por los espacios que queramos.Tambi√©n hay opciones por defecto para directamente extraer las primeras o √∫ltimas filas con slice_head() y slice_tail().Una opci√≥n tambi√©n habitual es querer extraer un n√∫mero de filas pero AL AZAR, pudiendo hacerlo sin reemplazamiento (una vez extra√≠da, se puede volver extraer) o con reemplazamiento (con replace = TRUE).Por √∫ltimo, tenemos slice_min() y slice_max() que nos permite extraer filas en funci√≥n del m√≠nimo y m√°ximo de una variable. Por defecto, si hay empate, mostrar√° todas las filas (aunque supere el n√∫mero n indicado), salvo que with_ties = FALSE, que decidir√° en caso de empate cual mostrarte","code":"\nstarwars %>% filter(eye_color == \"brown\") # con ojos marrones## # A tibble: 21 √ó 14\n##    name     height  mass hair_color skin_color eye_color birth_year sex   gender\n##    <chr>     <int> <dbl> <chr>      <chr>      <chr>          <dbl> <chr> <chr> \n##  1 Leia Or‚Ä¶    150  49   brown      light      brown           19   fema‚Ä¶ femin‚Ä¶\n##  2 Biggs D‚Ä¶    183  84   black      light      brown           24   male  mascu‚Ä¶\n##  3 Han Solo    180  80   brown      fair       brown           29   male  mascu‚Ä¶\n##  4 Yoda         66  17   white      green      brown          896   male  mascu‚Ä¶\n##  5 Boba Fe‚Ä¶    183  78.2 black      fair       brown           31.5 male  mascu‚Ä¶\n##  6 Lando C‚Ä¶    177  79   black      dark       brown           31   male  mascu‚Ä¶\n##  7 Arvel C‚Ä¶     NA  NA   brown      fair       brown           NA   male  mascu‚Ä¶\n##  8 Wicket ‚Ä¶     88  20   brown      brown      brown            8   male  mascu‚Ä¶\n##  9 Quarsh ‚Ä¶    183  NA   black      dark       brown           62   <NA>  <NA>  \n## 10 Shmi Sk‚Ä¶    163  NA   black      fair       brown           72   fema‚Ä¶ femin‚Ä¶\n## # ‚Ä¶ with 11 more rows, and 5 more variables: homeworld <chr>, species <chr>,\n## #   films <list>, vehicles <list>, starships <list>\nstarwars %>% filter(eye_color != \"brown\") # NO tengan ojos marrones## # A tibble: 66 √ó 14\n##    name    height  mass hair_color  skin_color eye_color birth_year sex   gender\n##    <chr>    <int> <dbl> <chr>       <chr>      <chr>          <dbl> <chr> <chr> \n##  1 Luke S‚Ä¶    172    77 blond       fair       blue            19   male  mascu‚Ä¶\n##  2 C-3PO      167    75 <NA>        gold       yellow         112   none  mascu‚Ä¶\n##  3 R2-D2       96    32 <NA>        white, bl‚Ä¶ red             33   none  mascu‚Ä¶\n##  4 Darth ‚Ä¶    202   136 none        white      yellow          41.9 male  mascu‚Ä¶\n##  5 Owen L‚Ä¶    178   120 brown, grey light      blue            52   male  mascu‚Ä¶\n##  6 Beru W‚Ä¶    165    75 brown       light      blue            47   fema‚Ä¶ femin‚Ä¶\n##  7 R5-D4       97    32 <NA>        white, red red             NA   none  mascu‚Ä¶\n##  8 Obi-Wa‚Ä¶    182    77 auburn, wh‚Ä¶ fair       blue-gray       57   male  mascu‚Ä¶\n##  9 Anakin‚Ä¶    188    84 blond       fair       blue            41.9 male  mascu‚Ä¶\n## 10 Wilhuf‚Ä¶    180    NA auburn, gr‚Ä¶ fair       blue            64   male  mascu‚Ä¶\n## # ‚Ä¶ with 56 more rows, and 5 more variables: homeworld <chr>, species <chr>,\n## #   films <list>, vehicles <list>, starships <list>\nstarwars %>% # con ojos marrones, azules o rojos\n  filter(eye_color %in% c(\"brown\", \"blue\", \"red\"))## # A tibble: 45 √ó 14\n##    name    height  mass hair_color  skin_color eye_color birth_year sex   gender\n##    <chr>    <int> <dbl> <chr>       <chr>      <chr>          <dbl> <chr> <chr> \n##  1 Luke S‚Ä¶    172    77 blond       fair       blue            19   male  mascu‚Ä¶\n##  2 R2-D2       96    32 <NA>        white, bl‚Ä¶ red             33   none  mascu‚Ä¶\n##  3 Leia O‚Ä¶    150    49 brown       light      brown           19   fema‚Ä¶ femin‚Ä¶\n##  4 Owen L‚Ä¶    178   120 brown, grey light      blue            52   male  mascu‚Ä¶\n##  5 Beru W‚Ä¶    165    75 brown       light      blue            47   fema‚Ä¶ femin‚Ä¶\n##  6 R5-D4       97    32 <NA>        white, red red             NA   none  mascu‚Ä¶\n##  7 Biggs ‚Ä¶    183    84 black       light      brown           24   male  mascu‚Ä¶\n##  8 Anakin‚Ä¶    188    84 blond       fair       blue            41.9 male  mascu‚Ä¶\n##  9 Wilhuf‚Ä¶    180    NA auburn, gr‚Ä¶ fair       blue            64   male  mascu‚Ä¶\n## 10 Chewba‚Ä¶    228   112 brown       unknown    blue           200   male  mascu‚Ä¶\n## # ‚Ä¶ with 35 more rows, and 5 more variables: homeworld <chr>, species <chr>,\n## #   films <list>, vehicles <list>, starships <list>\n# Con between filtramos por rango\nstarwars %>% filter(between(height, 120, 160))## # A tibble: 6 √ó 14\n##   name     height  mass hair_color skin_color eye_color birth_year sex   gender \n##   <chr>     <int> <dbl> <chr>      <chr>      <chr>          <dbl> <chr> <chr>  \n## 1 Leia Or‚Ä¶    150    49 brown      light      brown             19 fema‚Ä¶ femini‚Ä¶\n## 2 Mon Mot‚Ä¶    150    NA auburn     fair       blue              48 fema‚Ä¶ femini‚Ä¶\n## 3 Nien Nu‚Ä¶    160    68 none       grey       black             NA male  mascul‚Ä¶\n## 4 Watto       137    NA black      blue, grey yellow            NA male  mascul‚Ä¶\n## 5 Gasgano     122    NA none       white, bl‚Ä¶ black             NA male  mascul‚Ä¶\n## 6 Cord√©       157    NA brown      light      brown             NA fema‚Ä¶ femini‚Ä¶\n## # ‚Ä¶ with 5 more variables: homeworld <chr>, species <chr>, films <list>,\n## #   vehicles <list>, starships <list>\nstarwars %>% # humanos con ojos marrones\n  filter(eye_color == \"brown\", species == \"Human\")## # A tibble: 17 √ó 14\n##    name     height  mass hair_color skin_color eye_color birth_year sex   gender\n##    <chr>     <int> <dbl> <chr>      <chr>      <chr>          <dbl> <chr> <chr> \n##  1 Leia Or‚Ä¶    150  49   brown      light      brown           19   fema‚Ä¶ femin‚Ä¶\n##  2 Biggs D‚Ä¶    183  84   black      light      brown           24   male  mascu‚Ä¶\n##  3 Han Solo    180  80   brown      fair       brown           29   male  mascu‚Ä¶\n##  4 Boba Fe‚Ä¶    183  78.2 black      fair       brown           31.5 male  mascu‚Ä¶\n##  5 Lando C‚Ä¶    177  79   black      dark       brown           31   male  mascu‚Ä¶\n##  6 Arvel C‚Ä¶     NA  NA   brown      fair       brown           NA   male  mascu‚Ä¶\n##  7 Shmi Sk‚Ä¶    163  NA   black      fair       brown           72   fema‚Ä¶ femin‚Ä¶\n##  8 Mace Wi‚Ä¶    188  84   none       dark       brown           72   male  mascu‚Ä¶\n##  9 Gregar ‚Ä¶    185  85   black      dark       brown           NA   male  mascu‚Ä¶\n## 10 Cord√©       157  NA   brown      light      brown           NA   fema‚Ä¶ femin‚Ä¶\n## 11 Dorm√©       165  NA   brown      light      brown           NA   fema‚Ä¶ femin‚Ä¶\n## 12 Dooku       193  80   white      fair       brown          102   male  mascu‚Ä¶\n## 13 Bail Pr‚Ä¶    191  NA   black      tan        brown           67   male  mascu‚Ä¶\n## 14 Jango F‚Ä¶    183  79   black      tan        brown           66   male  mascu‚Ä¶\n## 15 Raymus ‚Ä¶    188  79   brown      light      brown           NA   male  mascu‚Ä¶\n## 16 Poe Dam‚Ä¶     NA  NA   brown      light      brown           NA   male  mascu‚Ä¶\n## 17 Padm√© A‚Ä¶    165  45   brown      light      brown           46   fema‚Ä¶ femin‚Ä¶\n## # ‚Ä¶ with 5 more variables: homeworld <chr>, species <chr>, films <list>,\n## #   vehicles <list>, starships <list>\n# humanos con ojos marrones, azules o rojos, que no sean humanos, y menos de 50a\nstarwars %>% \n  filter(eye_color %in% c(\"brown\", \"blue\", \"red\"),\n         species != \"Human\", birth_year < 50)## # A tibble: 4 √ó 14\n##   name      height  mass hair_color skin_color eye_color birth_year sex   gender\n##   <chr>      <int> <dbl> <chr>      <chr>      <chr>          <dbl> <chr> <chr> \n## 1 R2-D2         96    32 <NA>       white, bl‚Ä¶ red               33 none  mascu‚Ä¶\n## 2 IG-88        200   140 none       metal      red               15 none  mascu‚Ä¶\n## 3 Wicket S‚Ä¶     88    20 brown      brown      brown              8 male  mascu‚Ä¶\n## 4 Barriss ‚Ä¶    166    50 black      yellow     blue              40 fema‚Ä¶ femin‚Ä¶\n## # ‚Ä¶ with 5 more variables: homeworld <chr>, species <chr>, films <list>,\n## #   vehicles <list>, starships <list>\n# slice: extramos filas por √≠ndice de fila.\nstarwars %>% slice(5:10) # filas de la 5 a la 10## # A tibble: 6 √ó 14\n##   name     height  mass hair_color  skin_color eye_color birth_year sex   gender\n##   <chr>     <int> <dbl> <chr>       <chr>      <chr>          <dbl> <chr> <chr> \n## 1 Leia Or‚Ä¶    150    49 brown       light      brown             19 fema‚Ä¶ femin‚Ä¶\n## 2 Owen La‚Ä¶    178   120 brown, grey light      blue              52 male  mascu‚Ä¶\n## 3 Beru Wh‚Ä¶    165    75 brown       light      blue              47 fema‚Ä¶ femin‚Ä¶\n## 4 R5-D4        97    32 <NA>        white, red red               NA none  mascu‚Ä¶\n## 5 Biggs D‚Ä¶    183    84 black       light      brown             24 male  mascu‚Ä¶\n## 6 Obi-Wan‚Ä¶    182    77 auburn, wh‚Ä¶ fair       blue-gray         57 male  mascu‚Ä¶\n## # ‚Ä¶ with 5 more variables: homeworld <chr>, species <chr>, films <list>,\n## #   vehicles <list>, starships <list>\nstarwars %>% slice(seq(2, nrow(starwars), by = 2)) # filas pares## # A tibble: 43 √ó 14\n##    name    height  mass hair_color  skin_color eye_color birth_year sex   gender\n##    <chr>    <int> <dbl> <chr>       <chr>      <chr>          <dbl> <chr> <chr> \n##  1 C-3PO      167    75 <NA>        gold       yellow         112   none  mascu‚Ä¶\n##  2 Darth ‚Ä¶    202   136 none        white      yellow          41.9 male  mascu‚Ä¶\n##  3 Owen L‚Ä¶    178   120 brown, grey light      blue            52   male  mascu‚Ä¶\n##  4 R5-D4       97    32 <NA>        white, red red             NA   none  mascu‚Ä¶\n##  5 Obi-Wa‚Ä¶    182    77 auburn, wh‚Ä¶ fair       blue-gray       57   male  mascu‚Ä¶\n##  6 Wilhuf‚Ä¶    180    NA auburn, gr‚Ä¶ fair       blue            64   male  mascu‚Ä¶\n##  7 Han So‚Ä¶    180    80 brown       fair       brown           29   male  mascu‚Ä¶\n##  8 Jabba ‚Ä¶    175  1358 <NA>        green-tan‚Ä¶ orange         600   herm‚Ä¶ mascu‚Ä¶\n##  9 Jek To‚Ä¶    180   110 brown       fair       blue            NA   male  mascu‚Ä¶\n## 10 Palpat‚Ä¶    170    75 grey        pale       yellow          82   male  mascu‚Ä¶\n## # ‚Ä¶ with 33 more rows, and 5 more variables: homeworld <chr>, species <chr>,\n## #   films <list>, vehicles <list>, starships <list>\nstarwars %>% slice(c(3, 4, 10, 20, 33)) # filas 3, 4, 10, 20 y 33## # A tibble: 5 √ó 14\n##   name     height  mass hair_color  skin_color eye_color birth_year sex   gender\n##   <chr>     <int> <dbl> <chr>       <chr>      <chr>          <dbl> <chr> <chr> \n## 1 R2-D2        96    32 <NA>        white, bl‚Ä¶ red             33   none  mascu‚Ä¶\n## 2 Darth V‚Ä¶    202   136 none        white      yellow          41.9 male  mascu‚Ä¶\n## 3 Obi-Wan‚Ä¶    182    77 auburn, wh‚Ä¶ fair       blue-gray       57   male  mascu‚Ä¶\n## 4 Palpati‚Ä¶    170    75 grey        pale       yellow          82   male  mascu‚Ä¶\n## 5 Finis V‚Ä¶    170    NA blond       fair       blue            91   male  mascu‚Ä¶\n## # ‚Ä¶ with 5 more variables: homeworld <chr>, species <chr>, films <list>,\n## #   vehicles <list>, starships <list>\n# Podemos extraer directamente las primeras o √∫ltimas filas\nstarwars %>% slice_head(n = 7) # 7 primeras filas ## # A tibble: 7 √ó 14\n##   name     height  mass hair_color  skin_color eye_color birth_year sex   gender\n##   <chr>     <int> <dbl> <chr>       <chr>      <chr>          <dbl> <chr> <chr> \n## 1 Luke Sk‚Ä¶    172    77 blond       fair       blue            19   male  mascu‚Ä¶\n## 2 C-3PO       167    75 <NA>        gold       yellow         112   none  mascu‚Ä¶\n## 3 R2-D2        96    32 <NA>        white, bl‚Ä¶ red             33   none  mascu‚Ä¶\n## 4 Darth V‚Ä¶    202   136 none        white      yellow          41.9 male  mascu‚Ä¶\n## 5 Leia Or‚Ä¶    150    49 brown       light      brown           19   fema‚Ä¶ femin‚Ä¶\n## 6 Owen La‚Ä¶    178   120 brown, grey light      blue            52   male  mascu‚Ä¶\n## 7 Beru Wh‚Ä¶    165    75 brown       light      blue            47   fema‚Ä¶ femin‚Ä¶\n## # ‚Ä¶ with 5 more variables: homeworld <chr>, species <chr>, films <list>,\n## #   vehicles <list>, starships <list>\nstarwars %>% slice_tail(n = 3) # 3 √∫ltimas filas ## # A tibble: 3 √ó 14\n##   name     height  mass hair_color skin_color eye_color birth_year sex    gender\n##   <chr>     <int> <dbl> <chr>      <chr>      <chr>          <dbl> <chr>  <chr> \n## 1 BB8          NA    NA none       none       black             NA none   mascu‚Ä¶\n## 2 Captain‚Ä¶     NA    NA unknown    unknown    unknown           NA <NA>   <NA>  \n## 3 Padm√© A‚Ä¶    165    45 brown      light      brown             46 female femin‚Ä¶\n## # ‚Ä¶ with 5 more variables: homeworld <chr>, species <chr>, films <list>,\n## #   vehicles <list>, starships <list>\n# Tambi√©n podemos hacer una extracci√≥n al azar de filas\nstarwars %>% slice_sample(n = 5) # 5 al azar## # A tibble: 5 √ó 14\n##   name     height  mass hair_color skin_color eye_color birth_year sex   gender \n##   <chr>     <int> <dbl> <chr>      <chr>      <chr>          <dbl> <chr> <chr>  \n## 1 San Hill    191    NA none       grey       gold              NA male  mascul‚Ä¶\n## 2 Wedge A‚Ä¶    170    77 brown      fair       hazel             21 male  mascul‚Ä¶\n## 3 Yarael ‚Ä¶    264    NA none       white      yellow            NA male  mascul‚Ä¶\n## 4 Mace Wi‚Ä¶    188    84 none       dark       brown             72 male  mascul‚Ä¶\n## 5 Luke Sk‚Ä¶    172    77 blond      fair       blue              19 male  mascul‚Ä¶\n## # ‚Ä¶ with 5 more variables: homeworld <chr>, species <chr>, films <list>,\n## #   vehicles <list>, starships <list>\nstarwars %>% slice_sample(n = 100, replace = TRUE) # 100 con reemplazamiento## # A tibble: 100 √ó 14\n##    name    height  mass hair_color skin_color  eye_color birth_year sex   gender\n##    <chr>    <int> <dbl> <chr>      <chr>       <chr>          <dbl> <chr> <chr> \n##  1 Darth ‚Ä¶    202   136 none       white       yellow          41.9 male  mascu‚Ä¶\n##  2 Shmi S‚Ä¶    163    NA black      fair        brown           72   fema‚Ä¶ femin‚Ä¶\n##  3 R4-P17      96    NA none       silver, red red, blue       NA   none  femin‚Ä¶\n##  4 IG-88      200   140 none       metal       red             15   none  mascu‚Ä¶\n##  5 Lama Su    229    88 none       grey        black           NA   male  mascu‚Ä¶\n##  6 C-3PO      167    75 <NA>       gold        yellow         112   none  mascu‚Ä¶\n##  7 Lobot      175    79 none       light       blue            37   male  mascu‚Ä¶\n##  8 Nien N‚Ä¶    160    68 none       grey        black           NA   male  mascu‚Ä¶\n##  9 Ackbar     180    83 none       brown mott‚Ä¶ orange          41   male  mascu‚Ä¶\n## 10 Palpat‚Ä¶    170    75 grey       pale        yellow          82   male  mascu‚Ä¶\n## # ‚Ä¶ with 90 more rows, and 5 more variables: homeworld <chr>, species <chr>,\n## #   films <list>, vehicles <list>, starships <list>\n# Podemos extraer filas en funci√≥n del m√≠n/m√°x de una variable\nstarwars %>% slice_min(height, n = 5) # los 5 m√°s bajitos## # A tibble: 6 √ó 14\n##   name      height  mass hair_color skin_color eye_color birth_year sex   gender\n##   <chr>      <int> <dbl> <chr>      <chr>      <chr>          <dbl> <chr> <chr> \n## 1 Yoda          66    17 white      green      brown            896 male  mascu‚Ä¶\n## 2 Ratts Ty‚Ä¶     79    15 none       grey, blue unknown           NA male  mascu‚Ä¶\n## 3 Wicket S‚Ä¶     88    20 brown      brown      brown              8 male  mascu‚Ä¶\n## 4 Dud Bolt      94    45 none       blue, grey yellow            NA male  mascu‚Ä¶\n## 5 R2-D2         96    32 <NA>       white, bl‚Ä¶ red               33 none  mascu‚Ä¶\n## 6 R4-P17        96    NA none       silver, r‚Ä¶ red, blue         NA none  femin‚Ä¶\n## # ‚Ä¶ with 5 more variables: homeworld <chr>, species <chr>, films <list>,\n## #   vehicles <list>, starships <list>\nstarwars %>% # los 5 m√°s bajitos (sin empates, exactamente 5)\n  slice_min(height, n = 5, with_ties = FALSE) ## # A tibble: 5 √ó 14\n##   name      height  mass hair_color skin_color eye_color birth_year sex   gender\n##   <chr>      <int> <dbl> <chr>      <chr>      <chr>          <dbl> <chr> <chr> \n## 1 Yoda          66    17 white      green      brown            896 male  mascu‚Ä¶\n## 2 Ratts Ty‚Ä¶     79    15 none       grey, blue unknown           NA male  mascu‚Ä¶\n## 3 Wicket S‚Ä¶     88    20 brown      brown      brown              8 male  mascu‚Ä¶\n## 4 Dud Bolt      94    45 none       blue, grey yellow            NA male  mascu‚Ä¶\n## 5 R2-D2         96    32 <NA>       white, bl‚Ä¶ red               33 none  mascu‚Ä¶\n## # ‚Ä¶ with 5 more variables: homeworld <chr>, species <chr>, films <list>,\n## #   vehicles <list>, starships <list>\nstarwars %>% slice_max(mass, n = 7) # los 7 m√°s pesados## # A tibble: 7 √ó 14\n##   name    height  mass hair_color  skin_color  eye_color birth_year sex   gender\n##   <chr>    <int> <dbl> <chr>       <chr>       <chr>          <dbl> <chr> <chr> \n## 1 Jabba ‚Ä¶    175  1358 <NA>        green-tan,‚Ä¶ orange         600   herm‚Ä¶ mascu‚Ä¶\n## 2 Grievo‚Ä¶    216   159 none        brown, whi‚Ä¶ green, y‚Ä¶       NA   male  mascu‚Ä¶\n## 3 IG-88      200   140 none        metal       red             15   none  mascu‚Ä¶\n## 4 Darth ‚Ä¶    202   136 none        white       yellow          41.9 male  mascu‚Ä¶\n## 5 Tarfful    234   136 brown       brown       blue            NA   male  mascu‚Ä¶\n## 6 Owen L‚Ä¶    178   120 brown, grey light       blue            52   male  mascu‚Ä¶\n## 7 Bossk      190   113 none        green       red             53   male  mascu‚Ä¶\n## # ‚Ä¶ with 5 more variables: homeworld <chr>, species <chr>, films <list>,\n## #   vehicles <list>, starships <list>"},{"path":"tidyverse.html","id":"reordenar-filas-arrange","chapter":"Cap√≠tulo 13 Incursi√≥n a tidyverse","heading":"13.1.2 Reordenar filas (arrange)","text":"Muchas veces necesitamos las filas ordenadas en funci√≥n del valor de alguna de las variables. Para ello tenemos la funci√≥n arrange() sin m√°s que pasarle como argumento el nombre de la variable que usaremos para la ordenaci√≥n. Vamos ordenar nuestra tabla de personajes por altura, de bajitos altos.Por defecto la ordenaci√≥n es de menor mayor pero podemos invertirlo usando desc().La ordenaci√≥n puede realizarse en base al valor de dos o m√°s variables: ordenar√° las filas en base la primera, en caso de empate usar√° la segunda, en caso de empate la tercera, y as√≠ sucesivamente. Vamos ordenar los personajes por altura y, luego, por peso.¬†WARNING: valores ausentesSi te fijas los valores ausentes van siempre al final de la ordenaci√≥n. Luego veremos como eliminarlos si quisi√©ramos.¬†Como estar√°s imaginando podemos combinar varias acciones en pocas l√≠neas, filtrando datos la vez que ordenamos el filtro resultante. Como ejemplo vamos seleccionar los personajes humanos, hombres, de ojos marrones, y en orden altura descendente y peso ascendente.","code":"\n# Con arrange ordenamos en base al orden de la variable que introduzcamos\nstarwars %>% arrange(height) # de bajitos a altos, yoda al poder## # A tibble: 87 √ó 14\n##    name     height  mass hair_color skin_color eye_color birth_year sex   gender\n##    <chr>     <int> <dbl> <chr>      <chr>      <chr>          <dbl> <chr> <chr> \n##  1 Yoda         66    17 white      green      brown            896 male  mascu‚Ä¶\n##  2 Ratts T‚Ä¶     79    15 none       grey, blue unknown           NA male  mascu‚Ä¶\n##  3 Wicket ‚Ä¶     88    20 brown      brown      brown              8 male  mascu‚Ä¶\n##  4 Dud Bolt     94    45 none       blue, grey yellow            NA male  mascu‚Ä¶\n##  5 R2-D2        96    32 <NA>       white, bl‚Ä¶ red               33 none  mascu‚Ä¶\n##  6 R4-P17       96    NA none       silver, r‚Ä¶ red, blue         NA none  femin‚Ä¶\n##  7 R5-D4        97    32 <NA>       white, red red               NA none  mascu‚Ä¶\n##  8 Sebulba     112    40 none       grey, red  orange            NA male  mascu‚Ä¶\n##  9 Gasgano     122    NA none       white, bl‚Ä¶ black             NA male  mascu‚Ä¶\n## 10 Watto       137    NA black      blue, grey yellow            NA male  mascu‚Ä¶\n## # ‚Ä¶ with 77 more rows, and 5 more variables: homeworld <chr>, species <chr>,\n## #   films <list>, vehicles <list>, starships <list>\n# Por defecto lo hace ascendente pero podemos cambiarlo\nstarwars %>% arrange(desc(height))## # A tibble: 87 √ó 14\n##    name    height  mass hair_color skin_color  eye_color birth_year sex   gender\n##    <chr>    <int> <dbl> <chr>      <chr>       <chr>          <dbl> <chr> <chr> \n##  1 Yarael‚Ä¶    264    NA none       white       yellow          NA   male  mascu‚Ä¶\n##  2 Tarfful    234   136 brown      brown       blue            NA   male  mascu‚Ä¶\n##  3 Lama Su    229    88 none       grey        black           NA   male  mascu‚Ä¶\n##  4 Chewba‚Ä¶    228   112 brown      unknown     blue           200   male  mascu‚Ä¶\n##  5 Roos T‚Ä¶    224    82 none       grey        orange          NA   male  mascu‚Ä¶\n##  6 Grievo‚Ä¶    216   159 none       brown, whi‚Ä¶ green, y‚Ä¶       NA   male  mascu‚Ä¶\n##  7 Taun We    213    NA none       grey        black           NA   fema‚Ä¶ femin‚Ä¶\n##  8 Rugor ‚Ä¶    206    NA none       green       orange          NA   male  mascu‚Ä¶\n##  9 Tion M‚Ä¶    206    80 none       grey        black           NA   male  mascu‚Ä¶\n## 10 Darth ‚Ä¶    202   136 none       white       yellow          41.9 male  mascu‚Ä¶\n## # ‚Ä¶ with 77 more rows, and 5 more variables: homeworld <chr>, species <chr>,\n## #   films <list>, vehicles <list>, starships <list>\n# Podemos combinar varios criterios: ordenados de bajitos a altos,\n# y en caso de empate, de pesados a ligeros. Un dato NA va siempre al final\nstarwars %>% arrange(height, desc(mass))## # A tibble: 87 √ó 14\n##    name     height  mass hair_color skin_color eye_color birth_year sex   gender\n##    <chr>     <int> <dbl> <chr>      <chr>      <chr>          <dbl> <chr> <chr> \n##  1 Yoda         66    17 white      green      brown            896 male  mascu‚Ä¶\n##  2 Ratts T‚Ä¶     79    15 none       grey, blue unknown           NA male  mascu‚Ä¶\n##  3 Wicket ‚Ä¶     88    20 brown      brown      brown              8 male  mascu‚Ä¶\n##  4 Dud Bolt     94    45 none       blue, grey yellow            NA male  mascu‚Ä¶\n##  5 R2-D2        96    32 <NA>       white, bl‚Ä¶ red               33 none  mascu‚Ä¶\n##  6 R4-P17       96    NA none       silver, r‚Ä¶ red, blue         NA none  femin‚Ä¶\n##  7 R5-D4        97    32 <NA>       white, red red               NA none  mascu‚Ä¶\n##  8 Sebulba     112    40 none       grey, red  orange            NA male  mascu‚Ä¶\n##  9 Gasgano     122    NA none       white, bl‚Ä¶ black             NA male  mascu‚Ä¶\n## 10 Watto       137    NA black      blue, grey yellow            NA male  mascu‚Ä¶\n## # ‚Ä¶ with 77 more rows, and 5 more variables: homeworld <chr>, species <chr>,\n## #   films <list>, vehicles <list>, starships <list>\n# Podemos combinar varias acciones en pocas l√≠neas\nstarwars %>%\n  filter(eye_color == \"brown\",\n         species == \"Human\", sex == \"male\") %>%\n  arrange(height, desc(mass))## # A tibble: 12 √ó 14\n##    name     height  mass hair_color skin_color eye_color birth_year sex   gender\n##    <chr>     <int> <dbl> <chr>      <chr>      <chr>          <dbl> <chr> <chr> \n##  1 Lando C‚Ä¶    177  79   black      dark       brown           31   male  mascu‚Ä¶\n##  2 Han Solo    180  80   brown      fair       brown           29   male  mascu‚Ä¶\n##  3 Biggs D‚Ä¶    183  84   black      light      brown           24   male  mascu‚Ä¶\n##  4 Jango F‚Ä¶    183  79   black      tan        brown           66   male  mascu‚Ä¶\n##  5 Boba Fe‚Ä¶    183  78.2 black      fair       brown           31.5 male  mascu‚Ä¶\n##  6 Gregar ‚Ä¶    185  85   black      dark       brown           NA   male  mascu‚Ä¶\n##  7 Mace Wi‚Ä¶    188  84   none       dark       brown           72   male  mascu‚Ä¶\n##  8 Raymus ‚Ä¶    188  79   brown      light      brown           NA   male  mascu‚Ä¶\n##  9 Bail Pr‚Ä¶    191  NA   black      tan        brown           67   male  mascu‚Ä¶\n## 10 Dooku       193  80   white      fair       brown          102   male  mascu‚Ä¶\n## 11 Arvel C‚Ä¶     NA  NA   brown      fair       brown           NA   male  mascu‚Ä¶\n## 12 Poe Dam‚Ä¶     NA  NA   brown      light      brown           NA   male  mascu‚Ä¶\n## # ‚Ä¶ with 5 more variables: homeworld <chr>, species <chr>, films <list>,\n## #   vehicles <list>, starships <list>"},{"path":"tidyverse.html","id":"eliminar-filas-y-duplicados","chapter":"Cap√≠tulo 13 Incursi√≥n a tidyverse","heading":"13.1.3 Eliminar filas y duplicados","text":"La misma l√≥gica que hemos usado para seleccionar filas podemos usarla para eliminar filas, simplemente negando la condici√≥n de filtrado. Por ejemplo, vamos eliminar las 5 primeras filas.Otra opci√≥n la hora de eliminar filas es eliminar filas duplicadas (o filas con valores duplicados en alguna columna). Para ello deberemos aplicar la funci√≥n distinct(), pas√°ndole como argumentos el nombre de las variables que usaremos para quitar duplicados, por ejemplo, aquellos personajes con igual par de color de pelo y ojos.Si te fijas adem√°s nos ha extra√≠do solo las dos columnas en base las cuales hemos eliminado duplicados. Si queremos que nos mantenga toda la tabla deberemos explicitarlo con .keep_all = TRUE.Si incluimos ning√∫n nombre de columna nos eliminar√° solo los registros que tengan TODOS los campos duplicados.","code":"\n# Eliminamos por √≠ndices\nstarwars %>% slice(-(1:5)) # eliminamos las 5 primeras filas## # A tibble: 82 √ó 14\n##    name    height  mass hair_color  skin_color eye_color birth_year sex   gender\n##    <chr>    <int> <dbl> <chr>       <chr>      <chr>          <dbl> <chr> <chr> \n##  1 Owen L‚Ä¶    178   120 brown, grey light      blue            52   male  mascu‚Ä¶\n##  2 Beru W‚Ä¶    165    75 brown       light      blue            47   fema‚Ä¶ femin‚Ä¶\n##  3 R5-D4       97    32 <NA>        white, red red             NA   none  mascu‚Ä¶\n##  4 Biggs ‚Ä¶    183    84 black       light      brown           24   male  mascu‚Ä¶\n##  5 Obi-Wa‚Ä¶    182    77 auburn, wh‚Ä¶ fair       blue-gray       57   male  mascu‚Ä¶\n##  6 Anakin‚Ä¶    188    84 blond       fair       blue            41.9 male  mascu‚Ä¶\n##  7 Wilhuf‚Ä¶    180    NA auburn, gr‚Ä¶ fair       blue            64   male  mascu‚Ä¶\n##  8 Chewba‚Ä¶    228   112 brown       unknown    blue           200   male  mascu‚Ä¶\n##  9 Han So‚Ä¶    180    80 brown       fair       brown           29   male  mascu‚Ä¶\n## 10 Greedo     173    74 <NA>        green      black           44   male  mascu‚Ä¶\n## # ‚Ä¶ with 72 more rows, and 5 more variables: homeworld <chr>, species <chr>,\n## #   films <list>, vehicles <list>, starships <list>\n# Eliminamos duplicados\nstarwars %>% # Eliminamos registros con igual par (color_pelo, color_ojos)\n  distinct(hair_color, eye_color)## # A tibble: 35 √ó 2\n##    hair_color    eye_color\n##    <chr>         <chr>    \n##  1 blond         blue     \n##  2 <NA>          yellow   \n##  3 <NA>          red      \n##  4 none          yellow   \n##  5 brown         brown    \n##  6 brown, grey   blue     \n##  7 brown         blue     \n##  8 black         brown    \n##  9 auburn, white blue-gray\n## 10 auburn, grey  blue     \n## # ‚Ä¶ with 25 more rows\n# Eliminamos duplicados\nstarwars %>% # Eliminamos registros con igual par (color_pelo, color_ojos)\n  distinct(hair_color, eye_color,\n           .keep_all = TRUE) # .keep_all = TRUE mantiene todas columnas## # A tibble: 35 √ó 14\n##    name    height  mass hair_color  skin_color eye_color birth_year sex   gender\n##    <chr>    <int> <dbl> <chr>       <chr>      <chr>          <dbl> <chr> <chr> \n##  1 Luke S‚Ä¶    172    77 blond       fair       blue            19   male  mascu‚Ä¶\n##  2 C-3PO      167    75 <NA>        gold       yellow         112   none  mascu‚Ä¶\n##  3 R2-D2       96    32 <NA>        white, bl‚Ä¶ red             33   none  mascu‚Ä¶\n##  4 Darth ‚Ä¶    202   136 none        white      yellow          41.9 male  mascu‚Ä¶\n##  5 Leia O‚Ä¶    150    49 brown       light      brown           19   fema‚Ä¶ femin‚Ä¶\n##  6 Owen L‚Ä¶    178   120 brown, grey light      blue            52   male  mascu‚Ä¶\n##  7 Beru W‚Ä¶    165    75 brown       light      blue            47   fema‚Ä¶ femin‚Ä¶\n##  8 Biggs ‚Ä¶    183    84 black       light      brown           24   male  mascu‚Ä¶\n##  9 Obi-Wa‚Ä¶    182    77 auburn, wh‚Ä¶ fair       blue-gray       57   male  mascu‚Ä¶\n## 10 Wilhuf‚Ä¶    180    NA auburn, gr‚Ä¶ fair       blue            64   male  mascu‚Ä¶\n## # ‚Ä¶ with 25 more rows, and 5 more variables: homeworld <chr>, species <chr>,\n## #   films <list>, vehicles <list>, starships <list>\n# Duplicamos el conjunto para probarlo\nduplicado_starwars <- rbind(starwars, starwars)\ndim(duplicado_starwars)## [1] 174  14\n# Eliminamos duplicados (filas exactamente iguales)\nduplicado_starwars %>% distinct()## # A tibble: 87 √ó 14\n##    name    height  mass hair_color  skin_color eye_color birth_year sex   gender\n##    <chr>    <int> <dbl> <chr>       <chr>      <chr>          <dbl> <chr> <chr> \n##  1 Luke S‚Ä¶    172    77 blond       fair       blue            19   male  mascu‚Ä¶\n##  2 C-3PO      167    75 <NA>        gold       yellow         112   none  mascu‚Ä¶\n##  3 R2-D2       96    32 <NA>        white, bl‚Ä¶ red             33   none  mascu‚Ä¶\n##  4 Darth ‚Ä¶    202   136 none        white      yellow          41.9 male  mascu‚Ä¶\n##  5 Leia O‚Ä¶    150    49 brown       light      brown           19   fema‚Ä¶ femin‚Ä¶\n##  6 Owen L‚Ä¶    178   120 brown, grey light      blue            52   male  mascu‚Ä¶\n##  7 Beru W‚Ä¶    165    75 brown       light      blue            47   fema‚Ä¶ femin‚Ä¶\n##  8 R5-D4       97    32 <NA>        white, red red             NA   none  mascu‚Ä¶\n##  9 Biggs ‚Ä¶    183    84 black       light      brown           24   male  mascu‚Ä¶\n## 10 Obi-Wa‚Ä¶    182    77 auburn, wh‚Ä¶ fair       blue-gray       57   male  mascu‚Ä¶\n## # ‚Ä¶ with 77 more rows, and 5 more variables: homeworld <chr>, species <chr>,\n## #   films <list>, vehicles <list>, starships <list>\ndim(duplicado_starwars %>% distinct())## [1] 87 14"},{"path":"tidyverse.html","id":"operaciones-con-columnas","chapter":"Cap√≠tulo 13 Incursi√≥n a tidyverse","heading":"13.2 Operaciones con columnas","text":"Ya hemos visto algunas opciones para manejar filas. Pasemos seleccionar columnas o construir columnas/variables nuevas en base las ya existentes.","code":""},{"path":"tidyverse.html","id":"seleccionar-select-y-extraer-pull-columnas","chapter":"Cap√≠tulo 13 Incursi√≥n a tidyverse","heading":"13.2.1 Seleccionar (select) y extraer (pull) columnas","text":"La opci√≥n m√°s sencilla es usar la funci√≥n select() pas√°ndole como argumentos los nombres de columnas (¬°SIN COMILLAS!) queremos seleccionar, por ejemplo, color de pelo, piel y ojos.Si las columnas seleccionar sabemos que son consecutivas, podemos indicarle que las seleccionemos desde una columna inicial hasta una columna inicial pasando por todas.Una de las mejores opciones en este entorno es que las columnas las podemos seleccionar trav√©s de expresiones regulares, por ejemplo, seleccionando solo aquellas columnas que compartan un sufijo com√∫n en el nombre, con ends_with() dentro de √≥rdenes como select()De una manera similar podemos seleccionar columnas cuyo nombre empiecen o contengan alguna cadena de texto concretaTodo lo que hemos usado para seleccionar lo podemos usar para eliminar columnasIncluso nos permite seleccionar aquellas columnas que son del mismo tipo (imagina que necesitamos solo las columnas num√©ricas para calcular ciertas estad√≠sticas) con ().Por √∫ltimo, podemos tanto seleccionar sino extraer columnas: las saca fuera de la tabla y las convierte en un vector fuera del tibble, con la funci√≥n pull().","code":"\n# select: columnas a seleccionar sin comillas\nstarwars %>% # seleccionamos solo 3 columnas: pelo, piel y ojos\n  select(hair_color, skin_color, eye_color)## # A tibble: 87 √ó 3\n##    hair_color    skin_color  eye_color\n##    <chr>         <chr>       <chr>    \n##  1 blond         fair        blue     \n##  2 <NA>          gold        yellow   \n##  3 <NA>          white, blue red      \n##  4 none          white       yellow   \n##  5 brown         light       brown    \n##  6 brown, grey   light       blue     \n##  7 brown         light       blue     \n##  8 <NA>          white, red  red      \n##  9 black         light       brown    \n## 10 auburn, white fair        blue-gray\n## # ‚Ä¶ with 77 more rows\n# Podemos seleccionar columnas en orden: desde nombre hasta a√±o nacim.\nstarwars %>% select(name:birth_year)## # A tibble: 87 √ó 7\n##    name               height  mass hair_color    skin_color eye_color birth_year\n##    <chr>               <int> <dbl> <chr>         <chr>      <chr>          <dbl>\n##  1 Luke Skywalker        172    77 blond         fair       blue            19  \n##  2 C-3PO                 167    75 <NA>          gold       yellow         112  \n##  3 R2-D2                  96    32 <NA>          white, bl‚Ä¶ red             33  \n##  4 Darth Vader           202   136 none          white      yellow          41.9\n##  5 Leia Organa           150    49 brown         light      brown           19  \n##  6 Owen Lars             178   120 brown, grey   light      blue            52  \n##  7 Beru Whitesun lars    165    75 brown         light      blue            47  \n##  8 R5-D4                  97    32 <NA>          white, red red             NA  \n##  9 Biggs Darklighter     183    84 black         light      brown           24  \n## 10 Obi-Wan Kenobi        182    77 auburn, white fair       blue-gray       57  \n## # ‚Ä¶ with 77 more rows\n# Podemos seleccionar columnas por sufijo y prefijo\nstarwars %>% select(ends_with(\"color\")) # acaban en \"color\"## # A tibble: 87 √ó 3\n##    hair_color    skin_color  eye_color\n##    <chr>         <chr>       <chr>    \n##  1 blond         fair        blue     \n##  2 <NA>          gold        yellow   \n##  3 <NA>          white, blue red      \n##  4 none          white       yellow   \n##  5 brown         light       brown    \n##  6 brown, grey   light       blue     \n##  7 brown         light       blue     \n##  8 <NA>          white, red  red      \n##  9 black         light       brown    \n## 10 auburn, white fair        blue-gray\n## # ‚Ä¶ with 77 more rows\nstarwars %>% select(starts_with(\"h\")) # empiezan por h## # A tibble: 87 √ó 3\n##    height hair_color    homeworld\n##     <int> <chr>         <chr>    \n##  1    172 blond         Tatooine \n##  2    167 <NA>          Tatooine \n##  3     96 <NA>          Naboo    \n##  4    202 none          Tatooine \n##  5    150 brown         Alderaan \n##  6    178 brown, grey   Tatooine \n##  7    165 brown         Tatooine \n##  8     97 <NA>          Tatooine \n##  9    183 black         Tatooine \n## 10    182 auburn, white Stewjon  \n## # ‚Ä¶ with 77 more rows\nstarwars %>% select(contains(\"h\")) # contienen la h## # A tibble: 87 √ó 6\n##    height hair_color    birth_year homeworld vehicles  starships\n##     <int> <chr>              <dbl> <chr>     <list>    <list>   \n##  1    172 blond               19   Tatooine  <chr [2]> <chr [2]>\n##  2    167 <NA>               112   Tatooine  <chr [0]> <chr [0]>\n##  3     96 <NA>                33   Naboo     <chr [0]> <chr [0]>\n##  4    202 none                41.9 Tatooine  <chr [0]> <chr [1]>\n##  5    150 brown               19   Alderaan  <chr [1]> <chr [0]>\n##  6    178 brown, grey         52   Tatooine  <chr [0]> <chr [0]>\n##  7    165 brown               47   Tatooine  <chr [0]> <chr [0]>\n##  8     97 <NA>                NA   Tatooine  <chr [0]> <chr [0]>\n##  9    183 black               24   Tatooine  <chr [0]> <chr [1]>\n## 10    182 auburn, white       57   Stewjon   <chr [1]> <chr [5]>\n## # ‚Ä¶ with 77 more rows\nstarwars %>% # seleccionamos todas menos 3 columnas: pelo, piel y ojos\n  select(-c(hair_color, skin_color, eye_color))## # A tibble: 87 √ó 11\n##    name    height  mass birth_year sex   gender homeworld species films vehicles\n##    <chr>    <int> <dbl>      <dbl> <chr> <chr>  <chr>     <chr>   <lis> <list>  \n##  1 Luke S‚Ä¶    172    77       19   male  mascu‚Ä¶ Tatooine  Human   <chr‚Ä¶ <chr [2‚Ä¶\n##  2 C-3PO      167    75      112   none  mascu‚Ä¶ Tatooine  Droid   <chr‚Ä¶ <chr [0‚Ä¶\n##  3 R2-D2       96    32       33   none  mascu‚Ä¶ Naboo     Droid   <chr‚Ä¶ <chr [0‚Ä¶\n##  4 Darth ‚Ä¶    202   136       41.9 male  mascu‚Ä¶ Tatooine  Human   <chr‚Ä¶ <chr [0‚Ä¶\n##  5 Leia O‚Ä¶    150    49       19   fema‚Ä¶ femin‚Ä¶ Alderaan  Human   <chr‚Ä¶ <chr [1‚Ä¶\n##  6 Owen L‚Ä¶    178   120       52   male  mascu‚Ä¶ Tatooine  Human   <chr‚Ä¶ <chr [0‚Ä¶\n##  7 Beru W‚Ä¶    165    75       47   fema‚Ä¶ femin‚Ä¶ Tatooine  Human   <chr‚Ä¶ <chr [0‚Ä¶\n##  8 R5-D4       97    32       NA   none  mascu‚Ä¶ Tatooine  Droid   <chr‚Ä¶ <chr [0‚Ä¶\n##  9 Biggs ‚Ä¶    183    84       24   male  mascu‚Ä¶ Tatooine  Human   <chr‚Ä¶ <chr [0‚Ä¶\n## 10 Obi-Wa‚Ä¶    182    77       57   male  mascu‚Ä¶ Stewjon   Human   <chr‚Ä¶ <chr [1‚Ä¶\n## # ‚Ä¶ with 77 more rows, and 1 more variable: starships <list>\n# Seleccionamos solo la columnas num√©ricas\nstarwars %>% select(where(is.numeric))## # A tibble: 87 √ó 3\n##    height  mass birth_year\n##     <int> <dbl>      <dbl>\n##  1    172    77       19  \n##  2    167    75      112  \n##  3     96    32       33  \n##  4    202   136       41.9\n##  5    150    49       19  \n##  6    178   120       52  \n##  7    165    75       47  \n##  8     97    32       NA  \n##  9    183    84       24  \n## 10    182    77       57  \n## # ‚Ä¶ with 77 more rows\nstarwars %>% pull(name)##  [1] \"Luke Skywalker\"        \"C-3PO\"                 \"R2-D2\"                \n##  [4] \"Darth Vader\"           \"Leia Organa\"           \"Owen Lars\"            \n##  [7] \"Beru Whitesun lars\"    \"R5-D4\"                 \"Biggs Darklighter\"    \n## [10] \"Obi-Wan Kenobi\"        \"Anakin Skywalker\"      \"Wilhuff Tarkin\"       \n## [13] \"Chewbacca\"             \"Han Solo\"              \"Greedo\"               \n## [16] \"Jabba Desilijic Tiure\" \"Wedge Antilles\"        \"Jek Tono Porkins\"     \n## [19] \"Yoda\"                  \"Palpatine\"             \"Boba Fett\"            \n## [22] \"IG-88\"                 \"Bossk\"                 \"Lando Calrissian\"     \n## [25] \"Lobot\"                 \"Ackbar\"                \"Mon Mothma\"           \n## [28] \"Arvel Crynyd\"          \"Wicket Systri Warrick\" \"Nien Nunb\"            \n## [31] \"Qui-Gon Jinn\"          \"Nute Gunray\"           \"Finis Valorum\"        \n## [34] \"Jar Jar Binks\"         \"Roos Tarpals\"          \"Rugor Nass\"           \n## [37] \"Ric Oli√©\"              \"Watto\"                 \"Sebulba\"              \n## [40] \"Quarsh Panaka\"         \"Shmi Skywalker\"        \"Darth Maul\"           \n## [43] \"Bib Fortuna\"           \"Ayla Secura\"           \"Dud Bolt\"             \n## [46] \"Gasgano\"               \"Ben Quadinaros\"        \"Mace Windu\"           \n## [49] \"Ki-Adi-Mundi\"          \"Kit Fisto\"             \"Eeth Koth\"            \n## [52] \"Adi Gallia\"            \"Saesee Tiin\"           \"Yarael Poof\"          \n## [55] \"Plo Koon\"              \"Mas Amedda\"            \"Gregar Typho\"         \n## [58] \"Cord√©\"                 \"Cliegg Lars\"           \"Poggle the Lesser\"    \n## [61] \"Luminara Unduli\"       \"Barriss Offee\"         \"Dorm√©\"                \n## [64] \"Dooku\"                 \"Bail Prestor Organa\"   \"Jango Fett\"           \n## [67] \"Zam Wesell\"            \"Dexter Jettster\"       \"Lama Su\"              \n## [70] \"Taun We\"               \"Jocasta Nu\"            \"Ratts Tyerell\"        \n## [73] \"R4-P17\"                \"Wat Tambor\"            \"San Hill\"             \n## [76] \"Shaak Ti\"              \"Grievous\"              \"Tarfful\"              \n## [79] \"Raymus Antilles\"       \"Sly Moore\"             \"Tion Medon\"           \n## [82] \"Finn\"                  \"Rey\"                   \"Poe Dameron\"          \n## [85] \"BB8\"                   \"Captain Phasma\"        \"Padm√© Amidala\""},{"path":"tidyverse.html","id":"renombrar-rename-y-reordenar-relocate-columnas","chapter":"Cap√≠tulo 13 Incursi√≥n a tidyverse","heading":"13.2.2 Renombrar (rename) y reordenar (relocate) columnas","text":"veces tambi√©n podemos querer modificar la ¬´metainformaci√≥n¬ª de la tabla, modificando los datos sino renombrando el orden de las columnas. Para ello debremos usar la funci√≥n rename() poniendo primero el nombre nuevo y luego el antiguoDe la misma manera podemos reordenar las columnas, indicando el nombre de columnas que queremos mover, y con .y/o .para indicar antes o despu√©s de que columnas queremos moverlas.Otra opci√≥n es hacerlo con select(), indic√°ndole el orden de las columnas manualmente, pudiendo hacer uso de everything() para incluir el resto de columnas mencionadas anteriormente.","code":"\n# rename: renombrar columnas, primero el nuevo y luego el antiguo\nstarwars %>% rename(nombre = name, altura = height, peso = mass)## # A tibble: 87 √ó 14\n##    nombre   altura  peso hair_color skin_color eye_color birth_year sex   gender\n##    <chr>     <int> <dbl> <chr>      <chr>      <chr>          <dbl> <chr> <chr> \n##  1 Luke Sk‚Ä¶    172    77 blond      fair       blue            19   male  mascu‚Ä¶\n##  2 C-3PO       167    75 <NA>       gold       yellow         112   none  mascu‚Ä¶\n##  3 R2-D2        96    32 <NA>       white, bl‚Ä¶ red             33   none  mascu‚Ä¶\n##  4 Darth V‚Ä¶    202   136 none       white      yellow          41.9 male  mascu‚Ä¶\n##  5 Leia Or‚Ä¶    150    49 brown      light      brown           19   fema‚Ä¶ femin‚Ä¶\n##  6 Owen La‚Ä¶    178   120 brown, gr‚Ä¶ light      blue            52   male  mascu‚Ä¶\n##  7 Beru Wh‚Ä¶    165    75 brown      light      blue            47   fema‚Ä¶ femin‚Ä¶\n##  8 R5-D4        97    32 <NA>       white, red red             NA   none  mascu‚Ä¶\n##  9 Biggs D‚Ä¶    183    84 black      light      brown           24   male  mascu‚Ä¶\n## 10 Obi-Wan‚Ä¶    182    77 auburn, w‚Ä¶ fair       blue-gray       57   male  mascu‚Ä¶\n## # ‚Ä¶ with 77 more rows, and 5 more variables: homeworld <chr>, species <chr>,\n## #   films <list>, vehicles <list>, starships <list>\nstarwars %>% # altura y masa detr√°s de color de piel\n  relocate(height, mass, .after = skin_color) ## # A tibble: 87 √ó 14\n##    name    hair_color  skin_color height  mass eye_color birth_year sex   gender\n##    <chr>   <chr>       <chr>       <int> <dbl> <chr>          <dbl> <chr> <chr> \n##  1 Luke S‚Ä¶ blond       fair          172    77 blue            19   male  mascu‚Ä¶\n##  2 C-3PO   <NA>        gold          167    75 yellow         112   none  mascu‚Ä¶\n##  3 R2-D2   <NA>        white, bl‚Ä¶     96    32 red             33   none  mascu‚Ä¶\n##  4 Darth ‚Ä¶ none        white         202   136 yellow          41.9 male  mascu‚Ä¶\n##  5 Leia O‚Ä¶ brown       light         150    49 brown           19   fema‚Ä¶ femin‚Ä¶\n##  6 Owen L‚Ä¶ brown, grey light         178   120 blue            52   male  mascu‚Ä¶\n##  7 Beru W‚Ä¶ brown       light         165    75 blue            47   fema‚Ä¶ femin‚Ä¶\n##  8 R5-D4   <NA>        white, red     97    32 red             NA   none  mascu‚Ä¶\n##  9 Biggs ‚Ä¶ black       light         183    84 brown           24   male  mascu‚Ä¶\n## 10 Obi-Wa‚Ä¶ auburn, wh‚Ä¶ fair          182    77 blue-gray       57   male  mascu‚Ä¶\n## # ‚Ä¶ with 77 more rows, and 5 more variables: homeworld <chr>, species <chr>,\n## #   films <list>, vehicles <list>, starships <list>\nstarwars %>% # color de piel, pelo y ojos antes de peso\n  relocate(hair_color, skin_color, eye_color,\n           .before = mass) ## # A tibble: 87 √ó 14\n##    name    height hair_color  skin_color eye_color  mass birth_year sex   gender\n##    <chr>    <int> <chr>       <chr>      <chr>     <dbl>      <dbl> <chr> <chr> \n##  1 Luke S‚Ä¶    172 blond       fair       blue         77       19   male  mascu‚Ä¶\n##  2 C-3PO      167 <NA>        gold       yellow       75      112   none  mascu‚Ä¶\n##  3 R2-D2       96 <NA>        white, bl‚Ä¶ red          32       33   none  mascu‚Ä¶\n##  4 Darth ‚Ä¶    202 none        white      yellow      136       41.9 male  mascu‚Ä¶\n##  5 Leia O‚Ä¶    150 brown       light      brown        49       19   fema‚Ä¶ femin‚Ä¶\n##  6 Owen L‚Ä¶    178 brown, grey light      blue        120       52   male  mascu‚Ä¶\n##  7 Beru W‚Ä¶    165 brown       light      blue         75       47   fema‚Ä¶ femin‚Ä¶\n##  8 R5-D4       97 <NA>        white, red red          32       NA   none  mascu‚Ä¶\n##  9 Biggs ‚Ä¶    183 black       light      brown        84       24   male  mascu‚Ä¶\n## 10 Obi-Wa‚Ä¶    182 auburn, wh‚Ä¶ fair       blue-gray    77       57   male  mascu‚Ä¶\n## # ‚Ä¶ with 77 more rows, and 5 more variables: homeworld <chr>, species <chr>,\n## #   films <list>, vehicles <list>, starships <list>\nstarwars %>% select(name, homeworld, everything())## # A tibble: 87 √ó 14\n##    name  homeworld height  mass hair_color skin_color eye_color birth_year sex  \n##    <chr> <chr>      <int> <dbl> <chr>      <chr>      <chr>          <dbl> <chr>\n##  1 Luke‚Ä¶ Tatooine     172    77 blond      fair       blue            19   male \n##  2 C-3PO Tatooine     167    75 <NA>       gold       yellow         112   none \n##  3 R2-D2 Naboo         96    32 <NA>       white, bl‚Ä¶ red             33   none \n##  4 Dart‚Ä¶ Tatooine     202   136 none       white      yellow          41.9 male \n##  5 Leia‚Ä¶ Alderaan     150    49 brown      light      brown           19   fema‚Ä¶\n##  6 Owen‚Ä¶ Tatooine     178   120 brown, gr‚Ä¶ light      blue            52   male \n##  7 Beru‚Ä¶ Tatooine     165    75 brown      light      blue            47   fema‚Ä¶\n##  8 R5-D4 Tatooine      97    32 <NA>       white, red red             NA   none \n##  9 Bigg‚Ä¶ Tatooine     183    84 black      light      brown           24   male \n## 10 Obi-‚Ä¶ Stewjon      182    77 auburn, w‚Ä¶ fair       blue-gray       57   male \n## # ‚Ä¶ with 77 more rows, and 5 more variables: gender <chr>, species <chr>,\n## #   films <list>, vehicles <list>, starships <list>"},{"path":"tidyverse.html","id":"crear-nuevas-variables-mutate","chapter":"Cap√≠tulo 13 Incursi√≥n a tidyverse","heading":"13.3 Crear nuevas variables (mutate)","text":"veces queremos modificar variables ya existentes sino crear nuevas variables/columnas en base variables ya existentes. Para ello tenemos la opci√≥n de mutate() que nos permite crear una nueva variable en funci√≥n de las existentes.Recuerda que para ver todas las columnas debes indicarle que quieres imprimir todas.Otra opci√≥n es quedarnos solo con las columnas nuevas creadas con transmute()Si queremos a√±adir varias variables en funci√≥n de las ya existentes podemos hacerlo ya que permite incorporar los datos de forma secuencial sin duplicar √≥rdenes de mutate() para cada una.Como ves por defecto a√±ade las columnas al final pero podemos reordenar las columnas como ya hemos vistoTambi√©n podemos pasarle una funci√≥n propia que queramos definir, solo funciones de R. Vamos definir la funci√≥n que nos calcula el IMC, la que llamaremos BMI_fun, que necesita solo de dos argumentos: la altura en metros y el peso.La funci√≥n definida como BMI_fun() podemos ahora aplicarla dentro de mutate().Tambi√©n se pueden aplicar funciones m√°s complejas como la funci√≥n map() del paquete purrr para manejo de listas: dado que las listas se pueden vectorizar, esta funci√≥n nos permite aplicar operaciones listas, elemento elemento de cada una de ellas. Veamos un ejemplo: imagina que queremos calcular el n√∫mero de pel√≠culas en las que sale cada personaje de la saga.Las pel√≠culas de cada personaje est√°n en modo lista: pod√≠amos guardarlo en un data.frame ya que cada personaje ha podido participar en un n√∫mero distinto (en una tabla, todas las columnas tienen la misma longitud). Para saber la cantidad de pel√≠culas en las que ha participado el primer personaje basta con usar el comando length() (nos dar√° el n√∫mero de elementos de la lista).¬øC√≥mo aplicar dicha funci√≥n cada personaje? Con map() y la funci√≥n aplicar en cada elemento de la lista.Si te fijas con los 10 primeros, lo que nos devuelve por defecto su vez una lista, cuando nosotros nos gustar√≠a que nos devolviera un vector que poder incluir como columna. Para ello existen diversas funciones como map_chr(), map_dbl() para devolverlo en un formato concreto (caracter o num√©rico).Ya solo nos falta incorporar dicha operaci√≥n una nueva columna con mutate()","code":"\n# Mutate: nos a√±ade nuevas columnas usando funciones\n# aplicadas a nuestras variables\nstarwars %>% mutate(height_m = height / 100) # altura en metros## # A tibble: 87 √ó 15\n##    name    height  mass hair_color  skin_color eye_color birth_year sex   gender\n##    <chr>    <int> <dbl> <chr>       <chr>      <chr>          <dbl> <chr> <chr> \n##  1 Luke S‚Ä¶    172    77 blond       fair       blue            19   male  mascu‚Ä¶\n##  2 C-3PO      167    75 <NA>        gold       yellow         112   none  mascu‚Ä¶\n##  3 R2-D2       96    32 <NA>        white, bl‚Ä¶ red             33   none  mascu‚Ä¶\n##  4 Darth ‚Ä¶    202   136 none        white      yellow          41.9 male  mascu‚Ä¶\n##  5 Leia O‚Ä¶    150    49 brown       light      brown           19   fema‚Ä¶ femin‚Ä¶\n##  6 Owen L‚Ä¶    178   120 brown, grey light      blue            52   male  mascu‚Ä¶\n##  7 Beru W‚Ä¶    165    75 brown       light      blue            47   fema‚Ä¶ femin‚Ä¶\n##  8 R5-D4       97    32 <NA>        white, red red             NA   none  mascu‚Ä¶\n##  9 Biggs ‚Ä¶    183    84 black       light      brown           24   male  mascu‚Ä¶\n## 10 Obi-Wa‚Ä¶    182    77 auburn, wh‚Ä¶ fair       blue-gray       57   male  mascu‚Ä¶\n## # ‚Ä¶ with 77 more rows, and 6 more variables: homeworld <chr>, species <chr>,\n## #   films <list>, vehicles <list>, starships <list>, height_m <dbl>\nprint(starwars %>% mutate(height_m = height / 100), width = Inf)## # A tibble: 87 √ó 15\n##    name               height  mass hair_color    skin_color  eye_color\n##    <chr>               <int> <dbl> <chr>         <chr>       <chr>    \n##  1 Luke Skywalker        172    77 blond         fair        blue     \n##  2 C-3PO                 167    75 <NA>          gold        yellow   \n##  3 R2-D2                  96    32 <NA>          white, blue red      \n##  4 Darth Vader           202   136 none          white       yellow   \n##  5 Leia Organa           150    49 brown         light       brown    \n##  6 Owen Lars             178   120 brown, grey   light       blue     \n##  7 Beru Whitesun lars    165    75 brown         light       blue     \n##  8 R5-D4                  97    32 <NA>          white, red  red      \n##  9 Biggs Darklighter     183    84 black         light       brown    \n## 10 Obi-Wan Kenobi        182    77 auburn, white fair        blue-gray\n##    birth_year sex    gender    homeworld species films     vehicles  starships\n##         <dbl> <chr>  <chr>     <chr>     <chr>   <list>    <list>    <list>   \n##  1       19   male   masculine Tatooine  Human   <chr [5]> <chr [2]> <chr [2]>\n##  2      112   none   masculine Tatooine  Droid   <chr [6]> <chr [0]> <chr [0]>\n##  3       33   none   masculine Naboo     Droid   <chr [7]> <chr [0]> <chr [0]>\n##  4       41.9 male   masculine Tatooine  Human   <chr [4]> <chr [0]> <chr [1]>\n##  5       19   female feminine  Alderaan  Human   <chr [5]> <chr [1]> <chr [0]>\n##  6       52   male   masculine Tatooine  Human   <chr [3]> <chr [0]> <chr [0]>\n##  7       47   female feminine  Tatooine  Human   <chr [3]> <chr [0]> <chr [0]>\n##  8       NA   none   masculine Tatooine  Droid   <chr [1]> <chr [0]> <chr [0]>\n##  9       24   male   masculine Tatooine  Human   <chr [1]> <chr [0]> <chr [1]>\n## 10       57   male   masculine Stewjon   Human   <chr [6]> <chr [1]> <chr [5]>\n##    height_m\n##       <dbl>\n##  1     1.72\n##  2     1.67\n##  3     0.96\n##  4     2.02\n##  5     1.5 \n##  6     1.78\n##  7     1.65\n##  8     0.97\n##  9     1.83\n## 10     1.82\n## # ‚Ä¶ with 77 more rows\nstarwars %>% transmute(height_m = height / 100)## # A tibble: 87 √ó 1\n##    height_m\n##       <dbl>\n##  1     1.72\n##  2     1.67\n##  3     0.96\n##  4     2.02\n##  5     1.5 \n##  6     1.78\n##  7     1.65\n##  8     0.97\n##  9     1.83\n## 10     1.82\n## # ‚Ä¶ with 77 more rows\nprint(starwars %>%\n  # Calculamos altura en metros y el IMC\n  mutate(height_m = height / 100,\n         BMI = mass / (height_m^2)), width = Inf)## # A tibble: 87 √ó 16\n##    name               height  mass hair_color    skin_color  eye_color\n##    <chr>               <int> <dbl> <chr>         <chr>       <chr>    \n##  1 Luke Skywalker        172    77 blond         fair        blue     \n##  2 C-3PO                 167    75 <NA>          gold        yellow   \n##  3 R2-D2                  96    32 <NA>          white, blue red      \n##  4 Darth Vader           202   136 none          white       yellow   \n##  5 Leia Organa           150    49 brown         light       brown    \n##  6 Owen Lars             178   120 brown, grey   light       blue     \n##  7 Beru Whitesun lars    165    75 brown         light       blue     \n##  8 R5-D4                  97    32 <NA>          white, red  red      \n##  9 Biggs Darklighter     183    84 black         light       brown    \n## 10 Obi-Wan Kenobi        182    77 auburn, white fair        blue-gray\n##    birth_year sex    gender    homeworld species films     vehicles  starships\n##         <dbl> <chr>  <chr>     <chr>     <chr>   <list>    <list>    <list>   \n##  1       19   male   masculine Tatooine  Human   <chr [5]> <chr [2]> <chr [2]>\n##  2      112   none   masculine Tatooine  Droid   <chr [6]> <chr [0]> <chr [0]>\n##  3       33   none   masculine Naboo     Droid   <chr [7]> <chr [0]> <chr [0]>\n##  4       41.9 male   masculine Tatooine  Human   <chr [4]> <chr [0]> <chr [1]>\n##  5       19   female feminine  Alderaan  Human   <chr [5]> <chr [1]> <chr [0]>\n##  6       52   male   masculine Tatooine  Human   <chr [3]> <chr [0]> <chr [0]>\n##  7       47   female feminine  Tatooine  Human   <chr [3]> <chr [0]> <chr [0]>\n##  8       NA   none   masculine Tatooine  Droid   <chr [1]> <chr [0]> <chr [0]>\n##  9       24   male   masculine Tatooine  Human   <chr [1]> <chr [0]> <chr [1]>\n## 10       57   male   masculine Stewjon   Human   <chr [6]> <chr [1]> <chr [5]>\n##    height_m   BMI\n##       <dbl> <dbl>\n##  1     1.72  26.0\n##  2     1.67  26.9\n##  3     0.96  34.7\n##  4     2.02  33.3\n##  5     1.5   21.8\n##  6     1.78  37.9\n##  7     1.65  27.5\n##  8     0.97  34.0\n##  9     1.83  25.1\n## 10     1.82  23.2\n## # ‚Ä¶ with 77 more rows\nstarwars %>%\n  mutate(height_m = height / 100,\n         BMI = mass / (height_m^2)) %>%\n  relocate(height_m, BMI, .after = name)## # A tibble: 87 √ó 16\n##    name   height_m   BMI height  mass hair_color skin_color eye_color birth_year\n##    <chr>     <dbl> <dbl>  <int> <dbl> <chr>      <chr>      <chr>          <dbl>\n##  1 Luke ‚Ä¶     1.72  26.0    172    77 blond      fair       blue            19  \n##  2 C-3PO      1.67  26.9    167    75 <NA>       gold       yellow         112  \n##  3 R2-D2      0.96  34.7     96    32 <NA>       white, bl‚Ä¶ red             33  \n##  4 Darth‚Ä¶     2.02  33.3    202   136 none       white      yellow          41.9\n##  5 Leia ‚Ä¶     1.5   21.8    150    49 brown      light      brown           19  \n##  6 Owen ‚Ä¶     1.78  37.9    178   120 brown, gr‚Ä¶ light      blue            52  \n##  7 Beru ‚Ä¶     1.65  27.5    165    75 brown      light      blue            47  \n##  8 R5-D4      0.97  34.0     97    32 <NA>       white, red red             NA  \n##  9 Biggs‚Ä¶     1.83  25.1    183    84 black      light      brown           24  \n## 10 Obi-W‚Ä¶     1.82  23.2    182    77 auburn, w‚Ä¶ fair       blue-gray       57  \n## # ‚Ä¶ with 77 more rows, and 7 more variables: sex <chr>, gender <chr>,\n## #   homeworld <chr>, species <chr>, films <list>, vehicles <list>,\n## #   starships <list>\nBMI_fun <- function(m, h) {\n  \n  return(m / h^2)\n}\nBMI_fun(90, 1.6)## [1] 35.15625\nstarwars %>%\n  mutate(height_m = height / 100,\n         BMI = BMI_fun(mass, height_m)) %>%\n  # Las movemos al inicio (por defecto las mete al final)\n  relocate(height_m, BMI, .after = name)## # A tibble: 87 √ó 16\n##    name   height_m   BMI height  mass hair_color skin_color eye_color birth_year\n##    <chr>     <dbl> <dbl>  <int> <dbl> <chr>      <chr>      <chr>          <dbl>\n##  1 Luke ‚Ä¶     1.72  26.0    172    77 blond      fair       blue            19  \n##  2 C-3PO      1.67  26.9    167    75 <NA>       gold       yellow         112  \n##  3 R2-D2      0.96  34.7     96    32 <NA>       white, bl‚Ä¶ red             33  \n##  4 Darth‚Ä¶     2.02  33.3    202   136 none       white      yellow          41.9\n##  5 Leia ‚Ä¶     1.5   21.8    150    49 brown      light      brown           19  \n##  6 Owen ‚Ä¶     1.78  37.9    178   120 brown, gr‚Ä¶ light      blue            52  \n##  7 Beru ‚Ä¶     1.65  27.5    165    75 brown      light      blue            47  \n##  8 R5-D4      0.97  34.0     97    32 <NA>       white, red red             NA  \n##  9 Biggs‚Ä¶     1.83  25.1    183    84 black      light      brown           24  \n## 10 Obi-W‚Ä¶     1.82  23.2    182    77 auburn, w‚Ä¶ fair       blue-gray       57  \n## # ‚Ä¶ with 77 more rows, and 7 more variables: sex <chr>, gender <chr>,\n## #   homeworld <chr>, species <chr>, films <list>, vehicles <list>,\n## #   starships <list>\n# Pel√≠culas de los 5 primeros personajes\nstarwars$films[1:5]## [[1]]\n## [1] \"The Empire Strikes Back\" \"Revenge of the Sith\"    \n## [3] \"Return of the Jedi\"      \"A New Hope\"             \n## [5] \"The Force Awakens\"      \n## \n## [[2]]\n## [1] \"The Empire Strikes Back\" \"Attack of the Clones\"   \n## [3] \"The Phantom Menace\"      \"Revenge of the Sith\"    \n## [5] \"Return of the Jedi\"      \"A New Hope\"             \n## \n## [[3]]\n## [1] \"The Empire Strikes Back\" \"Attack of the Clones\"   \n## [3] \"The Phantom Menace\"      \"Revenge of the Sith\"    \n## [5] \"Return of the Jedi\"      \"A New Hope\"             \n## [7] \"The Force Awakens\"      \n## \n## [[4]]\n## [1] \"The Empire Strikes Back\" \"Revenge of the Sith\"    \n## [3] \"Return of the Jedi\"      \"A New Hope\"             \n## \n## [[5]]\n## [1] \"The Empire Strikes Back\" \"Revenge of the Sith\"    \n## [3] \"Return of the Jedi\"      \"A New Hope\"             \n## [5] \"The Force Awakens\"\nlength(starwars$films[1])## [1] 1\n# Mapeamos la lista con length\n(starwars$films %>% map(length))[1:10]## [[1]]\n## [1] 5\n## \n## [[2]]\n## [1] 6\n## \n## [[3]]\n## [1] 7\n## \n## [[4]]\n## [1] 4\n## \n## [[5]]\n## [1] 5\n## \n## [[6]]\n## [1] 3\n## \n## [[7]]\n## [1] 3\n## \n## [[8]]\n## [1] 1\n## \n## [[9]]\n## [1] 1\n## \n## [[10]]\n## [1] 6\n# Mapeamos la lista con length pero devolvemos un vector de n√∫meros enteros\nstarwars$films %>% map_int(length)##  [1] 5 6 7 4 5 3 3 1 1 6 3 2 5 4 1 3 3 1 5 5 3 1 1 2 1 2 1 1 1 1 1 3 1 2 1 1 1 2\n## [39] 1 1 2 1 1 3 1 1 1 3 3 3 2 2 2 1 3 2 1 1 1 2 2 1 1 2 2 1 1 1 1 1 1 1 2 1 1 2\n## [77] 1 1 2 2 1 1 1 1 1 1 3\nstarwars %>%\n  mutate(\"n_peliculas\" = map_int(films, length)) %>%\n  select(c(name, homeworld, n_peliculas))## # A tibble: 87 √ó 3\n##    name               homeworld n_peliculas\n##    <chr>              <chr>           <int>\n##  1 Luke Skywalker     Tatooine            5\n##  2 C-3PO              Tatooine            6\n##  3 R2-D2              Naboo               7\n##  4 Darth Vader        Tatooine            4\n##  5 Leia Organa        Alderaan            5\n##  6 Owen Lars          Tatooine            3\n##  7 Beru Whitesun lars Tatooine            3\n##  8 R5-D4              Tatooine            1\n##  9 Biggs Darklighter  Tatooine            1\n## 10 Obi-Wan Kenobi     Stewjon             6\n## # ‚Ä¶ with 77 more rows"},{"path":"tidyverse.html","id":"recategorizar-columnas","chapter":"Cap√≠tulo 13 Incursi√≥n a tidyverse","heading":"13.3.1 Recategorizar columnas","text":"Una operaci√≥n tambi√©n muy habitual es querer recategorizar nuestras variables: tenemos categor√≠as ya existentes o variables num√©ricas que queremos convertir categor√≠a (factores en R). Supongamos por ejemplo que queremos crear una categor√≠a para cada registro en funci√≥n de su altura: menos de 120, entre 120 y 180, y m√°s de 180. Para ello podemos hacer uso de la funci√≥n cut(), la que en el argumento breaks le debemos indicar los ¬´cortes¬ª o saltos de la variable.Recuerda que si quieres mostrar solo las nuevas columnas creadas puedes usar transmute()Si queremos que la categor√≠a tenga un nombre expl√≠cito (y el intervalo en s√≠), podemos indic√°rselo en labels = el vector de nombres de las categor√≠as.Otra opci√≥n es hacerlo con la funci√≥n factor que nos transforma una variable en categor√≠a.","code":"\nprint(starwars %>% mutate(\"estat_categoria\" = cut(height, breaks = c(-Inf, 120, 180, Inf))), width = Inf)## # A tibble: 87 √ó 15\n##    name               height  mass hair_color    skin_color  eye_color\n##    <chr>               <int> <dbl> <chr>         <chr>       <chr>    \n##  1 Luke Skywalker        172    77 blond         fair        blue     \n##  2 C-3PO                 167    75 <NA>          gold        yellow   \n##  3 R2-D2                  96    32 <NA>          white, blue red      \n##  4 Darth Vader           202   136 none          white       yellow   \n##  5 Leia Organa           150    49 brown         light       brown    \n##  6 Owen Lars             178   120 brown, grey   light       blue     \n##  7 Beru Whitesun lars    165    75 brown         light       blue     \n##  8 R5-D4                  97    32 <NA>          white, red  red      \n##  9 Biggs Darklighter     183    84 black         light       brown    \n## 10 Obi-Wan Kenobi        182    77 auburn, white fair        blue-gray\n##    birth_year sex    gender    homeworld species films     vehicles  starships\n##         <dbl> <chr>  <chr>     <chr>     <chr>   <list>    <list>    <list>   \n##  1       19   male   masculine Tatooine  Human   <chr [5]> <chr [2]> <chr [2]>\n##  2      112   none   masculine Tatooine  Droid   <chr [6]> <chr [0]> <chr [0]>\n##  3       33   none   masculine Naboo     Droid   <chr [7]> <chr [0]> <chr [0]>\n##  4       41.9 male   masculine Tatooine  Human   <chr [4]> <chr [0]> <chr [1]>\n##  5       19   female feminine  Alderaan  Human   <chr [5]> <chr [1]> <chr [0]>\n##  6       52   male   masculine Tatooine  Human   <chr [3]> <chr [0]> <chr [0]>\n##  7       47   female feminine  Tatooine  Human   <chr [3]> <chr [0]> <chr [0]>\n##  8       NA   none   masculine Tatooine  Droid   <chr [1]> <chr [0]> <chr [0]>\n##  9       24   male   masculine Tatooine  Human   <chr [1]> <chr [0]> <chr [1]>\n## 10       57   male   masculine Stewjon   Human   <chr [6]> <chr [1]> <chr [5]>\n##    estat_categoria\n##    <fct>          \n##  1 (120,180]      \n##  2 (120,180]      \n##  3 (-Inf,120]     \n##  4 (180, Inf]     \n##  5 (120,180]      \n##  6 (120,180]      \n##  7 (120,180]      \n##  8 (-Inf,120]     \n##  9 (180, Inf]     \n## 10 (180, Inf]     \n## # ‚Ä¶ with 77 more rows\nstarwars %>% transmute(\"estat_categoria\" = cut(height, breaks = c(-Inf, 120, 180, Inf)))## # A tibble: 87 √ó 1\n##    estat_categoria\n##    <fct>          \n##  1 (120,180]      \n##  2 (120,180]      \n##  3 (-Inf,120]     \n##  4 (180, Inf]     \n##  5 (120,180]      \n##  6 (120,180]      \n##  7 (120,180]      \n##  8 (-Inf,120]     \n##  9 (180, Inf]     \n## 10 (180, Inf]     \n## # ‚Ä¶ with 77 more rows\nstarwars %>%\n  transmute(\"estat_categoria\" = cut(height, breaks = c(-Inf, 120, 180, Inf),\n                                    labels = c(\"bajos\", \"medios\", \"altos\")))## # A tibble: 87 √ó 1\n##    estat_categoria\n##    <fct>          \n##  1 medios         \n##  2 medios         \n##  3 bajos          \n##  4 altos          \n##  5 medios         \n##  6 medios         \n##  7 medios         \n##  8 bajos          \n##  9 altos          \n## 10 altos          \n## # ‚Ä¶ with 77 more rows\n# Vamos a categorizar en bajitos a los que miden menos de 180 cm\nstarwars %>%\n  mutate(talla = factor(height < 180, labels = c(\"bajos\", \"altos\")))## # A tibble: 87 √ó 15\n##    name    height  mass hair_color  skin_color eye_color birth_year sex   gender\n##    <chr>    <int> <dbl> <chr>       <chr>      <chr>          <dbl> <chr> <chr> \n##  1 Luke S‚Ä¶    172    77 blond       fair       blue            19   male  mascu‚Ä¶\n##  2 C-3PO      167    75 <NA>        gold       yellow         112   none  mascu‚Ä¶\n##  3 R2-D2       96    32 <NA>        white, bl‚Ä¶ red             33   none  mascu‚Ä¶\n##  4 Darth ‚Ä¶    202   136 none        white      yellow          41.9 male  mascu‚Ä¶\n##  5 Leia O‚Ä¶    150    49 brown       light      brown           19   fema‚Ä¶ femin‚Ä¶\n##  6 Owen L‚Ä¶    178   120 brown, grey light      blue            52   male  mascu‚Ä¶\n##  7 Beru W‚Ä¶    165    75 brown       light      blue            47   fema‚Ä¶ femin‚Ä¶\n##  8 R5-D4       97    32 <NA>        white, red red             NA   none  mascu‚Ä¶\n##  9 Biggs ‚Ä¶    183    84 black       light      brown           24   male  mascu‚Ä¶\n## 10 Obi-Wa‚Ä¶    182    77 auburn, wh‚Ä¶ fair       blue-gray       57   male  mascu‚Ä¶\n## # ‚Ä¶ with 77 more rows, and 6 more variables: homeworld <chr>, species <chr>,\n## #   films <list>, vehicles <list>, starships <list>, talla <fct>"},{"path":"tidyverse.html","id":"datos-ausentes-y-outliers","chapter":"Cap√≠tulo 13 Incursi√≥n a tidyverse","heading":"13.4 Datos ausentes y outliers","text":"Como ya vimos en Tipos de datos : vectores, los datos ausentes en R pueden venir representados por valores NA o por valores NaN (en realidad este ser√≠a ausente siendo estrictos, es simplemente un resultado num√©rico dentro de los reales). ¬øQu√© hacer con dichos valores?Una primera opci√≥n puede ser eliminar los registros que contengan campos ausentes en alguna de sus variables, haciendo uso de la funci√≥n drop_na().Como ves solo 6 de los 87 registros tienen todos los campos completos. Como quiz√°s todos los campos sean igual de importantes en nuestros, podemos indicarle que nos elimine aquellos registros que tengan datos ausentes algunos campos en concreto (o una coelcci√≥n de ellos)Otra opci√≥n es imputar su valor en el caso de variables cuantitativas por, por ejemplo, la media de la variable sin datos ausentes, y recategorizar las cuantitaivas creando un categor√≠a per se de ausentes.¬†Muchas veces tendremos variables con valores muy alejados de la centralidad, centralidad normalmente entendida como media o mediana, valores muy extremos (conocidos como valores at√≠picos o outliers).Respecto la mediana/percentiles (iqr): una definici√≥n de outlier muy habitual es definirlo como un valor muy alejado del primer/tercer cuartil. La definici√≥n que se suele usar es que el dato sea interior/superior al primer/tercer cuartil una amplitud de X veces el rango intercuart√≠lico (conocido como IQR, calculado como el tercer cuartil menos el primer cuartil) por debajo/encima.Respecto la mediana/percentiles (iqr): una definici√≥n de outlier muy habitual es definirlo como un valor muy alejado del primer/tercer cuartil. La definici√≥n que se suele usar es que el dato sea interior/superior al primer/tercer cuartil una amplitud de X veces el rango intercuart√≠lico (conocido como IQR, calculado como el tercer cuartil menos el primer cuartil) por debajo/encima.Respecto la media (gesd): el criterio utilizado suele ser el conocido como GESD (Generlized Extreme Studentized Deviate Test), un contraste de hip√≥tesis cuya hip√≥tesis nula es que hay at√≠picos en los datos. Puedes ver la formulaci√≥n matem√°tica en https://www.itl.nist.gov/div898/handbook/eda/section3/eda35h3.htmRespecto la media (gesd): el criterio utilizado suele ser el conocido como GESD (Generlized Extreme Studentized Deviate Test), un contraste de hip√≥tesis cuya hip√≥tesis nula es que hay at√≠picos en los datos. Puedes ver la formulaci√≥n matem√°tica en https://www.itl.nist.gov/div898/handbook/eda/section3/eda35h3.htmPara su localizaci√≥n autom√°tica usaremos el paquete anomalize, y la funci√≥n hom√≥nima de dicho paquete, indic√°ndole la columna individual en la que queremos detectar outliers y el m√©todo usar. Con el m√©todo method = \"gesd\" realizaremos el contraste dato dato de forma secuencial (si hay outlier lo quita individualmente y vuelve ejecutarlo). Con method = \"iqr\", ese factor X que nos distanciamos del primer y tercer cuartil es calculado como 0.15/alpha, de forma que con alpha = 0.05 (por ejemplo), dicho factor ser√≠a X = 3. Es MUY IMPORTANTE quitar antes los valores ausentes (para que pueda ejecutarse correctamente).En las columnas mass_l1 y mass_l2 se nos han guardado los l√≠mites para considerar o outlier, y en anomaly tendremos si el valor es un outlier o . Podemos renombrar dicha columna y recategorizarlo con TRUE/FALSEDicha variable auxiliar la podremos usar para decidir si incluir o el registro en futuros pasos, pero tambi√©n podemos usarla para imputarle un valor (por ejemplo, la media).","code":"\nstarwars %>% drop_na()## # A tibble: 6 √ó 14\n##   name     height  mass hair_color  skin_color eye_color birth_year sex   gender\n##   <chr>     <int> <dbl> <chr>       <chr>      <chr>          <dbl> <chr> <chr> \n## 1 Luke Sk‚Ä¶    172    77 blond       fair       blue            19   male  mascu‚Ä¶\n## 2 Obi-Wan‚Ä¶    182    77 auburn, wh‚Ä¶ fair       blue-gray       57   male  mascu‚Ä¶\n## 3 Anakin ‚Ä¶    188    84 blond       fair       blue            41.9 male  mascu‚Ä¶\n## 4 Chewbac‚Ä¶    228   112 brown       unknown    blue           200   male  mascu‚Ä¶\n## 5 Wedge A‚Ä¶    170    77 brown       fair       hazel           21   male  mascu‚Ä¶\n## 6 Darth M‚Ä¶    175    80 none        red        yellow          54   male  mascu‚Ä¶\n## # ‚Ä¶ with 5 more variables: homeworld <chr>, species <chr>, films <list>,\n## #   vehicles <list>, starships <list>\nstarwars %>% drop_na(mass, height, sex, gender, birth_year)## # A tibble: 36 √ó 14\n##    name    height  mass hair_color  skin_color eye_color birth_year sex   gender\n##    <chr>    <int> <dbl> <chr>       <chr>      <chr>          <dbl> <chr> <chr> \n##  1 Luke S‚Ä¶    172    77 blond       fair       blue            19   male  mascu‚Ä¶\n##  2 C-3PO      167    75 <NA>        gold       yellow         112   none  mascu‚Ä¶\n##  3 R2-D2       96    32 <NA>        white, bl‚Ä¶ red             33   none  mascu‚Ä¶\n##  4 Darth ‚Ä¶    202   136 none        white      yellow          41.9 male  mascu‚Ä¶\n##  5 Leia O‚Ä¶    150    49 brown       light      brown           19   fema‚Ä¶ femin‚Ä¶\n##  6 Owen L‚Ä¶    178   120 brown, grey light      blue            52   male  mascu‚Ä¶\n##  7 Beru W‚Ä¶    165    75 brown       light      blue            47   fema‚Ä¶ femin‚Ä¶\n##  8 Biggs ‚Ä¶    183    84 black       light      brown           24   male  mascu‚Ä¶\n##  9 Obi-Wa‚Ä¶    182    77 auburn, wh‚Ä¶ fair       blue-gray       57   male  mascu‚Ä¶\n## 10 Anakin‚Ä¶    188    84 blond       fair       blue            41.9 male  mascu‚Ä¶\n## # ‚Ä¶ with 26 more rows, and 5 more variables: homeworld <chr>, species <chr>,\n## #   films <list>, vehicles <list>, starships <list>\nstarwars %>%\n  # Variables cuanti\n  mutate(across(where(is.numeric),\n                ~replace(.x, is.na(.x), mean(.x, na.rm = TRUE)))) %>%\n  # Variables cuali: pasamos NA y \"none\" a \"unknown\"\n  mutate(across(where(is.character),\n                ~replace(.x, is.na(.x) | .x == \"none\", \"unknown\")))## # A tibble: 87 √ó 14\n##    name    height  mass hair_color  skin_color eye_color birth_year sex   gender\n##    <chr>    <dbl> <dbl> <chr>       <chr>      <chr>          <dbl> <chr> <chr> \n##  1 Luke S‚Ä¶    172    77 blond       fair       blue            19   male  mascu‚Ä¶\n##  2 C-3PO      167    75 unknown     gold       yellow         112   unkn‚Ä¶ mascu‚Ä¶\n##  3 R2-D2       96    32 unknown     white, bl‚Ä¶ red             33   unkn‚Ä¶ mascu‚Ä¶\n##  4 Darth ‚Ä¶    202   136 unknown     white      yellow          41.9 male  mascu‚Ä¶\n##  5 Leia O‚Ä¶    150    49 brown       light      brown           19   fema‚Ä¶ femin‚Ä¶\n##  6 Owen L‚Ä¶    178   120 brown, grey light      blue            52   male  mascu‚Ä¶\n##  7 Beru W‚Ä¶    165    75 brown       light      blue            47   fema‚Ä¶ femin‚Ä¶\n##  8 R5-D4       97    32 unknown     white, red red             87.6 unkn‚Ä¶ mascu‚Ä¶\n##  9 Biggs ‚Ä¶    183    84 black       light      brown           24   male  mascu‚Ä¶\n## 10 Obi-Wa‚Ä¶    182    77 auburn, wh‚Ä¶ fair       blue-gray       57   male  mascu‚Ä¶\n## # ‚Ä¶ with 77 more rows, and 5 more variables: homeworld <chr>, species <chr>,\n## #   films <list>, vehicles <list>, starships <list>\nlibrary(anomalize)\n# Importante: quitar antes missings\nstarwars %>% drop_na(mass) %>% anomalize(mass, method = \"gesd\")## # A tibble: 59 √ó 17\n##    name    height  mass hair_color  skin_color eye_color birth_year sex   gender\n##    <chr>    <int> <dbl> <chr>       <chr>      <chr>          <dbl> <chr> <chr> \n##  1 Luke S‚Ä¶    172    77 blond       fair       blue            19   male  mascu‚Ä¶\n##  2 C-3PO      167    75 <NA>        gold       yellow         112   none  mascu‚Ä¶\n##  3 R2-D2       96    32 <NA>        white, bl‚Ä¶ red             33   none  mascu‚Ä¶\n##  4 Darth ‚Ä¶    202   136 none        white      yellow          41.9 male  mascu‚Ä¶\n##  5 Leia O‚Ä¶    150    49 brown       light      brown           19   fema‚Ä¶ femin‚Ä¶\n##  6 Owen L‚Ä¶    178   120 brown, grey light      blue            52   male  mascu‚Ä¶\n##  7 Beru W‚Ä¶    165    75 brown       light      blue            47   fema‚Ä¶ femin‚Ä¶\n##  8 R5-D4       97    32 <NA>        white, red red             NA   none  mascu‚Ä¶\n##  9 Biggs ‚Ä¶    183    84 black       light      brown           24   male  mascu‚Ä¶\n## 10 Obi-Wa‚Ä¶    182    77 auburn, wh‚Ä¶ fair       blue-gray       57   male  mascu‚Ä¶\n## # ‚Ä¶ with 49 more rows, and 8 more variables: homeworld <chr>, species <chr>,\n## #   films <list>, vehicles <list>, starships <list>, mass_l1 <dbl>,\n## #   mass_l2 <dbl>, anomaly <chr>\nprint(starwars %>%\n        drop_na(mass) %>%\n        anomalize(mass, method = \"gesd\") %>%\n        rename(outlier = anomaly) %>%\n        # Eliminamos la variables auxiliares creadas\n        select(-c(mass_l1, mass_l2)) %>%\n        mutate(outlier = (outlier == \"Yes\")), width = Inf)## # A tibble: 59 √ó 15\n##    name               height  mass hair_color    skin_color  eye_color\n##    <chr>               <int> <dbl> <chr>         <chr>       <chr>    \n##  1 Luke Skywalker        172    77 blond         fair        blue     \n##  2 C-3PO                 167    75 <NA>          gold        yellow   \n##  3 R2-D2                  96    32 <NA>          white, blue red      \n##  4 Darth Vader           202   136 none          white       yellow   \n##  5 Leia Organa           150    49 brown         light       brown    \n##  6 Owen Lars             178   120 brown, grey   light       blue     \n##  7 Beru Whitesun lars    165    75 brown         light       blue     \n##  8 R5-D4                  97    32 <NA>          white, red  red      \n##  9 Biggs Darklighter     183    84 black         light       brown    \n## 10 Obi-Wan Kenobi        182    77 auburn, white fair        blue-gray\n##    birth_year sex    gender    homeworld species films     vehicles  starships\n##         <dbl> <chr>  <chr>     <chr>     <chr>   <list>    <list>    <list>   \n##  1       19   male   masculine Tatooine  Human   <chr [5]> <chr [2]> <chr [2]>\n##  2      112   none   masculine Tatooine  Droid   <chr [6]> <chr [0]> <chr [0]>\n##  3       33   none   masculine Naboo     Droid   <chr [7]> <chr [0]> <chr [0]>\n##  4       41.9 male   masculine Tatooine  Human   <chr [4]> <chr [0]> <chr [1]>\n##  5       19   female feminine  Alderaan  Human   <chr [5]> <chr [1]> <chr [0]>\n##  6       52   male   masculine Tatooine  Human   <chr [3]> <chr [0]> <chr [0]>\n##  7       47   female feminine  Tatooine  Human   <chr [3]> <chr [0]> <chr [0]>\n##  8       NA   none   masculine Tatooine  Droid   <chr [1]> <chr [0]> <chr [0]>\n##  9       24   male   masculine Tatooine  Human   <chr [1]> <chr [0]> <chr [1]>\n## 10       57   male   masculine Stewjon   Human   <chr [6]> <chr [1]> <chr [5]>\n##    outlier\n##    <lgl>  \n##  1 FALSE  \n##  2 FALSE  \n##  3 TRUE   \n##  4 TRUE   \n##  5 FALSE  \n##  6 TRUE   \n##  7 FALSE  \n##  8 FALSE  \n##  9 FALSE  \n## 10 FALSE  \n## # ‚Ä¶ with 49 more rows\nprint(starwars %>%\n        drop_na(mass) %>%\n        anomalize(mass, method = \"gesd\") %>%\n        rename(outlier = anomaly) %>%\n        # Eliminamos la variables auxiliares creadas\n        select(-c(mass_l1, mass_l2)) %>%\n        mutate(outlier = (outlier == \"Yes\"),\n               mass = ifelse(outlier, mean(mass), mass)),\n      width = Inf)## # A tibble: 59 √ó 15\n##    name               height  mass hair_color    skin_color  eye_color\n##    <chr>               <int> <dbl> <chr>         <chr>       <chr>    \n##  1 Luke Skywalker        172  77   blond         fair        blue     \n##  2 C-3PO                 167  75   <NA>          gold        yellow   \n##  3 R2-D2                  96  97.3 <NA>          white, blue red      \n##  4 Darth Vader           202  97.3 none          white       yellow   \n##  5 Leia Organa           150  49   brown         light       brown    \n##  6 Owen Lars             178  97.3 brown, grey   light       blue     \n##  7 Beru Whitesun lars    165  75   brown         light       blue     \n##  8 R5-D4                  97  32   <NA>          white, red  red      \n##  9 Biggs Darklighter     183  84   black         light       brown    \n## 10 Obi-Wan Kenobi        182  77   auburn, white fair        blue-gray\n##    birth_year sex    gender    homeworld species films     vehicles  starships\n##         <dbl> <chr>  <chr>     <chr>     <chr>   <list>    <list>    <list>   \n##  1       19   male   masculine Tatooine  Human   <chr [5]> <chr [2]> <chr [2]>\n##  2      112   none   masculine Tatooine  Droid   <chr [6]> <chr [0]> <chr [0]>\n##  3       33   none   masculine Naboo     Droid   <chr [7]> <chr [0]> <chr [0]>\n##  4       41.9 male   masculine Tatooine  Human   <chr [4]> <chr [0]> <chr [1]>\n##  5       19   female feminine  Alderaan  Human   <chr [5]> <chr [1]> <chr [0]>\n##  6       52   male   masculine Tatooine  Human   <chr [3]> <chr [0]> <chr [0]>\n##  7       47   female feminine  Tatooine  Human   <chr [3]> <chr [0]> <chr [0]>\n##  8       NA   none   masculine Tatooine  Droid   <chr [1]> <chr [0]> <chr [0]>\n##  9       24   male   masculine Tatooine  Human   <chr [1]> <chr [0]> <chr [1]>\n## 10       57   male   masculine Stewjon   Human   <chr [6]> <chr [1]> <chr [5]>\n##    outlier\n##    <lgl>  \n##  1 FALSE  \n##  2 FALSE  \n##  3 TRUE   \n##  4 TRUE   \n##  5 FALSE  \n##  6 TRUE   \n##  7 FALSE  \n##  8 FALSE  \n##  9 FALSE  \n## 10 FALSE  \n## # ‚Ä¶ with 49 more rows"},{"path":"tidyverse.html","id":"visualizar-el-procesamiento-en-tidyverse","chapter":"Cap√≠tulo 13 Incursi√≥n a tidyverse","heading":"13.5 Visualizar el procesamiento en tidyverse","text":"Antes de pasar los ejercicios, existe una reciente herramienta que nos va permitir entender mejor y visualizar el flujo de trabajo de las funciones que hemos visto en este entorno tidyverse: https://tidydatatutor.com/. Basta con poner el c√≥digo que queremos ejecutar, y nos muestra las operaciones en los datos visualmente.\nImagen/gr√°fica 13.2: Tidytutor.\n\nImagen/gr√°fica 13.3: Tidytutor.\n\nImagen/gr√°fica 13.4: Tidytutor.\n\nImagen/gr√°fica 13.5: Tidytutor.\n\nImagen/gr√°fica 13.6: Tidytutor.\n\nImagen/gr√°fica 13.7: Tidytutor.\n","code":""},{"path":"tidyverse.html","id":"ejercicios-9","chapter":"Cap√≠tulo 13 Incursi√≥n a tidyverse","heading":"13.6 üìù Ejercicios","text":"(haz click en las flechas para ver soluciones)üìùEjercicio 1: del fichero starwars encuentra todos los personajes que el peso est√© entre 60 y 90.Soluci√≥n:¬†üìùEjercicio 2: a√±adido al filtro anterior, encuentra todos los personajes de ojos que sean azules, y que tengan menos de 100 a√±os.Soluci√≥n:¬†üìùEjercicio 3: a√±adido al filtro anterior, selecciona solo las columnas name, mass, eye_color, birth_yearSoluci√≥n:¬†üìùEjercicio 4: selecciona solo las columnas que contengan variables num√©ricas, coloca los a√±os de nacimiento como primera columna y cambia los nombres castellano.Soluci√≥n:¬†üìùEjercicio 5: a√±adido la selecci√≥n anterior, coloca los a√±os de nacimiento como primera columna y cambia los nombres castellano.Soluci√≥n:¬†üìùEjercicio 6: calcula una nueva columna que indique el n√∫mero de naves que ha pilotado cada persona (escribe ? starwars en consola para ver documentaci√≥n del fichero).Soluci√≥n:¬†üìùEjercicio 7: con la columna anterior a√±adido, crea una nueva variable TRUE/FALSE que nos diga si ha conducido o alguna nave, y filtra despu√©s solo aquellos personajes que han conducido alguna nave.Soluci√≥n:¬†üìùEjercicio 8: calcula el n√∫mero de pel√≠culas en las que han salido y ordena los personajes de mayor menor n√∫mero de pel√≠culas en las que ha aparecidoSoluci√≥n:¬†üìùEjercicio 9: selecciona 9 personajes al azar.Soluci√≥n:¬†üìùEjercicio 10: de la tabla del ejercicio anterior, selecciona los 5 personajes que en m√°s pel√≠culas han salido y los 5 que menos.Soluci√≥n:¬†üìùEjercicio 11: selecciona las columnas que se refieren variables de color (ojos, piel, pelo).Soluci√≥n:","code":"\n# todas columnas\nfiltro <-\n  starwars %>% filter(between(mass, 60, 90))\nprint(filtro, width = Inf)## # A tibble: 32 √ó 14\n##    name               height  mass hair_color    skin_color eye_color birth_year\n##    <chr>               <int> <dbl> <chr>         <chr>      <chr>          <dbl>\n##  1 Luke Skywalker        172    77 blond         fair       blue            19  \n##  2 C-3PO                 167    75 <NA>          gold       yellow         112  \n##  3 Beru Whitesun lars    165    75 brown         light      blue            47  \n##  4 Biggs Darklighter     183    84 black         light      brown           24  \n##  5 Obi-Wan Kenobi        182    77 auburn, white fair       blue-gray       57  \n##  6 Anakin Skywalker      188    84 blond         fair       blue            41.9\n##  7 Han Solo              180    80 brown         fair       brown           29  \n##  8 Greedo                173    74 <NA>          green      black           44  \n##  9 Wedge Antilles        170    77 brown         fair       hazel           21  \n## 10 Palpatine             170    75 grey          pale       yellow          82  \n##    sex    gender    homeworld species films     vehicles  starships\n##    <chr>  <chr>     <chr>     <chr>   <list>    <list>    <list>   \n##  1 male   masculine Tatooine  Human   <chr [5]> <chr [2]> <chr [2]>\n##  2 none   masculine Tatooine  Droid   <chr [6]> <chr [0]> <chr [0]>\n##  3 female feminine  Tatooine  Human   <chr [3]> <chr [0]> <chr [0]>\n##  4 male   masculine Tatooine  Human   <chr [1]> <chr [0]> <chr [1]>\n##  5 male   masculine Stewjon   Human   <chr [6]> <chr [1]> <chr [5]>\n##  6 male   masculine Tatooine  Human   <chr [3]> <chr [2]> <chr [3]>\n##  7 male   masculine Corellia  Human   <chr [4]> <chr [0]> <chr [2]>\n##  8 male   masculine Rodia     Rodian  <chr [1]> <chr [0]> <chr [0]>\n##  9 male   masculine Corellia  Human   <chr [3]> <chr [1]> <chr [1]>\n## 10 male   masculine Naboo     Human   <chr [5]> <chr [0]> <chr [0]>\n## # ‚Ä¶ with 22 more rows\n# todas columnas\nfiltro <-\n  starwars %>%\n  filter(between(mass, 60, 90) & eye_color != \"blue\" &\n           birth_year < 100)\nprint(filtro, width = Inf)## # A tibble: 15 √ó 14\n##    name              height  mass hair_color    skin_color   eye_color\n##    <chr>              <int> <dbl> <chr>         <chr>        <chr>    \n##  1 Biggs Darklighter    183  84   black         light        brown    \n##  2 Obi-Wan Kenobi       182  77   auburn, white fair         blue-gray\n##  3 Han Solo             180  80   brown         fair         brown    \n##  4 Greedo               173  74   <NA>          green        black    \n##  5 Wedge Antilles       170  77   brown         fair         hazel    \n##  6 Palpatine            170  75   grey          pale         yellow   \n##  7 Boba Fett            183  78.2 black         fair         brown    \n##  8 Lando Calrissian     177  79   black         dark         brown    \n##  9 Ackbar               180  83   none          brown mottle orange   \n## 10 Jar Jar Binks        196  66   none          orange       orange   \n## 11 Darth Maul           175  80   none          red          yellow   \n## 12 Mace Windu           188  84   none          dark         brown    \n## 13 Ki-Adi-Mundi         198  82   white         pale         yellow   \n## 14 Plo Koon             188  80   none          orange       black    \n## 15 Jango Fett           183  79   black         tan          brown    \n##    birth_year sex   gender    homeworld    species      films     vehicles \n##         <dbl> <chr> <chr>     <chr>        <chr>        <list>    <list>   \n##  1       24   male  masculine Tatooine     Human        <chr [1]> <chr [0]>\n##  2       57   male  masculine Stewjon      Human        <chr [6]> <chr [1]>\n##  3       29   male  masculine Corellia     Human        <chr [4]> <chr [0]>\n##  4       44   male  masculine Rodia        Rodian       <chr [1]> <chr [0]>\n##  5       21   male  masculine Corellia     Human        <chr [3]> <chr [1]>\n##  6       82   male  masculine Naboo        Human        <chr [5]> <chr [0]>\n##  7       31.5 male  masculine Kamino       Human        <chr [3]> <chr [0]>\n##  8       31   male  masculine Socorro      Human        <chr [2]> <chr [0]>\n##  9       41   male  masculine Mon Cala     Mon Calamari <chr [2]> <chr [0]>\n## 10       52   male  masculine Naboo        Gungan       <chr [2]> <chr [0]>\n## 11       54   male  masculine Dathomir     Zabrak       <chr [1]> <chr [1]>\n## 12       72   male  masculine Haruun Kal   Human        <chr [3]> <chr [0]>\n## 13       92   male  masculine Cerea        Cerean       <chr [3]> <chr [0]>\n## 14       22   male  masculine Dorin        Kel Dor      <chr [3]> <chr [0]>\n## 15       66   male  masculine Concord Dawn Human        <chr [1]> <chr [0]>\n##    starships\n##    <list>   \n##  1 <chr [1]>\n##  2 <chr [5]>\n##  3 <chr [2]>\n##  4 <chr [0]>\n##  5 <chr [1]>\n##  6 <chr [0]>\n##  7 <chr [1]>\n##  8 <chr [1]>\n##  9 <chr [0]>\n## 10 <chr [0]>\n## 11 <chr [1]>\n## 12 <chr [0]>\n## 13 <chr [0]>\n## 14 <chr [1]>\n## 15 <chr [0]>\n# Solo name, mass, eye_color, birth_year\nfiltro %>% select(c(name, mass, eye_color, birth_year))## # A tibble: 15 √ó 4\n##    name               mass eye_color birth_year\n##    <chr>             <dbl> <chr>          <dbl>\n##  1 Biggs Darklighter  84   brown           24  \n##  2 Obi-Wan Kenobi     77   blue-gray       57  \n##  3 Han Solo           80   brown           29  \n##  4 Greedo             74   black           44  \n##  5 Wedge Antilles     77   hazel           21  \n##  6 Palpatine          75   yellow          82  \n##  7 Boba Fett          78.2 brown           31.5\n##  8 Lando Calrissian   79   brown           31  \n##  9 Ackbar             83   orange          41  \n## 10 Jar Jar Binks      66   orange          52  \n## 11 Darth Maul         80   yellow          54  \n## 12 Mace Windu         84   brown           72  \n## 13 Ki-Adi-Mundi       82   yellow          92  \n## 14 Plo Koon           80   black           22  \n## 15 Jango Fett         79   brown           66\nstarwars %>% select(where(is.numeric))## # A tibble: 87 √ó 3\n##    height  mass birth_year\n##     <int> <dbl>      <dbl>\n##  1    172    77       19  \n##  2    167    75      112  \n##  3     96    32       33  \n##  4    202   136       41.9\n##  5    150    49       19  \n##  6    178   120       52  \n##  7    165    75       47  \n##  8     97    32       NA  \n##  9    183    84       24  \n## 10    182    77       57  \n## # ‚Ä¶ with 77 more rows\nstarwars %>% select(where(is.numeric)) %>%\n  relocate(height, mass, .after = birth_year) %>%\n  rename(edad = birth_year, altura = height, peso = mass)## # A tibble: 87 √ó 3\n##     edad altura  peso\n##    <dbl>  <int> <dbl>\n##  1  19      172    77\n##  2 112      167    75\n##  3  33       96    32\n##  4  41.9    202   136\n##  5  19      150    49\n##  6  52      178   120\n##  7  47      165    75\n##  8  NA       97    32\n##  9  24      183    84\n## 10  57      182    77\n## # ‚Ä¶ with 77 more rows\nstarwars_numero_naves <- \n  starwars %>%\n  mutate(n_naves = map_chr(starships, length))\n\n# Imprimimos todas las columnas\nprint(starwars_numero_naves, width = Inf)## # A tibble: 87 √ó 15\n##    name               height  mass hair_color    skin_color  eye_color\n##    <chr>               <int> <dbl> <chr>         <chr>       <chr>    \n##  1 Luke Skywalker        172    77 blond         fair        blue     \n##  2 C-3PO                 167    75 <NA>          gold        yellow   \n##  3 R2-D2                  96    32 <NA>          white, blue red      \n##  4 Darth Vader           202   136 none          white       yellow   \n##  5 Leia Organa           150    49 brown         light       brown    \n##  6 Owen Lars             178   120 brown, grey   light       blue     \n##  7 Beru Whitesun lars    165    75 brown         light       blue     \n##  8 R5-D4                  97    32 <NA>          white, red  red      \n##  9 Biggs Darklighter     183    84 black         light       brown    \n## 10 Obi-Wan Kenobi        182    77 auburn, white fair        blue-gray\n##    birth_year sex    gender    homeworld species films     vehicles  starships\n##         <dbl> <chr>  <chr>     <chr>     <chr>   <list>    <list>    <list>   \n##  1       19   male   masculine Tatooine  Human   <chr [5]> <chr [2]> <chr [2]>\n##  2      112   none   masculine Tatooine  Droid   <chr [6]> <chr [0]> <chr [0]>\n##  3       33   none   masculine Naboo     Droid   <chr [7]> <chr [0]> <chr [0]>\n##  4       41.9 male   masculine Tatooine  Human   <chr [4]> <chr [0]> <chr [1]>\n##  5       19   female feminine  Alderaan  Human   <chr [5]> <chr [1]> <chr [0]>\n##  6       52   male   masculine Tatooine  Human   <chr [3]> <chr [0]> <chr [0]>\n##  7       47   female feminine  Tatooine  Human   <chr [3]> <chr [0]> <chr [0]>\n##  8       NA   none   masculine Tatooine  Droid   <chr [1]> <chr [0]> <chr [0]>\n##  9       24   male   masculine Tatooine  Human   <chr [1]> <chr [0]> <chr [1]>\n## 10       57   male   masculine Stewjon   Human   <chr [6]> <chr [1]> <chr [5]>\n##    n_naves\n##    <chr>  \n##  1 2      \n##  2 0      \n##  3 0      \n##  4 1      \n##  5 0      \n##  6 0      \n##  7 0      \n##  8 0      \n##  9 1      \n## 10 5      \n## # ‚Ä¶ with 77 more rows\n# Solo la columna a√±adida\nstarwars %>%\n  transmute(n_naves = map_chr(starships, length))## # A tibble: 87 √ó 1\n##    n_naves\n##    <chr>  \n##  1 2      \n##  2 0      \n##  3 0      \n##  4 1      \n##  5 0      \n##  6 0      \n##  7 0      \n##  8 0      \n##  9 1      \n## 10 5      \n## # ‚Ä¶ with 77 more rows\n# Nueva columna l√≥gica\nstarwars_numero_naves %>%\n  mutate(conducir_nave = n_naves > 0) %>%\n  filter(conducir_nave)## # A tibble: 20 √ó 16\n##    name    height  mass hair_color  skin_color eye_color birth_year sex   gender\n##    <chr>    <int> <dbl> <chr>       <chr>      <chr>          <dbl> <chr> <chr> \n##  1 Luke S‚Ä¶    172  77   blond       fair       blue            19   male  mascu‚Ä¶\n##  2 Darth ‚Ä¶    202 136   none        white      yellow          41.9 male  mascu‚Ä¶\n##  3 Biggs ‚Ä¶    183  84   black       light      brown           24   male  mascu‚Ä¶\n##  4 Obi-Wa‚Ä¶    182  77   auburn, wh‚Ä¶ fair       blue-gray       57   male  mascu‚Ä¶\n##  5 Anakin‚Ä¶    188  84   blond       fair       blue            41.9 male  mascu‚Ä¶\n##  6 Chewba‚Ä¶    228 112   brown       unknown    blue           200   male  mascu‚Ä¶\n##  7 Han So‚Ä¶    180  80   brown       fair       brown           29   male  mascu‚Ä¶\n##  8 Wedge ‚Ä¶    170  77   brown       fair       hazel           21   male  mascu‚Ä¶\n##  9 Jek To‚Ä¶    180 110   brown       fair       blue            NA   male  mascu‚Ä¶\n## 10 Boba F‚Ä¶    183  78.2 black       fair       brown           31.5 male  mascu‚Ä¶\n## 11 Lando ‚Ä¶    177  79   black       dark       brown           31   male  mascu‚Ä¶\n## 12 Arvel ‚Ä¶     NA  NA   brown       fair       brown           NA   male  mascu‚Ä¶\n## 13 Nien N‚Ä¶    160  68   none        grey       black           NA   male  mascu‚Ä¶\n## 14 Ric Ol‚Ä¶    183  NA   brown       fair       blue            NA   <NA>  <NA>  \n## 15 Darth ‚Ä¶    175  80   none        red        yellow          54   male  mascu‚Ä¶\n## 16 Plo Ko‚Ä¶    188  80   none        orange     black           22   male  mascu‚Ä¶\n## 17 Gregar‚Ä¶    185  85   black       dark       brown           NA   male  mascu‚Ä¶\n## 18 Grievo‚Ä¶    216 159   none        brown, wh‚Ä¶ green, y‚Ä¶       NA   male  mascu‚Ä¶\n## 19 Poe Da‚Ä¶     NA  NA   brown       light      brown           NA   male  mascu‚Ä¶\n## 20 Padm√© ‚Ä¶    165  45   brown       light      brown           46   fema‚Ä¶ femin‚Ä¶\n## # ‚Ä¶ with 7 more variables: homeworld <chr>, species <chr>, films <list>,\n## #   vehicles <list>, starships <list>, n_naves <chr>, conducir_nave <lgl>\nstarwars %>% # Calculamos primero el n√∫mero de pel√≠culas\n  mutate(n_films = map_int(films, length)) %>%\n  arrange(desc(n_films)) # Ordenamos de mayor a menor## # A tibble: 87 √ó 15\n##    name    height  mass hair_color  skin_color eye_color birth_year sex   gender\n##    <chr>    <int> <dbl> <chr>       <chr>      <chr>          <dbl> <chr> <chr> \n##  1 R2-D2       96    32 <NA>        white, bl‚Ä¶ red             33   none  mascu‚Ä¶\n##  2 C-3PO      167    75 <NA>        gold       yellow         112   none  mascu‚Ä¶\n##  3 Obi-Wa‚Ä¶    182    77 auburn, wh‚Ä¶ fair       blue-gray       57   male  mascu‚Ä¶\n##  4 Luke S‚Ä¶    172    77 blond       fair       blue            19   male  mascu‚Ä¶\n##  5 Leia O‚Ä¶    150    49 brown       light      brown           19   fema‚Ä¶ femin‚Ä¶\n##  6 Chewba‚Ä¶    228   112 brown       unknown    blue           200   male  mascu‚Ä¶\n##  7 Yoda        66    17 white       green      brown          896   male  mascu‚Ä¶\n##  8 Palpat‚Ä¶    170    75 grey        pale       yellow          82   male  mascu‚Ä¶\n##  9 Darth ‚Ä¶    202   136 none        white      yellow          41.9 male  mascu‚Ä¶\n## 10 Han So‚Ä¶    180    80 brown       fair       brown           29   male  mascu‚Ä¶\n## # ‚Ä¶ with 77 more rows, and 6 more variables: homeworld <chr>, species <chr>,\n## #   films <list>, vehicles <list>, starships <list>, n_films <int>\n# Una extracci√≥n aleatoria\nstarwars %>% slice_sample(n = 9)## # A tibble: 9 √ó 14\n##   name      height  mass hair_color skin_color eye_color birth_year sex   gender\n##   <chr>      <int> <dbl> <chr>      <chr>      <chr>          <dbl> <chr> <chr> \n## 1 Dooku        193    80 white      fair       brown            102 male  mascu‚Ä¶\n## 2 Greedo       173    74 <NA>       green      black             44 male  mascu‚Ä¶\n## 3 Gasgano      122    NA none       white, bl‚Ä¶ black             NA male  mascu‚Ä¶\n## 4 Finis Va‚Ä¶    170    NA blond      fair       blue              91 male  mascu‚Ä¶\n## 5 Wicket S‚Ä¶     88    20 brown      brown      brown              8 male  mascu‚Ä¶\n## 6 C-3PO        167    75 <NA>       gold       yellow           112 none  mascu‚Ä¶\n## 7 Lando Ca‚Ä¶    177    79 black      dark       brown             31 male  mascu‚Ä¶\n## 8 Mace Win‚Ä¶    188    84 none       dark       brown             72 male  mascu‚Ä¶\n## 9 Bib Fort‚Ä¶    180    NA none       pale       pink              NA male  mascu‚Ä¶\n## # ‚Ä¶ with 5 more variables: homeworld <chr>, species <chr>, films <list>,\n## #   vehicles <list>, starships <list>\n# otra (que sale distinta, claro)\nstarwars %>% slice_sample(n = 9)## # A tibble: 9 √ó 14\n##   name     height  mass hair_color skin_color  eye_color birth_year sex   gender\n##   <chr>     <int> <dbl> <chr>      <chr>       <chr>          <dbl> <chr> <chr> \n## 1 Eeth Ko‚Ä¶    171    NA black      brown       brown             NA male  mascu‚Ä¶\n## 2 R2-D2        96    32 <NA>       white, blue red               33 none  mascu‚Ä¶\n## 3 Kit Fis‚Ä¶    196    87 none       green       black             NA male  mascu‚Ä¶\n## 4 Jango F‚Ä¶    183    79 black      tan         brown             66 male  mascu‚Ä¶\n## 5 Luke Sk‚Ä¶    172    77 blond      fair        blue              19 male  mascu‚Ä¶\n## 6 Tion Me‚Ä¶    206    80 none       grey        black             NA male  mascu‚Ä¶\n## 7 Dexter ‚Ä¶    198   102 none       brown       yellow            NA male  mascu‚Ä¶\n## 8 R5-D4        97    32 <NA>       white, red  red               NA none  mascu‚Ä¶\n## 9 Taun We     213    NA none       grey        black             NA fema‚Ä¶ femin‚Ä¶\n## # ‚Ä¶ with 5 more variables: homeworld <chr>, species <chr>, films <list>,\n## #   vehicles <list>, starships <list>\n# Una extracci√≥n aleatoria\nselec_aleatoria <- starwars %>% slice_sample(n = 9)\n\n# personajes que en m√°s pel√≠culas han salido (metiendo empates)\nselec_aleatoria  %>%\n  mutate(n_films = map_int(films, length)) %>%\n  slice_max(n_films, n = 5)## # A tibble: 9 √ó 15\n##   name    height  mass hair_color skin_color   eye_color birth_year sex   gender\n##   <chr>    <int> <dbl> <chr>      <chr>        <chr>          <dbl> <chr> <chr> \n## 1 Yoda        66    17 white      green        brown            896 male  mascu‚Ä¶\n## 2 Beru W‚Ä¶    165    75 brown      light        blue              47 fema‚Ä¶ femin‚Ä¶\n## 3 Nute G‚Ä¶    191    90 none       mottled gre‚Ä¶ red               NA male  mascu‚Ä¶\n## 4 Padm√© ‚Ä¶    165    45 brown      light        brown             46 fema‚Ä¶ femin‚Ä¶\n## 5 Biggs ‚Ä¶    183    84 black      light        brown             24 male  mascu‚Ä¶\n## 6 Gasgano    122    NA none       white, blue  black             NA male  mascu‚Ä¶\n## 7 Ben Qu‚Ä¶    163    65 none       grey, green‚Ä¶ orange            NA male  mascu‚Ä¶\n## 8 Grievo‚Ä¶    216   159 none       brown, white green, y‚Ä¶         NA male  mascu‚Ä¶\n## 9 Mon Mo‚Ä¶    150    NA auburn     fair         blue              48 fema‚Ä¶ femin‚Ä¶\n## # ‚Ä¶ with 6 more variables: homeworld <chr>, species <chr>, films <list>,\n## #   vehicles <list>, starships <list>, n_films <int>\n# personajes que en m√°s pel√≠culas han salido (sin empates)\nstarwars %>%\n  mutate(n_films = map_int(films, length)) %>%\n  slice_max(n_films, n = 5, with_ties = FALSE)## # A tibble: 5 √ó 15\n##   name     height  mass hair_color  skin_color eye_color birth_year sex   gender\n##   <chr>     <int> <dbl> <chr>       <chr>      <chr>          <dbl> <chr> <chr> \n## 1 R2-D2        96    32 <NA>        white, bl‚Ä¶ red               33 none  mascu‚Ä¶\n## 2 C-3PO       167    75 <NA>        gold       yellow           112 none  mascu‚Ä¶\n## 3 Obi-Wan‚Ä¶    182    77 auburn, wh‚Ä¶ fair       blue-gray         57 male  mascu‚Ä¶\n## 4 Luke Sk‚Ä¶    172    77 blond       fair       blue              19 male  mascu‚Ä¶\n## 5 Leia Or‚Ä¶    150    49 brown       light      brown             19 fema‚Ä¶ femin‚Ä¶\n## # ‚Ä¶ with 6 more variables: homeworld <chr>, species <chr>, films <list>,\n## #   vehicles <list>, starships <list>, n_films <int>\n# personajes que en menos pel√≠culas han salido (metiendo empates)\nstarwars %>%\n  mutate(n_films = map_int(films, length)) %>%\n  slice_min(n_films, n = 5)## # A tibble: 46 √ó 15\n##    name     height  mass hair_color skin_color eye_color birth_year sex   gender\n##    <chr>     <int> <dbl> <chr>      <chr>      <chr>          <dbl> <chr> <chr> \n##  1 R5-D4        97    32 <NA>       white, red red               NA none  mascu‚Ä¶\n##  2 Biggs D‚Ä¶    183    84 black      light      brown             24 male  mascu‚Ä¶\n##  3 Greedo      173    74 <NA>       green      black             44 male  mascu‚Ä¶\n##  4 Jek Ton‚Ä¶    180   110 brown      fair       blue              NA male  mascu‚Ä¶\n##  5 IG-88       200   140 none       metal      red               15 none  mascu‚Ä¶\n##  6 Bossk       190   113 none       green      red               53 male  mascu‚Ä¶\n##  7 Lobot       175    79 none       light      blue              37 male  mascu‚Ä¶\n##  8 Mon Mot‚Ä¶    150    NA auburn     fair       blue              48 fema‚Ä¶ femin‚Ä¶\n##  9 Arvel C‚Ä¶     NA    NA brown      fair       brown             NA male  mascu‚Ä¶\n## 10 Wicket ‚Ä¶     88    20 brown      brown      brown              8 male  mascu‚Ä¶\n## # ‚Ä¶ with 36 more rows, and 6 more variables: homeworld <chr>, species <chr>,\n## #   films <list>, vehicles <list>, starships <list>, n_films <int>\n# personajes que en menos pel√≠culas han salido (sin empates)\nstarwars %>%\n  mutate(n_films = map_int(films, length)) %>%\n  slice_min(n_films, n = 5, with_ties = FALSE)## # A tibble: 5 √ó 15\n##   name      height  mass hair_color skin_color eye_color birth_year sex   gender\n##   <chr>      <int> <dbl> <chr>      <chr>      <chr>          <dbl> <chr> <chr> \n## 1 R5-D4         97    32 <NA>       white, red red               NA none  mascu‚Ä¶\n## 2 Biggs Da‚Ä¶    183    84 black      light      brown             24 male  mascu‚Ä¶\n## 3 Greedo       173    74 <NA>       green      black             44 male  mascu‚Ä¶\n## 4 Jek Tono‚Ä¶    180   110 brown      fair       blue              NA male  mascu‚Ä¶\n## 5 IG-88        200   140 none       metal      red               15 none  mascu‚Ä¶\n## # ‚Ä¶ with 6 more variables: homeworld <chr>, species <chr>, films <list>,\n## #   vehicles <list>, starships <list>, n_films <int>\n# Contiene \"color\" independientemente de que sea sufijo o prefijo\nstarwars %>% select(contains(\"color\"))## # A tibble: 87 √ó 3\n##    hair_color    skin_color  eye_color\n##    <chr>         <chr>       <chr>    \n##  1 blond         fair        blue     \n##  2 <NA>          gold        yellow   \n##  3 <NA>          white, blue red      \n##  4 none          white       yellow   \n##  5 brown         light       brown    \n##  6 brown, grey   light       blue     \n##  7 brown         light       blue     \n##  8 <NA>          white, red  red      \n##  9 black         light       brown    \n## 10 auburn, white fair        blue-gray\n## # ‚Ä¶ with 77 more rows\n# Contiene \"color\" como sufijo\nstarwars %>% select(ends_with(\"color\"))## # A tibble: 87 √ó 3\n##    hair_color    skin_color  eye_color\n##    <chr>         <chr>       <chr>    \n##  1 blond         fair        blue     \n##  2 <NA>          gold        yellow   \n##  3 <NA>          white, blue red      \n##  4 none          white       yellow   \n##  5 brown         light       brown    \n##  6 brown, grey   light       blue     \n##  7 brown         light       blue     \n##  8 <NA>          white, red  red      \n##  9 black         light       brown    \n## 10 auburn, white fair        blue-gray\n## # ‚Ä¶ with 77 more rows"},{"path":"resumenes.html","id":"resumenes","chapter":"Cap√≠tulo 14 Resumiendo y relacionado los datos","heading":"Cap√≠tulo 14 Resumiendo y relacionado los datos","text":"Ahora que ya sabemos depurar y transformar los datos con pocas l√≠neas de c√≥digo, as√≠ como extraer la informaci√≥n que nos interese, en esta secci√≥n vamos aprender dos cosas b√°sicas la hora de trabajar con datos:Realizar res√∫menes num√©ricos de los datos, de forma general pero tambi√©n cuando queremos calcular estad√≠sticas desagregadas por grupos.Relacionar tablas entre s√≠ (los famosos join).","code":""},{"path":"resumenes.html","id":"tablas-de-frecuencias","chapter":"Cap√≠tulo 14 Resumiendo y relacionado los datos","heading":"14.1 Tablas de frecuencias","text":"Una de las primeras cosas que uno aprende en la asignatura de estad√≠stica descriptiva es saber resumir nuestros datos cuando tenemos muchos, y adem√°s muchos valores repetidos. Vamos construir la tabla de frecuencias de la variable n_films de nuestro ya conocido conjunto starwars (una variable que vamos crear contando en cu√°ntas pel√≠culas aparece cada personaje)Y lo primero es contar: ¬øcu√°ntos registros hay de cada una de las clases? Para ello usaremos la funci√≥n count()Como ves si aplicamos la funci√≥n directamente simplemente nos cuenta el n√∫mero de filas de la tabla, as√≠ que vamos usar la misma funci√≥n pero indic√°ndole la variable.Esa columna n es lo que conocemos como frecuencias absolutas, el n√∫mero de veces que la variable toma dicha valor. Tambi√©n es posible calcular las frecuencias absolutas por varias variables la vez.Podemos tambi√©n a√±adir una columna N_i de frecuencia absoluta acumulada, una columna que nos diga el n√∫mero de personajes que han hecho un n√∫mero de pel√≠culas igual o menor que el indicado.Y ambas columnas podemos pasarlas porcentaje o proporci√≥n, las columnas f_i y F_i o frecuencias relativas (acumulada y acumulada, respectivamente).Esas frecuencias relativas quiz√°s querramos tenerlas expresadas en porcentajes en lugar de en proporciones.Por √∫ltimo, con la tabla tabla_freq expresando las frecuencias relativas en proporciones, vamos cambiar el nombre de las columnas para que tengan los t√≠picos nombres de una tabla de frecuencias.¬øC√≥mo construir una tabla similar para variables continuas? La metodolog√≠a ser√≠a la misma solo que antes debemos agrupar los datos (por ejemplo, de la variable height) en subintervalos.El problema es que cuando agrupamos los datos de una variable continua en subintervalos, aunque nos sirva como resumen para tener una idea de como se comporta nuestra variable (y sea algo necesario para, por ejemplo, construir un ¬´histograma discretizado¬ª), la hora de calcular sus estad√≠sticas perdemos informaci√≥n ya que todos los elementos que cae en un intervalo se les imputar√° un √∫nico valor: la marca de clase, que normalmente es el punto medio del intervalo.Vamos calcular res√∫menes num√©ricos de las variables sin agrupar aprovechando que R el trabajo por nosotros/.","code":"\nlibrary(purrr)\nlibrary(tidyverse)\nstarwars_nueva <- starwars %>%\n  mutate(n_films = map_int(films, length))\nstarwars_nueva %>% count()## # A tibble: 1 √ó 1\n##       n\n##   <int>\n## 1    87\ntabla_freq <- starwars_nueva %>% count(n_films)\ntabla_freq## # A tibble: 7 √ó 2\n##   n_films     n\n##     <int> <int>\n## 1       1    46\n## 2       2    18\n## 3       3    13\n## 4       4     2\n## 5       5     5\n## 6       6     2\n## 7       7     1\nstarwars_nueva %>% count(sex, gender)## # A tibble: 6 √ó 3\n##   sex            gender        n\n##   <chr>          <chr>     <int>\n## 1 female         feminine     16\n## 2 hermaphroditic masculine     1\n## 3 male           masculine    60\n## 4 none           feminine      1\n## 5 none           masculine     5\n## 6 <NA>           <NA>          4\n# Construimos de cero\ntabla_freq <-\n  starwars_nueva %>%\n  # n: frecuencia absoluta\n  count(n_films) %>%\n  # N_i: frecuencia absoluta acumulada\n  mutate(N_i = cumsum(n)) # cumsum calcula la suma acumulada\ntabla_freq## # A tibble: 7 √ó 3\n##   n_films     n   N_i\n##     <int> <int> <int>\n## 1       1    46    46\n## 2       2    18    64\n## 3       3    13    77\n## 4       4     2    79\n## 5       5     5    84\n## 6       6     2    86\n## 7       7     1    87\n# Construimos de cero\ntabla_freq <- starwars_nueva %>%\n  # n: frecuencia absoluta\n  count(n_films) %>%\n  # N_i: frecuencia absoluta acumulada\n  mutate(N_i = cumsum(n)) %>% # cumsum calcula la suma acumulada\n  mutate(f_i = prop.table(n), # prop.table nos devuelve proporciones\n         F_i = cumsum(f_i))\ntabla_freq## # A tibble: 7 √ó 5\n##   n_films     n   N_i    f_i   F_i\n##     <int> <int> <int>  <dbl> <dbl>\n## 1       1    46    46 0.529  0.529\n## 2       2    18    64 0.207  0.736\n## 3       3    13    77 0.149  0.885\n## 4       4     2    79 0.0230 0.908\n## 5       5     5    84 0.0575 0.966\n## 6       6     2    86 0.0230 0.989\n## 7       7     1    87 0.0115 1\n# Pasamos frecuencias relativas a porcentajes\ntabla_freq %>% mutate(f_i = f_i * 100,\n                      F_i = F_i * 100)## # A tibble: 7 √ó 5\n##   n_films     n   N_i   f_i   F_i\n##     <int> <int> <int> <dbl> <dbl>\n## 1       1    46    46 52.9   52.9\n## 2       2    18    64 20.7   73.6\n## 3       3    13    77 14.9   88.5\n## 4       4     2    79  2.30  90.8\n## 5       5     5    84  5.75  96.6\n## 6       6     2    86  2.30  98.9\n## 7       7     1    87  1.15 100\n# Renombramos\ntabla_freq <- tabla_freq %>%\n  rename(n_i = n, x_i = n_films)\ntabla_freq## # A tibble: 7 √ó 5\n##     x_i   n_i   N_i    f_i   F_i\n##   <int> <int> <int>  <dbl> <dbl>\n## 1     1    46    46 0.529  0.529\n## 2     2    18    64 0.207  0.736\n## 3     3    13    77 0.149  0.885\n## 4     4     2    79 0.0230 0.908\n## 5     5     5    84 0.0575 0.966\n## 6     6     2    86 0.0230 0.989\n## 7     7     1    87 0.0115 1\n# Construimos de cero\ntabla_freq_continua <-\n  starwars %>%\n  # agrupamos los datos en tramos de 20 en 20\n  mutate(intervalo = cut(height, breaks = seq(65, 265, by = 20))) %>%\n  count(intervalo) %>%\n  mutate(N_i = cumsum(n)) %>% # cumsum calcula la suma acumulada\n  mutate(f_i = prop.table(n), # prop.table nos devuelve proporciones\n         F_i = cumsum(f_i))\ntabla_freq_continua## # A tibble: 11 √ó 5\n##    intervalo     n   N_i    f_i    F_i\n##    <fct>     <int> <int>  <dbl>  <dbl>\n##  1 (65,85]       2     2 0.0230 0.0230\n##  2 (85,105]      5     7 0.0575 0.0805\n##  3 (105,125]     2     9 0.0230 0.103 \n##  4 (125,145]     1    10 0.0115 0.115 \n##  5 (145,165]     9    19 0.103  0.218 \n##  6 (165,185]    34    53 0.391  0.609 \n##  7 (185,205]    19    72 0.218  0.828 \n##  8 (205,225]     5    77 0.0575 0.885 \n##  9 (225,245]     3    80 0.0345 0.920 \n## 10 (245,265]     1    81 0.0115 0.931 \n## 11 <NA>          6    87 0.0690 1"},{"path":"resumenes.html","id":"res√∫menes-num√©ricos-summarise-y-skimr-y-por-grupos-group_by","chapter":"Cap√≠tulo 14 Resumiendo y relacionado los datos","heading":"14.2 Res√∫menes num√©ricos (summarise y skimr) y por grupos (group_by)","text":"Antes de pasar ver c√≥mo generar nuestras propias estad√≠sticas de los datos, veamos la funcionalidad de un maravilloso paquete llamado skimr, que nos permite tener en un vistazo un resumen num√©rico muy completo de nuestros datos, con histograma/diagrama de barras incluido.Tabla 14.1: Data summaryVariable type: characterVariable type: listVariable type: numericDicho resumen nos proporciona:Variables de tipo caracter: n_missing (n√∫mero de ausentes), complete_rate (proporci√≥n de datos sin ausentes), min/max y n_unique (n√∫mero de valores √∫nicos).Variables de tipo caracter: n_missing (n√∫mero de ausentes), complete_rate (proporci√≥n de datos sin ausentes), min/max y n_unique (n√∫mero de valores √∫nicos).Variables de tipo lista: n_missing (n√∫mero de ausentes), complete_rate (proporci√≥n de datos sin ausentes), n_unique (n√∫mero de valores √∫nicos) y min_length/max_length (longitud m√≠nimo/m√°xima de las listas).Variables de tipo lista: n_missing (n√∫mero de ausentes), complete_rate (proporci√≥n de datos sin ausentes), n_unique (n√∫mero de valores √∫nicos) y min_length/max_length (longitud m√≠nimo/m√°xima de las listas).Variables de tipo num√©rico: n_missing (n√∫mero de ausentes), complete_rate (proporci√≥n de datos sin ausentes), mean/sd (media y cuasidesviaci√≥n t√≠pica), p0/p25/p50/p75/p100 (cuartiles, percentiles 0%-25%-50%-75%-100%, valores que nos dividen nuestro conjunto en 4 trozos) e hist (una especie de histograma/barras sencillo).Variables de tipo num√©rico: n_missing (n√∫mero de ausentes), complete_rate (proporci√≥n de datos sin ausentes), mean/sd (media y cuasidesviaci√≥n t√≠pica), p0/p25/p50/p75/p100 (cuartiles, percentiles 0%-25%-50%-75%-100%, valores que nos dividen nuestro conjunto en 4 trozos) e hist (una especie de histograma/barras sencillo).Este resumen solo podemos visualizarlo sino que podemos guardarlo para exportarlo por ejemplo en un .csv.Sin embargo, aunque el resumen es bastante completo, muchas veces querremos generar nuestras propias estad√≠sticas o res√∫menes num√©ricos, y para eso vamos aplicar summarise(), que nos calcular√° estad√≠sticas de nuestros datos. Por ejemplo, vamos calcular las medidas de centralizaci√≥n (media-mediana-moda). Para las dos primeras basta con aplicar las funciones correspondientes.Como ves nos devuelve un dato ausente ya que al existir datos ausentes en la variables, la media tambi√©n lo es. Para evitar ese problema podemos hacer dos cosas: eliminar antes los ausentes, o indicarle en la propia media y mediana que haga el c√°lculo ignorando los valores NA.La media es una medida de centralizaci√≥n basada en el valor que nos minimiza el promedio de desviaciones al cuadrado (varianza) y solo se puede calcular para variables cuantitativas (discretas o continuas).La mediana se define como el valor que ocupa el centro de los datos CUANDO LOS ORDENAMOS de menor mayor, un valor que nos deja por debajo al menos el 50% y por encima al menos el 50%.La mediana tambi√©n se puede calcular para variables cualitativas ordinales (categor√≠as que se puedan ordenar). Vamos construir una variable que sea ¬´muy bajo-bajo-medio-alto-muy alto¬ª seg√∫n la estatura, y calcular la mediana para dichas categor√≠as.Para la moda tenemos alg√∫n problema mayor ya que hay un funci√≥n en los paquetes {base} para su c√°lculo, as√≠ que para ello usaremos el paquete modeest: la funci√≥n mfv() nos calcula la moda exacta de una variable num√©rica discreta o cuantitativa (busca los valores m√°s repetidos), la funci√≥n mlv() nos calcula la moda estimada de una variable num√©rica continua.F√≠jate que el resumen ha agrupado todas las modas y medianas que hemos calculado la vez: la salida de nuestro resumen es una lista, con tablas su vez dentro.De la misma manera podemos pedirle que nos calcule medidas de dispersi√≥n (varianza, desv. t√≠pica y cv), de c√≥mo de dispersos est√°n los datos respecto un centro, normalmente la media, y medidas de localizaci√≥n (percentiles).Haciendo uso de cosas ya vistas podemos, por ejemplo, calcular el coeficiente de variaci√≥n (CV) de todas las variables num√©ricas para poder decidir cual es m√°s o menos dispersa.","code":"\nlibrary(skimr)\nstarwars %>% skim()\nlibrary(skimr)\nresumen_skim <- starwars %>% skim()\nstarwars %>% summarise(media = mean(mass),\n                       mediana = median(mass))## # A tibble: 1 √ó 2\n##   media mediana\n##   <dbl>   <dbl>\n## 1    NA      NA\n# Primero eliminamos NA\nstarwars %>% drop_na(mass) %>%\n  summarise(media = mean(mass), mediana = median(mass))## # A tibble: 1 √ó 2\n##   media mediana\n##   <dbl>   <dbl>\n## 1  97.3      79\n# Al realizar el c√°lculo los ignora\nstarwars %>%\n  summarise(media = mean(mass, na.rm = TRUE),\n            mediana = median(mass, na.rm = TRUE))## # A tibble: 1 √ó 2\n##   media mediana\n##   <dbl>   <dbl>\n## 1  97.3      79\n# Media de todas las cuantitativas\nstarwars_nueva %>%\n  summarise(media = across(where(is.numeric), mean, na.rm = TRUE))## # A tibble: 1 √ó 1\n##   media$height $mass $birth_year $n_films\n##          <dbl> <dbl>       <dbl>    <dbl>\n## 1         174.  97.3        87.6     1.99\n# Media y mediana de todas las cuantitativas\nstarwars_nueva %>%\n  summarise(media = across(where(is.numeric), mean, na.rm = TRUE),\n            mediana = across(where(is.numeric), median, na.rm = TRUE))## # A tibble: 1 √ó 2\n##   media$height $mass $birth_year $n_films mediana$height $mass $birth_year\n##          <dbl> <dbl>       <dbl>    <dbl>          <int> <dbl>       <dbl>\n## 1         174.  97.3        87.6     1.99            180    79          52\ncategorias <- c(\"muy bajo\", \"bajo\", \"medio\", \"alto\", \"muy alto\")\nstarwars_talla <- \n  starwars %>%\n  mutate(talla =\n           cut(height, breaks = c(-Inf, 80, 120, 160, 190, Inf),\n               labels = categorias))\n\n# Mediana (hay que pas√°rselo como n√∫mero)\nstarwars_talla %>%\n  summarise(mediana =\n              categorias[median(as.numeric(talla), na.rm = TRUE)])## # A tibble: 1 √ó 1\n##   mediana\n##   <chr>  \n## 1 alto\nlibrary(modeest)\n\n# Media y mediana y moda de mass y n_films\nresumen <- \n  starwars_nueva %>%\n  summarise(media = across(c(mass, n_films), mean, na.rm = TRUE),\n            mediana = across(c(mass, n_films), median, na.rm = TRUE),\n            moda_n_films = mfv(n_films, na_rm = TRUE),\n            moda_mass = mlv(mass, na.rm = TRUE))\nresumen## # A tibble: 1 √ó 4\n##   media$mass $n_films mediana$mass $n_films moda_n_films moda_mass\n##        <dbl>    <dbl>        <dbl>    <int>        <int>     <dbl>\n## 1       97.3     1.99           79        1            1      80.3\nstarwars %>%\n  summarise(media = mean(mass, na.rm = TRUE),\n            mediana = median(mass, na.rm = TRUE),\n            moda = mlv(mass, na.rm = TRUE),\n            var = var(mass, na.rm = TRUE),\n            sd = sd(mass, na.rm = TRUE),\n            cv = sd / abs(media),\n            p13 = quantile(mass, probs = c(0.13), na.rm = TRUE),\n            p87 = quantile(mass, probs = c(0.87), na.rm = TRUE))## # A tibble: 1 √ó 8\n##   media mediana  moda    var    sd    cv   p13   p87\n##   <dbl>   <dbl> <dbl>  <dbl> <dbl> <dbl> <dbl> <dbl>\n## 1  97.3      79  80.3 28716.  169.  1.74  46.6  111.\nresumen <- \n  starwars %>%\n  summarise(media = across(where(is.numeric), mean, na.rm = TRUE),\n            var = across(where(is.numeric), var, na.rm = TRUE),\n            cv = sqrt(var) / abs(media))\nresumen$media## # A tibble: 1 √ó 3\n##   height  mass birth_year\n##    <dbl> <dbl>      <dbl>\n## 1   174.  97.3       87.6\nresumen$var## # A tibble: 1 √ó 3\n##   height   mass birth_year\n##    <dbl>  <dbl>      <dbl>\n## 1  1209. 28716.     23929.\nresumen$cv # m√°s homog√©nea la altura por tener menos CV.##      height     mass birth_year\n## 1 0.1994197 1.741382   1.766587"},{"path":"resumenes.html","id":"agrupando-datos-group_by","chapter":"Cap√≠tulo 14 Resumiendo y relacionado los datos","heading":"14.2.1 Agrupando datos: group_by","text":"Una de las funcionalidades m√°s potentes es la opci√≥n de a√±adir antes una agrupaci√≥n con group_by(). Esta funci√≥n per se cambia los datos sino que cambia la forma en la que se aplicar√°n las funciones posteriores, realiz√°ndose por desagregadas grupos.Imagina que queremos calcular la media de altura y peso de cada personaje PERO desagregada por cada una de las clases que tenemos en la variable sex.Lo que obtenemos es la media de todos los personajes sino la media desagregada por grupo, grupo marcado por la variable sex. Las agrupaciones pueden estar en funci√≥n de varias variables la vez.Dicha funci√≥n tambi√©n es muy √∫til cuando queremos realizar un filtro de registros en base al n√∫mero de cada clase: por ejemplo, vamos filtrar los registros que pertenezcan una clase de sex que tenga al menos 10 individuos dentro de dicho grupo.Si te fijas solo deber√≠amos filtrar los registros que sean female y male. Vamos hacerlo de forma autom√°tica en base dicho umbral.Para comprobar r√°pidamente que efectivamente solo ha filtrado aquellos grupos con m√°s de 10 elementos en ellos podemos a√±adir count().Los res√∫menes y las agrupaciones podemos combinarlas de todas las formas que nos imaginemos, por ejemplo, calculando la media desagregada por sexo y g√©nero pero solo de las variables num√©ricas.","code":"\nstarwars %>% group_by(sex) %>%\n  summarise(media_altura = mean(height, na.rm = TRUE),\n            media_peso = mean(mass, na.rm = TRUE)) %>%\n  ungroup()## # A tibble: 5 √ó 3\n##   sex            media_altura media_peso\n##   <chr>                 <dbl>      <dbl>\n## 1 female                 169.       54.7\n## 2 hermaphroditic         175      1358  \n## 3 male                   179.       81.0\n## 4 none                   131.       69.8\n## 5 <NA>                   181.       48\nstarwars %>% group_by(sex, gender) %>%\n  summarise(media_altura = mean(height, na.rm = TRUE),\n            media_peso = mean(mass, na.rm = TRUE)) %>%\n  ungroup()## # A tibble: 6 √ó 4\n##   sex            gender    media_altura media_peso\n##   <chr>          <chr>            <dbl>      <dbl>\n## 1 female         feminine          169.       54.7\n## 2 hermaphroditic masculine         175      1358  \n## 3 male           masculine         179.       81.0\n## 4 none           feminine           96       NaN  \n## 5 none           masculine         140        69.8\n## 6 <NA>           <NA>              181.       48\nstarwars %>%\n  group_by(sex) %>%\n  count() %>%\n  ungroup()## # A tibble: 5 √ó 2\n##   sex                n\n##   <chr>          <int>\n## 1 female            16\n## 2 hermaphroditic     1\n## 3 male              60\n## 4 none               6\n## 5 <NA>               4\n# Podemos filtrar por grupos solo aquellos que superen un\n# un umbral m√≠nimo\nstarwars %>% \n  group_by(sex) %>% \n  filter(n() > 10) %>%\n  ungroup()## # A tibble: 76 √ó 14\n##    name    height  mass hair_color  skin_color eye_color birth_year sex   gender\n##    <chr>    <int> <dbl> <chr>       <chr>      <chr>          <dbl> <chr> <chr> \n##  1 Luke S‚Ä¶    172    77 blond       fair       blue            19   male  mascu‚Ä¶\n##  2 Darth ‚Ä¶    202   136 none        white      yellow          41.9 male  mascu‚Ä¶\n##  3 Leia O‚Ä¶    150    49 brown       light      brown           19   fema‚Ä¶ femin‚Ä¶\n##  4 Owen L‚Ä¶    178   120 brown, grey light      blue            52   male  mascu‚Ä¶\n##  5 Beru W‚Ä¶    165    75 brown       light      blue            47   fema‚Ä¶ femin‚Ä¶\n##  6 Biggs ‚Ä¶    183    84 black       light      brown           24   male  mascu‚Ä¶\n##  7 Obi-Wa‚Ä¶    182    77 auburn, wh‚Ä¶ fair       blue-gray       57   male  mascu‚Ä¶\n##  8 Anakin‚Ä¶    188    84 blond       fair       blue            41.9 male  mascu‚Ä¶\n##  9 Wilhuf‚Ä¶    180    NA auburn, gr‚Ä¶ fair       blue            64   male  mascu‚Ä¶\n## 10 Chewba‚Ä¶    228   112 brown       unknown    blue           200   male  mascu‚Ä¶\n## # ‚Ä¶ with 66 more rows, and 5 more variables: homeworld <chr>, species <chr>,\n## #   films <list>, vehicles <list>, starships <list>\nstarwars %>% \n  group_by(sex) %>% \n  filter(n() > 10) %>%\n  count() %>%\n  ungroup()## # A tibble: 2 √ó 2\n##   sex        n\n##   <chr>  <int>\n## 1 female    16\n## 2 male      60\nstarwars %>% # doble agrupaci√≥n\n  group_by(sex, gender) %>%\n  summarise(across(where(is.numeric), mean, na.rm = TRUE)) %>%\n  ungroup()## # A tibble: 6 √ó 5\n##   sex            gender    height   mass birth_year\n##   <chr>          <chr>      <dbl>  <dbl>      <dbl>\n## 1 female         feminine    169.   54.7       47.2\n## 2 hermaphroditic masculine   175  1358        600  \n## 3 male           masculine   179.   81.0       85.5\n## 4 none           feminine     96   NaN        NaN  \n## 5 none           masculine   140    69.8       53.3\n## 6 <NA>           <NA>        181.   48         62"},{"path":"resumenes.html","id":"rowwise-operaciones-por-filas","chapter":"Cap√≠tulo 14 Resumiendo y relacionado los datos","heading":"14.2.2 Rowwise: operaciones por filas","text":"Por √∫ltimo veamos un ejemplo de una opci√≥n muy √∫til usada antes de una operaci√≥n que es rowwise(): toda operaci√≥n que venga despu√©s se aplicar√° en cada fila por separado. Para el ejemplo vamos definir un fichero dummy de notas en mates, lengua y dibujo de 50 alumnos. Para ello usamos la funci√≥n sample(): le decimos que seleccione aleatoriamente size = 50 notas de un conjunto de notas posibles (0:10), y que lo haga con reemplazamiento (replace = TRUE, es decir, que dos alumnos puedan tener la misma nota)Una vez que tenemos 3 notas aleatorias por cada uno de los 50 alumnos, ¬øqu√© sucede si yo quiero calcular la nota media del curso?Como ves si aplicamos la media de las tres variables, en cada fila el valor de media_curso es id√©ntico ya que nos ha hecho la media global: ha tomado las 50 filas, las 3 columnas, y ha hecho la media de 150 datos. Cuando en realidad nosotros nos gustar√≠a sacar una media por registro, que para cada alumno tengamos la media de las asignaturas.Solos nos falta poner la guinda lo aprendido esta introducci√≥n: vamos ver como podemos relacionar dos conjuntos de datos distintos entre s√≠.","code":"\nnotas <- tibble(\"mates\" = sample(0:10, size = 50, replace = TRUE),\n                \"lengua\" = sample(0:10, size = 50, replace = TRUE),\n                \"dibujo\" = sample(0:10, size = 50, replace = TRUE))\nnotas## # A tibble: 50 √ó 3\n##    mates lengua dibujo\n##    <int>  <int>  <int>\n##  1     2      4      5\n##  2     1      4     10\n##  3     8      5      9\n##  4     4      5      8\n##  5     2      1      1\n##  6     6      0      6\n##  7     2      1      4\n##  8     2      9      0\n##  9     0      3      9\n## 10     9      9      8\n## # ‚Ä¶ with 40 more rows\nnotas %>% mutate(media_curso = mean(c(mates, lengua, dibujo)))## # A tibble: 50 √ó 4\n##    mates lengua dibujo media_curso\n##    <int>  <int>  <int>       <dbl>\n##  1     2      4      5        4.95\n##  2     1      4     10        4.95\n##  3     8      5      9        4.95\n##  4     4      5      8        4.95\n##  5     2      1      1        4.95\n##  6     6      0      6        4.95\n##  7     2      1      4        4.95\n##  8     2      9      0        4.95\n##  9     0      3      9        4.95\n## 10     9      9      8        4.95\n## # ‚Ä¶ with 40 more rows\n# Aplicado por fila\nnotas %>% rowwise() %>%\n  mutate(media_curso = mean(c(mates, lengua, dibujo)))## # A tibble: 50 √ó 4\n## # Rowwise: \n##    mates lengua dibujo media_curso\n##    <int>  <int>  <int>       <dbl>\n##  1     2      4      5        3.67\n##  2     1      4     10        5   \n##  3     8      5      9        7.33\n##  4     4      5      8        5.67\n##  5     2      1      1        1.33\n##  6     6      0      6        4   \n##  7     2      1      4        2.33\n##  8     2      9      0        3.67\n##  9     0      3      9        4   \n## 10     9      9      8        8.67\n## # ‚Ä¶ with 40 more rows"},{"path":"resumenes.html","id":"relacionar-datos-joins","chapter":"Cap√≠tulo 14 Resumiendo y relacionado los datos","heading":"14.3 Relacionar datos (joins)","text":"Una de las opciones m√°s comunes para trabajar con datos es tener nuestra disposici√≥n diversas tablas, con alguno o varios de los campos en com√∫n, y nos interesa veces cruzar datos de ambos para tener una informaci√≥n m√°s completa con el conjunto de las tablas. Es lo que se conoce en ciencia de datos e inform√°tica como hacer un join de tablas. Para ese cruce ser√° indispensable que haya uno o varios campos clave, campos que sirvan para identificar un√≠vocamente cada registro (por ejemplo, DNI).\nImagen/gr√°fica 14.1: Esquema con los principales tipos de join, extra√≠do de https://estradawebgroup.com/Post/-Que-es-y-para-que-sirve-SQL-Joins-/4278\nExisten principalmente cuatro tipos de cruces si pensamos en cruzar un conjunto con otro conjunto B:Inner join: solo nos quedamos con las filas que tengan correspondencia en ambas tablas (personas cuyo DNI aparezca en ambas tablas, por ejemplo).Inner join: solo nos quedamos con las filas que tengan correspondencia en ambas tablas (personas cuyo DNI aparezca en ambas tablas, por ejemplo).Left (outer) join: nos quedamos con todas las filas de , buscando que registros de dicha tabla est√°n tambi√©n en B, completando los datos de esta tabla para esos registros.Left (outer) join: nos quedamos con todas las filas de , buscando que registros de dicha tabla est√°n tambi√©n en B, completando los datos de esta tabla para esos registros.Right (outer) join: nos quedamos con todas las filas de B, buscando que registros de dicha tabla est√°n tambi√©n en , completando los datos de esta tabla para esos registros.Right (outer) join: nos quedamos con todas las filas de B, buscando que registros de dicha tabla est√°n tambi√©n en , completando los datos de esta tabla para esos registros.Full join: nos quedamos con todas las filas de y B, tengan o correspondencia en la otra tabla (si est√° en una de ellas, las columnas correspondientes quedar√°n como campo ausente).Full join: nos quedamos con todas las filas de y B, tengan o correspondencia en la otra tabla (si est√° en una de ellas, las columnas correspondientes quedar√°n como campo ausente).Esos campos clave (keys) ser√°n las columnas que usaremos para definir los cruces. Para los ejemplos usaremos las tablas del paquete nycflights13.Dicho paquete cuenta con las siguientes tablas:airlines: nombre de la aerol√≠nea (con su abreviatura).airports: datos de aeropuertos (nombres, longitud, latitud, altitud, etc).flights: datos de vuelos (con tailnum como marca de idenfiticaci√≥n).planes: datos de los aviones.weather: datos meteorol√≥gicos horarios de las estaciones LGA, JFK y EWR.Veamos un ejemplo: imagina que queremos completar en la tabla de vuelos los datos de cada una de las aerol√≠neas que operan dichos vuelos. Vamos seleccionar unas pocas columnas para que sea m√°s f√°cil de visualizar.Queremos TODAS las filas de los vuelos, todos sus registros, pero a√±adiendo la informaci√≥n que tenemos de la aerol√≠nea que opere los vuelos, as√≠ que haremos un LEFT JOIN de flights vs airlines. El campo com√∫n que nos permite cruzarla, la clave (key) es el c√≥digo abreviado de las aerol√≠neas (variable carrier).Si te fijas ahora tenemos en l_join_flights_airlines las mismas 336776 filas pero con una columna m√°s: la tabla airlines ten√≠a 2 columnas, una la com√∫n con flights y en otra la nueva que se ha incorporado la tabla. ¬øY si en flights hab√≠a alg√∫n vuelo operado por alguna aerol√≠nea que estuviese en airlines?En este caso todos los registros de la primera tabla ten√≠an su correspondencia en la segunda tabla. Veamos un ejemplo donde suceda eso, quit√°ndole algunas filas airlines, quitando las aerol√≠neas con c√≥digos \"B6\".En el anterior ejemplo tenemos 54 635 filas que cuyo nombre est√° ausente, es decir, 54 635 filas de flights que tienen correspondencia en la tabla filtrada airlines_filtrada. Ahora las filas que han encontrado su match en la segunda tabla est√°n como campo ausente.\nImagen/gr√°fica 14.2: Esquema del left join, extra√≠do de https://r4ds..co.nz/relational-data.html#mutating-joins\nLa misma l√≥gica para los RIGHT JOIN y los FULL JOIN. En este √∫ltimo tendremos bastantes datos ausentes, ya que todos los registros que est√©n en ambas tablas tendr√°n una parte de sus variables como NA\nImagen/gr√°fica 14.3: Esquema del right join, extra√≠do de https://r4ds..co.nz/relational-data.html#mutating-joins\n\nImagen/gr√°fica 14.4: Esquema del full join, extra√≠do de https://r4ds..co.nz/relational-data.html#mutating-joins\nUn tipo de join especial son los INNER JOIN. Hasta ahora la tabla resultante ten√≠a al menos tantas filas como tuviese la tabla m√°s peque√±a en el cruce. En el caso de los INNER JOIN vamos reducir el tama√±o ya que solo nos quedaremos con aquellos registros que podamos encontrar en ambas, de forma que el cruce nunca generar√° datos ausentes.\nImagen/gr√°fica 14.5: Esquema del inner join, extra√≠do de https://r4ds..co.nz/relational-data.html#mutating-joins\n","code":"\nlibrary(nycflights13)\n# Seleccionamos antes columnas para que sea m√°s corto\nflights_filtrada <- flights %>%\n  select(year:day, arr_time, carrier:dest)\nflights_filtrada## # A tibble: 336,776 √ó 9\n##     year month   day arr_time carrier flight tailnum origin dest \n##    <int> <int> <int>    <int> <chr>    <int> <chr>   <chr>  <chr>\n##  1  2013     1     1      830 UA        1545 N14228  EWR    IAH  \n##  2  2013     1     1      850 UA        1714 N24211  LGA    IAH  \n##  3  2013     1     1      923 AA        1141 N619AA  JFK    MIA  \n##  4  2013     1     1     1004 B6         725 N804JB  JFK    BQN  \n##  5  2013     1     1      812 DL         461 N668DN  LGA    ATL  \n##  6  2013     1     1      740 UA        1696 N39463  EWR    ORD  \n##  7  2013     1     1      913 B6         507 N516JB  EWR    FLL  \n##  8  2013     1     1      709 EV        5708 N829AS  LGA    IAD  \n##  9  2013     1     1      838 B6          79 N593JB  JFK    MCO  \n## 10  2013     1     1      753 AA         301 N3ALAA  LGA    ORD  \n## # ‚Ä¶ with 336,766 more rows\n# Mismas filas pero con una nueva columna: siempre que sea\n# posible el cruce tendr√° la info de la aerol√≠nea\nl_join_flights_airlines <-\n  flights_filtrada %>% left_join(airlines, by = \"carrier\")\nl_join_flights_airlines## # A tibble: 336,776 √ó 10\n##     year month   day arr_time carrier flight tailnum origin dest  name          \n##    <int> <int> <int>    <int> <chr>    <int> <chr>   <chr>  <chr> <chr>         \n##  1  2013     1     1      830 UA        1545 N14228  EWR    IAH   United Air Li‚Ä¶\n##  2  2013     1     1      850 UA        1714 N24211  LGA    IAH   United Air Li‚Ä¶\n##  3  2013     1     1      923 AA        1141 N619AA  JFK    MIA   American Airl‚Ä¶\n##  4  2013     1     1     1004 B6         725 N804JB  JFK    BQN   JetBlue Airwa‚Ä¶\n##  5  2013     1     1      812 DL         461 N668DN  LGA    ATL   Delta Air Lin‚Ä¶\n##  6  2013     1     1      740 UA        1696 N39463  EWR    ORD   United Air Li‚Ä¶\n##  7  2013     1     1      913 B6         507 N516JB  EWR    FLL   JetBlue Airwa‚Ä¶\n##  8  2013     1     1      709 EV        5708 N829AS  LGA    IAD   ExpressJet Ai‚Ä¶\n##  9  2013     1     1      838 B6          79 N593JB  JFK    MCO   JetBlue Airwa‚Ä¶\n## 10  2013     1     1      753 AA         301 N3ALAA  LGA    ORD   American Airl‚Ä¶\n## # ‚Ä¶ with 336,766 more rows\n# Filtramos\nl_join_flights_airlines %>% filter(is.na(name))## # A tibble: 0 √ó 10\n## # ‚Ä¶ with 10 variables: year <int>, month <int>, day <int>, arr_time <int>,\n## #   carrier <chr>, flight <int>, tailnum <chr>, origin <chr>, dest <chr>,\n## #   name <chr>\nairlines_filtrada <- airlines %>% \n  filter(!(carrier %in% c(\"B6\")))\nl_join <- flights_filtrada %>% left_join(airlines_filtrada, by = \"carrier\")\ndim(l_join %>% filter(is.na(name)))## [1] 54635    10\nl_join## # A tibble: 336,776 √ó 10\n##     year month   day arr_time carrier flight tailnum origin dest  name          \n##    <int> <int> <int>    <int> <chr>    <int> <chr>   <chr>  <chr> <chr>         \n##  1  2013     1     1      830 UA        1545 N14228  EWR    IAH   United Air Li‚Ä¶\n##  2  2013     1     1      850 UA        1714 N24211  LGA    IAH   United Air Li‚Ä¶\n##  3  2013     1     1      923 AA        1141 N619AA  JFK    MIA   American Airl‚Ä¶\n##  4  2013     1     1     1004 B6         725 N804JB  JFK    BQN   <NA>          \n##  5  2013     1     1      812 DL         461 N668DN  LGA    ATL   Delta Air Lin‚Ä¶\n##  6  2013     1     1      740 UA        1696 N39463  EWR    ORD   United Air Li‚Ä¶\n##  7  2013     1     1      913 B6         507 N516JB  EWR    FLL   <NA>          \n##  8  2013     1     1      709 EV        5708 N829AS  LGA    IAD   ExpressJet Ai‚Ä¶\n##  9  2013     1     1      838 B6          79 N593JB  JFK    MCO   <NA>          \n## 10  2013     1     1      753 AA         301 N3ALAA  LGA    ORD   American Airl‚Ä¶\n## # ‚Ä¶ with 336,766 more rows\ntabla1 <- tibble(\"key_1\" = 1:7, \"valor_1\" = paste0(\"x\", 1:7))\ntabla2 <- tibble(\"key_2\" = c(0, 1, 2, 5, 6, 9, 10),\n                 \"valor_2\" = paste0(\"x\", c(0, 1, 2, 5, 6, 9, 10)))\n\n# Left\ntabla1 %>% left_join(tabla2, by = c(\"key_1\" = \"key_2\"))## # A tibble: 7 √ó 3\n##   key_1 valor_1 valor_2\n##   <dbl> <chr>   <chr>  \n## 1     1 x1      x1     \n## 2     2 x2      x2     \n## 3     3 x3      <NA>   \n## 4     4 x4      <NA>   \n## 5     5 x5      x5     \n## 6     6 x6      x6     \n## 7     7 x7      <NA>\n# Right\ntabla1 %>% right_join(tabla2, by = c(\"key_1\" = \"key_2\"))## # A tibble: 7 √ó 3\n##   key_1 valor_1 valor_2\n##   <dbl> <chr>   <chr>  \n## 1     1 x1      x1     \n## 2     2 x2      x2     \n## 3     5 x5      x5     \n## 4     6 x6      x6     \n## 5     0 <NA>    x0     \n## 6     9 <NA>    x9     \n## 7    10 <NA>    x10\n# Full\ntabla1 %>% full_join(tabla2, by = c(\"key_1\" = \"key_2\"))## # A tibble: 10 √ó 3\n##    key_1 valor_1 valor_2\n##    <dbl> <chr>   <chr>  \n##  1     1 x1      x1     \n##  2     2 x2      x2     \n##  3     3 x3      <NA>   \n##  4     4 x4      <NA>   \n##  5     5 x5      x5     \n##  6     6 x6      x6     \n##  7     7 x7      <NA>   \n##  8     0 <NA>    x0     \n##  9     9 <NA>    x9     \n## 10    10 <NA>    x10\n# Inner\ntabla1 %>% inner_join(tabla2, by = c(\"key_1\" = \"key_2\"))## # A tibble: 4 √ó 3\n##   key_1 valor_1 valor_2\n##   <dbl> <chr>   <chr>  \n## 1     1 x1      x1     \n## 2     2 x2      x2     \n## 3     5 x5      x5     \n## 4     6 x6      x6"},{"path":"resumenes.html","id":"ejercicios-10","chapter":"Cap√≠tulo 14 Resumiendo y relacionado los datos","heading":"14.4 üìù Ejercicios","text":"en breve","code":""},{"path":"resumen-1.html","id":"resumen-1","chapter":"Cap√≠tulo 15 ¬øQu√© sabemos hacer?","heading":"Cap√≠tulo 15 ¬øQu√© sabemos hacer?","text":"Hasta aqu√≠ el aperitivo¬øQu√© datos hemos aprendido manejar?Tabla 15.1: Tipos de datos mencionados hasta ahora¬øQu√© paquetes hemos usado ya?Como ves, hemos podido hacer bastantes cosas ya en R con muy pocos paquetes, y ocupando el m√≠nimo espacio y tiempo en nuestro ordenador.Tabla 15.2: Paquetes mencionados hasta ahoraQuiz√°s creas que te queda un mundo por aprender:¬øC√≥mo manejo datos de forma m√°s profunda (filtrar, operar con ellos, etc)?¬øC√≥mo realizo an√°lisis estad√≠sticos?¬øC√≥mo visualizo datos?¬øC√≥mo generar informes con los resultados (ver (Xie 2015))?¬øC√≥mo crear webs interactivas para la visualizaci√≥n y an√°lisis de datos?te voy mentir: tendr√≠as d√≠as de tu vida para ir investigando todos los paquetes que hay hechos en R (ni t√∫ ni nadie). Pero la idea de estos primeros cap√≠tulos era que fueses experto en R sino que vieses que, con pocas l√≠neas de c√≥digo y con cierta pr√°ctica, se puede empezar tener herramientas para comenzar nuestra andadura en el an√°lisis estad√≠stico trav√©s de este software. te obsesiones con saberte todos los comandos de todos los paquetes o acabar√°s loco/.\nImagen/gr√°fica 15.1: Cuando intentas aprenderte todos los paquetes.\nEstos primeros cap√≠tulos de un lenguaje de programaci√≥n suelen ser un poco ¬´aburridos¬ªSi sabes programar, te habr√°n parecido triviales (m√°s all√° de conocer la sintaxis propia de R).Si sab√≠as programar, han sido de repente un pu√±ado de conceptos y cosas recordar, que hasta que nos los vayas practicando tendr√°s que acudir este manual (u otros recursos). te obsesiones con memorizar: yo consulto cada d√≠a cosas que aparecen en este tutorial porque se olvidan.Lo importante es entender, memorizar comandosPero aunque sean m√°s aburridos estos primeros conceptos, son necesarios para empezar caminar: el inicio de aprender un idioma siempre es un poco meh, pero sin las reglas b√°sicas de gram√°tica y un m√≠nimo de l√©xico nunca podr√°s empezar.","code":""},{"path":"recursos.html","id":"recursos","chapter":"Cap√≠tulo 16 Recursos extras","heading":"Cap√≠tulo 16 Recursos extras","text":"","code":""},{"path":"recursos.html","id":"aleatorio-1","chapter":"Cap√≠tulo 16 Recursos extras","heading":"16.1 Incursi√≥n aleatoria","text":"Antes de acabar esta breve introducci√≥n R merece la pena hablar de ¬´lo aleatorio¬ª y su generaci√≥n en R.¬øC√≥mo se define la aleatoriedad?Si alguna vez interactuado con matem√°ticos o estad√≠sticos (Dios te libre), seguramente es una palabra que les hayas escuchado mentar: aleatoriedad. Existen m√∫ltiples definiciones, y este manual tampoco pretende ser un tratado de filosof√≠a de la ciencia, pero podemos definir la aleatoriedad de la siguiente manera:¬†GLOSARIO: aleatoriedadPropiedad de todo proceso cuyo resultado final se puede conocer con exactitud - nivel individual o particular - antes de que se realice, aunque las condiciones iniciales se mantengan constantes (ejemplo: lanzar un dado).¬øQu√© significa la palabra ¬´aleatorio¬ª?üõë tiene que implicar algo ca√≥tico.\nüõë significa que se pueda predecir nivel de conjunto.\nüõë significa que carezca de un patr√≥n de comportamiento.\n¬†El ejemplo perfecto para entender las implicaciones de algo aleatorio es un dado, ya que podemos saber con exactitud cu√°l ser√° la siguiente tirada, pero tiene un patr√≥n: si tiramos un mill√≥n de veces, aproximadamente un sexto del total de tiradas ser√°n un 1.¬†En el an√°lisis estad√≠stico y en la programaci√≥n en R nos vamos encontrar con m√∫ltiples situaciones en las que lo aleatorio juega un papel importante, y aunque este sea un tutorial muy b√°sico e introductorio, creo que es interesante conocer algunas formas muy sencillas de generar n√∫meros aleatorios (o‚Ä¶tanto, ahora llegamos la Secci√≥n 16.2).Empecemos por lo m√°s simple: vamos simular tiradas de una moneda, asumiendo que solo tenemos dos opciones (eliminando la opci√≥n de caer de canto). Cuando tiramos una moneda es un experimento aleatorio, ya que sabemos el resultado exacto de la siguiente tirada, pero s√≠ sabemos que la probabilidad te√≥rica es de 50-50, y que las √∫nicas opciones elegir son cara y cruz.Una forma de ver el experimento de lanzar una moneda es pensar que tenemos una urna con dos bolas (cara y cruz), y empezamos sacar bolas de la urna (permitiendo que al sacar una bola, se pueda devolver la urna de nuevo). Eso es precisamente lo que hace la funci√≥n sample(), una funci√≥n que nos seleccionar√° ¬´aleatoriamente¬ª elementos de una urna.x: los elementos distintos que tiene para elegir, que en nuestro caso ser√°n \"cara\" y \"cruz\".size: el n√∫mero de bolas que queremos sacar de la urna.replace: si tras extraer devolvemos la bola la urna (replace = TRUE) o si se queda fuera (replace = FALSE, valor por defecto).prob: la probabilidad que tiene cada elemento en caso de ser equiprobables (valor por defecto).F√≠jate que hemos indicado expl√≠citamente replace = TRUE para decirle que aunque solo tengamos dos opciones, vamos permitir que tras extraer una bola, la apuntemos, y la volvamos introducir (puede salir de nuevo). ¬øQu√© sucede si replace = FALSE (su valor por defecto)?Al tener solo dos opciones, y permitir que al extraer bolas vuelvan la urna, tras extraer las dos √∫nicas bolas, el proceso puede continuar hasta los 20 lanzamientos.Como seguramente te hayas percatado, lanzar una moneda es un experimento dicot√≥mico, y dichos experimentos tienen una gran ventaja en programaci√≥n y es que podemos escribirlo en binario: 0 para lo que llamemos fracaso (cara, por ejemplo), 1 para lo que llamemos √©xito (cruz).Generar experimentos dicot√≥micos de forma binario nos permite hacer c√°lculos sobre las tiradas de forma muy sencilla e intuitiva, ya que nos permite pasar de tener cadenas de texto n√∫meros.El argumento prob = ... nos permite generar experimentos que sean dicot√≥micos pero que sean equiprobables, algo similar lanzar una moneda trucada (por ejemplo, 30% caras y 70% cruces). N√≥tese como dichas probabilidades deben ser introducidas como proporciones (divididas entre 100).üìùEjercicio: ¬øc√≥mo simular√≠as 200 tiradas de un dado?Soluci√≥n:","code":"\n# Tiramos 20 veces una moneda\nsample(x = c(\"cara\", \"cruz\"), size = 20, replace = TRUE)##  [1] \"cara\" \"cruz\" \"cara\" \"cruz\" \"cara\" \"cara\" \"cruz\" \"cara\" \"cara\" \"cruz\"\n## [11] \"cara\" \"cara\" \"cruz\" \"cara\" \"cruz\" \"cruz\" \"cruz\" \"cara\" \"cruz\" \"cruz\"\n# Tiramos 20 veces una moneda SIN reemplazamiento\nsample(x = c(\"cara\", \"cruz\"), size = 20)## Error in sample.int(length(x), size, replace, prob): cannot take a sample larger than the population when 'replace = FALSE'\n# Tiramos 50 veces una moneda: 0 es cara, 1 es cruz\nn_tiradas <- 50\ntiradas <- sample(x = 0:1, size = n_tiradas, replace = TRUE)\ntiradas##  [1] 1 0 1 1 1 0 1 0 1 1 1 0 1 0 1 0 0 1 1 0 0 0 1 0 1 1 0 0 1 1 0 0 0 0 1 0 0 1\n## [39] 1 1 1 0 0 1 0 0 1 1 1 1\n# Cantidad de cruces: sumamos los 1's\nsum(tiradas)## [1] 27\n# Cantidad de caras: lo que son cruces\nn_tiradas - sum(tiradas)## [1] 23\n# % de caras\ncat(paste0(100 * sum(tiradas) / n_tiradas, \"% de cruces\"))## 54% de cruces\n# Tiradas de una moneda trucada\ntiradas <- sample(x = 0:1, size = n_tiradas, replace = TRUE, prob = c(0.3, 0.7))\n\n# % de caras\ncat(paste0(100 * sum(tiradas) / n_tiradas, \"% de cruces\"))## 78% de cruces\n# Lo √∫nico que cambia son las opciones en la urna\nsample(x = 1:6, size = 200, replace = TRUE)##   [1] 6 3 5 2 5 3 2 2 3 5 5 6 4 5 3 5 3 5 4 3 1 5 3 5 1 3 4 2 4 6 3 1 4 4 6 1 3\n##  [38] 6 6 6 6 2 1 6 5 4 1 2 2 4 3 2 5 5 6 3 1 5 3 6 4 6 6 5 2 1 1 4 1 1 4 5 1 3\n##  [75] 6 1 2 4 1 3 2 4 1 3 3 4 6 1 6 1 2 1 3 2 6 2 6 1 3 5 6 6 3 2 6 4 1 6 1 2 6\n## [112] 3 1 3 1 1 4 4 4 5 3 1 1 6 6 5 2 6 6 2 4 1 5 5 6 6 5 4 2 6 5 5 3 6 5 2 5 6\n## [149] 1 5 3 3 4 3 1 2 6 4 2 3 6 2 6 2 4 5 2 6 5 6 1 3 5 3 6 6 1 4 4 3 2 3 3 4 6\n## [186] 5 5 3 6 1 6 6 1 3 4 2 1 1 1 3"},{"path":"recursos.html","id":"pseudoaleatorio","chapter":"Cap√≠tulo 16 Recursos extras","heading":"16.2 Pseudoaleatoriedad","text":"Si hecho varias pruebas con los c√≥digos de arriba quiz√°s ya hayas visto que cada vez que lanzas el c√≥digo, el resultado es distinto, algo similar lo que suceder√≠a si lanzas una moneda. Prueba ejecutar este c√≥digo varias veces.¬øY si quisi√©ramos generar toda la clase la misma tirada de moneda?Lo primero que quiz√°s pienses es que es imposible, ya que al tirar una moneda en la vida real, nunca vamos tener forma de garantizar que salgan las mismas tiradas diferentes personas. Y efectivamente eso ser√≠a cierto si nuestros procesos generados hubiesen sido aleatorios, como en la vida real pero‚Ä¶lo son.Mientras esperamos que lleguen al mainstream los ordenadores cu√°nticos, TODO lo que hay en tu ordenador es determ√≠nistico, ya que cualquier proceso se reduce una secuencia de bits (0's y 1's) y un algoritmo (sin azar, cuyo resultado siempre ser√° el mismo bajo las mismas condiciones iniciales). aqu√≠ la decepci√≥n de tu vida: un ordenador ¬´normal¬ª puede generar procesos aleatorios, sino procesos y n√∫meros PSEUDOALEATORIOS, basados en cadenas pseudoaleatorias generadas por un algoritmo determin√≠stico.Dichas secuencias aparentan ser aleatorias pero lo son, y de hecho muchas son peri√≥dicas: si generamos el n√∫mero suficiente de elementos de la cadena pseudoaleatoria volveremos al inicio. Muchos de los algoritmos disponibles para generar n√∫meros aleatorios dependen, entre otros factores, de un valor inicial llamada semilla (normalmente obtenida partir del reloj interno del ordenador): misma semilla, mismo resultado ¬´aleatorio¬ª. Para fijar la semilla usaremos set.seed(), pas√°ndole como argumento una secuencia de n√∫meros (todos la misma).Siempre la misma tirada si la semilla inicial es la misma ya que las cadenas pseudoaleatorias que usa el ordenador para simular nuestras tiradas son id√©nticas.","code":"\nsample(0:1, size = 20, replace = TRUE)##  [1] 1 0 1 0 1 1 0 1 0 0 0 1 0 1 0 0 1 0 0 0\nsample(0:1, size = 20, replace = TRUE)##  [1] 1 1 1 1 1 0 1 0 0 1 1 1 1 1 1 0 0 0 0 1\nsample(0:1, size = 20, replace = TRUE)##  [1] 1 0 0 1 0 1 1 0 0 0 1 1 1 1 0 1 1 1 0 0\nset.seed(1234567)\nsample(0:1, size = 20, replace = TRUE)##  [1] 0 1 1 0 1 0 0 0 1 1 0 1 0 1 0 0 1 1 1 0\nset.seed(1234567)\nsample(0:1, size = 20, replace = TRUE)##  [1] 0 1 1 0 1 0 0 0 1 1 0 1 0 1 0 0 1 1 1 0\nset.seed(1234567)\nsample(0:1, size = 20, replace = TRUE)##  [1] 0 1 1 0 1 0 0 0 1 1 0 1 0 1 0 0 1 1 1 0"},{"path":"recursos.html","id":"ggplot2","chapter":"Cap√≠tulo 16 Recursos extras","heading":"16.3 Visualizando datos: incursi√≥n a ggplot2","text":"Este curso es una peque√±a introducci√≥n y pretende ser un manual extenso ni detallado de R, as√≠ que entraremos en profundidad en la parte visual. Pero si creo que merece la pena hacer una breve incursi√≥n al dataviz ya que una de las principales fortalezas de R frente Python es el manejo de datos con tidyverse, entorno en el que se incluye el paquete ggplot2.La visualizaci√≥n de datos o dataviz deber√≠a ser una parte fundamental de todo an√°lisis de datos. es solo que nuestro trabajo sea m√°s presentable y est√©tico (algo fundamental). La visualizaci√≥n de datos es fundamental para convertir el dato en informaci√≥n, y usar dicha informaci√≥n para contar una historia con nuestros datos: solo importa lo que cuentas sino c√≥mo lo cuentas).\nImagen/gr√°fica 16.1: Imagen extra√≠da de Reddit https://www.reddit.com/r/lego/comments/pezxk5/oc_a_lego_data_story_adapted_from_original_image/.\nUno de los ejemplos m√°s famosos para explicar la importancia de la visualizaci√≥n de datos en el an√°lisis exploratorio es el conocido como cuarteto de Anscombe: cuatro pares de datos \\((X, Y)\\) con la misma media de todas las \\(X\\), la misma media de todas las \\(Y\\), la misma correlaci√≥n en todos los pares y la misma recta de regresi√≥n si la pint√°semos. Matem√°ticamente, con dichos indicadores, podr√≠amos distinguir un conjunto de datos de otro, pero al visualizarlos, son datos totalmente distintos. Algo similar sucede con el conjunto de datos Datasaurus que te visualizo debajo de estas l√≠neas, conjunto creado por el experto en visualizaci√≥n de datos Alberto Cairo: mismas medias y varianzas, mismas correlaciones, pero datos totalmente distintos.","code":""},{"path":"recursos.html","id":"grammar-of-graphics-gg-entendiendo-la-gram√°tica-ggplot2","chapter":"Cap√≠tulo 16 Recursos extras","heading":"16.3.1 Grammar of graphics (gg): entendiendo la gram√°tica ggplot2","text":"La idea de la filosof√≠a detr√°s del paquete ggplot2 (ya incluido en tidyverse) es entender los gr√°ficos como parte integrada del flujo de procesamiento, depuraci√≥n y modelado de los datos, d√°ndoles una gram√°tica Grammar Graphics (ver https://ggplot2-book.org/introduction.html) que nos permite combinar diferentes elementos gr√°ficos y ligarlos los datos. El objetivo es empezar con un lienzo en blanco e ir a√±adiendo capas tu gr√°fico, como har√≠as por ejemplo en Photoshop, con la diferencia de que nuestras capas podemos ligarlas al conjunto de datos, tanto las capas est√©ticas como las estad√≠sticas. Y dicho paquete nos permite hacerlo con la misma filosof√≠a con la que hemos procesado los datos\nImagen/gr√°fica 16.2: Idea detr√°s de la ¬´Grammar graphics¬ª de Wilkinson.\nLa ventaja del sistema ggplot2 es poder mapear atributos est√©ticos (color, forma, tama√±o) de objetos geom√©tricos (puntos, barras, l√≠neas) en funci√≥n de los datos, a√±adiendo transformaciones de los datos, res√∫menes estad√≠sticos y transformaciones de las coordenadas.Un gr√°fico se compondr√° de las siguientes capasElementos geom√©tricos (geom): puntos, l√≠neas, barras, pol√≠gonos, etc.Transformaciones estad√≠sticas (stat): ordenar, resumir, agrupar, etc.Elementos del espacio aesthetics (scale): color, forma, tama√±o, leyenda, ejes, etc.Sistema de coordenadas (coord): coordenadas, grids, etc.Componer gr√°ficas (facet): visualizar varias gr√°ficas la vez.Temas (theme): fuente, tama√±o de letra, subt√≠tulos, captions, etc.","code":""},{"path":"recursos.html","id":"primer-intento-scatter-plot-o-diagrama-de-puntos","chapter":"Cap√≠tulo 16 Recursos extras","heading":"16.4 Primer intento: scatter plot o diagrama de puntos","text":"Veamos un primer intento para entender la filosof√≠a. Imagina que queremos dibujar un scatter plot o diagrama de (dispersi√≥n) de puntos. Para ello vamos usar el conjunto de datos gapminder del paquete hom√≥nimo, un fichero con datos de esperanzas de vida, poblaciones y renta per c√°pita de distintos pa√≠ses en distintos momentos temporales.Para empezar con algo sencillo filtraremos solo los datos del a√±o 1997 haciendo uso de filter().Vamos realizar un diagrama de puntos enfrentando en el eje y la poblaci√≥n (variable pop) y en el eje x la renta per c√°pita (variable gdpPercap). ¬øQu√© necesitamos?Datos: el conjunto filtrado gapminder_1997.Mapeado: indicarle en aes() (aesthetics) las variables pintar en cada coordenada.Elegir geometr√≠a: puntos.Podemos hacer lo mismo pero cambiando el rol de las coordenadas, intercambiando lsa variablesY podemos repetirlo enfrentando ahora la poblaci√≥n en el eje X y la experanza de vida en el eje Y (variable lifeExp).veces nos puede ser m√°s conveniente representar alguna de las variables en escala logar√≠tmica (importante: ind√≠calo siempre en el gr√°fico), lo que podemos hacer facilmente con scale_x_log10() y scale_y_log10()¬øC√≥mo podemos dar color y tama√±o nuestro gr√°fico?La opci√≥n m√°s sencilla es indic√°ndole, dentro de geom_point() el color de la geometr√≠a con color = ... (en este caso, el color del punto), mediante un color fijo, bien sea con alguno de los colores reservados que tiene R, bien sea con su c√≥digo hexadecimalDe la misma manera podemos indicarle el tama√±o de la geometr√≠a (en este caso del punto) con size = ..., incluso la transparencia que queremos para un color dado con alpha = ... (entre 0 - transparente - y 1 - totalmente opaco).Dichos par√°metros se los hemos pasado fijos, como si fuera un valor constante pero podemos mapear los aesthetics de un gr√°fico para que dependan de los datos, por ejemplo, asign√°ndole un color cada continente.Podemos combinarlo con lo que hemos hecho anteriormente e indicarle adem√°s que queremos el tama√±o en funci√≥n de la renta, con cierto grado de transparencia.En lugar de jugar con el color, tambi√©n podr√≠amos a√±adir mapear las variables en funci√≥n de la forma de la geometr√≠a con shape = ... (en realidad si tuvi√©ramos suficientes variables podr√≠amos incluir, solo con ejes + colores + tama√±os + formas + transparencia, hasta 6 variables distintas).Reflexionemos sobre el gr√°fico que acabamos de hacerUsando los datos hemos conseguido dibujar en un gr√°fico bidimensional 4 variables (pop y lifeExp en los ejes X,Y, continent como color y gdpPercap como tama√±o de la geometr√≠a) con muy pocas l√≠neas de c√≥digo, y totalmente adaptado y flexible nuestras necesidades. Respecto los colores, si te fijas R ha elegido autom√°ticamente la paleta de colores pero podemos indicarle alguna paleta concreta de varias maneras.La primera y m√°s inmediata es indicarle los colores manualmente.Otra opci√≥n es elegir alguna de las paletas disponibles en el paquete ggthemes, como scale_color_economist(), scale_color_excel() o scale_color_tableau().Tambi√©n existen m√∫ltiples paquetes que nos proporcionan paletas de colores basados en pel√≠culas (paquete harrypotter descargado desde el repositorio de Github), p√°jaros (paquete Manu) o cuadros (paquete {MetBrewer}).Los gr√°ficos pueden adem√°s personalizarse a√±adiendo, por ejemplo, t√≠tulos y subt√≠tulos de la gr√°fica con `labs()De la misma manera podemos personalizar el t√≠tulo que vamos dar los ejes y tambi√©n el t√≠tulo de las leyendas.Por √∫ltimo, podemos dividir/desagregar los gr√°ficos (facetar) por variables, pintando por ejemplo un gr√°fico por continente, mostrando todos los gr√°ficos la vez pero por separado, con facet_wrap().Podemos hacer lo mismo pero separando, por ejemplo, por a√±os, con el fichero original sin filtrar.Se sale fuera de esta introducci√≥n pero con theme_update() podemos configurar cualquier aspecto del gr√°fico.","code":"\nlibrary(gapminder)\ngapminder## # A tibble: 1,704 √ó 6\n##    country     continent  year lifeExp      pop gdpPercap\n##    <fct>       <fct>     <int>   <dbl>    <int>     <dbl>\n##  1 Afghanistan Asia       1952    28.8  8425333      779.\n##  2 Afghanistan Asia       1957    30.3  9240934      821.\n##  3 Afghanistan Asia       1962    32.0 10267083      853.\n##  4 Afghanistan Asia       1967    34.0 11537966      836.\n##  5 Afghanistan Asia       1972    36.1 13079460      740.\n##  6 Afghanistan Asia       1977    38.4 14880372      786.\n##  7 Afghanistan Asia       1982    39.9 12881816      978.\n##  8 Afghanistan Asia       1987    40.8 13867957      852.\n##  9 Afghanistan Asia       1992    41.7 16317921      649.\n## 10 Afghanistan Asia       1997    41.8 22227415      635.\n## # ‚Ä¶ with 1,694 more rows\nglimpse(gapminder)## Rows: 1,704\n## Columns: 6\n## $ country   <fct> \"Afghanistan\", \"Afghanistan\", \"Afghanistan\", \"Afghanistan\", ‚Ä¶\n## $ continent <fct> Asia, Asia, Asia, Asia, Asia, Asia, Asia, Asia, Asia, Asia, ‚Ä¶\n## $ year      <int> 1952, 1957, 1962, 1967, 1972, 1977, 1982, 1987, 1992, 1997, ‚Ä¶\n## $ lifeExp   <dbl> 28.801, 30.332, 31.997, 34.020, 36.088, 38.438, 39.854, 40.8‚Ä¶\n## $ pop       <int> 8425333, 9240934, 10267083, 11537966, 13079460, 14880372, 12‚Ä¶\n## $ gdpPercap <dbl> 779.4453, 820.8530, 853.1007, 836.1971, 739.9811, 786.1134, ‚Ä¶\ngapminder_1997 <- gapminder %>% filter(year == 1997)\ngapminder_1997## # A tibble: 142 √ó 6\n##    country     continent  year lifeExp       pop gdpPercap\n##    <fct>       <fct>     <int>   <dbl>     <int>     <dbl>\n##  1 Afghanistan Asia       1997    41.8  22227415      635.\n##  2 Albania     Europe     1997    73.0   3428038     3193.\n##  3 Algeria     Africa     1997    69.2  29072015     4797.\n##  4 Angola      Africa     1997    41.0   9875024     2277.\n##  5 Argentina   Americas   1997    73.3  36203463    10967.\n##  6 Australia   Oceania    1997    78.8  18565243    26998.\n##  7 Austria     Europe     1997    77.5   8069876    29096.\n##  8 Bahrain     Asia       1997    73.9    598561    20292.\n##  9 Bangladesh  Asia       1997    59.4 123315288      973.\n## 10 Belgium     Europe     1997    77.5  10199787    27561.\n## # ‚Ä¶ with 132 more rows\nggplot(gapminder_1997, aes(x = gdpPercap, y = pop)) +\n  geom_point() # Geometr√≠a\nggplot(gapminder_1997, aes(y = gdpPercap, x = pop)) +\n  geom_point()\nggplot(gapminder_1997, aes(y = lifeExp, x = pop)) +\n  geom_point()\nggplot(gapminder_1997, aes(y = lifeExp, x = pop)) +\n  geom_point() + scale_x_log10()\n# Color con palabra reservada\nggplot(gapminder_1997, aes(y = lifeExp, x = pop)) +\n  geom_point(color = \"red\") +\n  scale_x_log10()\n# Color en hexadecimal, de la p√°gina https://htmlcolorcodes.com/es/\nggplot(gapminder_1997, aes(y = lifeExp, x = pop)) +\n  geom_point(color = \"#2EA2D8\") +\n  scale_x_log10()\n# Color opaco\nggplot(gapminder_1997, aes(y = lifeExp, x = pop)) +\n  geom_point(color = \"#A02B85\", size = 6) +\n  scale_x_log10()\n# alpha = 50%\nggplot(gapminder_1997, aes(y = lifeExp, x = pop)) +\n  geom_point(color = \"#A02B85\", size = 6, alpha = 0.5) +\n  scale_x_log10()\nggplot(gapminder_1997, aes(y = lifeExp, x = pop, color = continent)) +\n  geom_point(size = 5) +\n  scale_x_log10()\nggplot(gapminder_1997, aes(y = lifeExp, x = pop,\n                           color = continent, size = gdpPercap)) +\n  geom_point(alpha = 0.7) +\n  scale_x_log10()\nggplot(gapminder_1997, aes(y = lifeExp, x = pop,\n                           shape = continent, size = gdpPercap)) +\n  geom_point(alpha = 0.7) +\n  scale_x_log10()\nggplot(gapminder_1997, aes(y = lifeExp, x = pop,\n                           color = continent, size = gdpPercap)) +\n  geom_point(alpha = 0.7) +\n  scale_x_log10()\nggplot(gapminder_1997, aes(y = lifeExp, x = pop,\n                           color = continent, size = gdpPercap)) +\n  geom_point(alpha = 0.7) +\n  scale_x_log10() +\n  scale_color_manual(values = c(\"#A02B85\", \"#2DE86B\", \"#4FB2CA\",\n                                \"#E8DA2D\", \"#E84C2D\"))\nlibrary(ggthemes)\n\n# scale_color_economist()\nggplot(gapminder_1997, aes(y = lifeExp, x = pop,\n                           color = continent, size = gdpPercap)) +\n  geom_point(alpha = 0.9) +\n  scale_x_log10() +\n  scale_color_economist()\n# scale_color_excel()\nggplot(gapminder_1997, aes(y = lifeExp, x = pop,\n                           color = continent, size = gdpPercap)) +\n  geom_point(alpha = 0.9) +\n  scale_x_log10() +\n  scale_color_excel()\n# scale_color_tableau()\nggplot(gapminder_1997, aes(y = lifeExp, x = pop,\n                           color = continent, size = gdpPercap)) +\n  geom_point(alpha = 0.9) +\n  scale_x_log10() +\n  scale_color_tableau()\ndevtools::install_github(repo = \"https://github.com/aljrico/harrypotter\")\nlibrary(harrypotter)\nggplot(gapminder_1997, aes(y = lifeExp, x = pop,\n                           color = continent, size = gdpPercap)) +\n  geom_point(alpha = 0.9) +\n  scale_x_log10() +\n  scale_color_hp_d(option = \"gryffindor\") +\n  labs(title = \"Ejemplo de ggplot2\",\n       subtitle = \"Paleta de Gryffindor\",\n       caption = \"Autor: Javier √Ålvarez Li√©bana | Datos: gapminder\")\nggplot(gapminder_1997, aes(y = lifeExp, x = pop,\n                           color = continent, size = gdpPercap)) +\n  geom_point(alpha = 0.9) +\n  scale_x_log10() +\n  scale_color_hp_d(option = \"hufflepuff\") +\n  labs(title = \"Ejemplo de ggplot2\",\n       subtitle = \"Paleta de Hufflepuff\",\n       caption = \"Autor: Javier √Ålvarez Li√©bana | Datos: gapminder\")\ndevtools::install_github(\"G-Thomson/Manu\")\nlibrary(Manu)\nggplot(gapminder_1997, aes(y = lifeExp, x = pop,\n                           color = continent, size = gdpPercap)) +\n  geom_point(alpha = 0.9) +\n  scale_x_log10() +\n  # paleta del p√°jaro Takahƒì - Porphyrio hochstetteri\n  scale_colour_manual(values = get_pal(\"Takahe\")) +\n  labs(title = \"Ejemplo de ggplot2\",\n       subtitle = \"Paleta del p√°jaro Takahƒì - Porphyrio hochstetteri\",\n       caption = \"Autor: Javier √Ålvarez Li√©bana | Datos: gapminder\")\ndevtools::install_github(\"BlakeRMills/MetBrewer\") \nlibrary(MetBrewer)\nMetBrewer::met.brewer(\"Renoir\")\nMetBrewer::met.brewer(\"Monet\")\nMetBrewer::met.brewer(\"Hokusai\")\nggplot(gapminder_1997, aes(y = lifeExp, x = pop,\n                           color = continent, size = gdpPercap)) +\n  geom_point(alpha = 0.9) +\n  scale_x_log10() +\n  scale_colour_manual(values = met.brewer(\"Klimt\")) +\n  labs(title = \"Ejemplo de ggplot2\",\n       subtitle = \"Paleta de cuadros de Klimt\",\n       caption = \"Autor: Javier √Ålvarez Li√©bana | Datos: gapminder\")\nggplot(gapminder_1997, aes(y = lifeExp, x = pop,\n                           color = continent, size = gdpPercap)) +\n  geom_point(alpha = 0.9) +\n  scale_x_log10() +\n  scale_color_tableau() +\n  labs(title = \"Ejemplo de ggplot2\",\n       subtitle = \"Aprendiendo R sin morir en el intento\",\n       caption = \"Autor: Javier √Ålvarez Li√©bana | Datos: gapminder\")\nggplot(gapminder_1997, aes(y = lifeExp, x = pop,\n                           color = continent, size = gdpPercap)) +\n  geom_point(alpha = 0.9) +\n  scale_x_log10() +\n  scale_color_tableau() +\n  labs(x = \"Poblaci√≥n\", y = \"Esperanza de vida\",\n       color = \"Continente\", size = \"Renta per c√°pita\",\n       title = \"Ejemplo de ggplot2\",\n       subtitle = \"Poblaci√≥n vs esperanza de vida (a√±o 1997)\",\n       caption = \"Autor: Javier √Ålvarez Li√©bana | Datos: gapminder\")\nggplot(gapminder_1997, aes(y = lifeExp, x = pop, size = gdpPercap)) +\n  geom_point(alpha = 0.9) +\n  scale_x_log10() +\n  facet_wrap(~ continent) +\n  labs(x = \"Poblaci√≥n\", y = \"Esperanza de vida\",\n       color = \"Continente\", size = \"Renta per c√°pita\",\n       title = \"Ejemplo de ggplot2\",\n       subtitle = \"Poblaci√≥n vs esperanza de vida (a√±o 1997)\",\n       caption = \"Autor: Javier √Ålvarez Li√©bana | Datos: gapminder\")\nggplot(gapminder, aes(y = lifeExp, x = pop,\n                      size = gdpPercap, color = continent)) +\n  geom_point(alpha = 0.6) +\n  scale_x_log10() +\n  facet_wrap(~ year) +\n  scale_color_tableau() +\n  labs(x = \"Poblaci√≥n\", y = \"Esperanza de vida\",\n       color = \"Continente\", size = \"Renta per c√°pita\",\n       title = \"Ejemplo de ggplot2\",\n       subtitle = \"Poblaci√≥n vs esperanza de vida (a√±o 1997)\",\n       caption = \"Autor: Javier √Ålvarez Li√©bana | Datos: gapminder\")\ntheme_update(\n  # T√≠tulo, subt√≠tulo y caption\n  plot.title = element_text(size = 21, face = \"bold\", color = \"#2a475e\"),\n  plot.subtitle = element_text(size = 11, face = \"bold\",\n                               color = \"black\"),\n  plot.caption = element_text(size = 9, color = \"black\"),\n  # Ejes\n  axis.title = element_text(size = 11, color = \"grey30\"),\n  # L√≠neas de los ejes\n  axis.line = element_line(colour = \"grey50\"),\n  # Fondo dentro de la gr?fica sin formato\n  rect = element_blank(),\n  # L√≠neas del grid\n  panel.grid = element_line(color = \"#b4aea9\"),\n  # Sin grid secuendario (intermedio entre el grande)\n  panel.grid.minor = element_blank(),\n  # Grid principal\n  panel.grid.major.x =  element_line(linetype = \"dashed\"),\n  panel.grid.major.y = element_line(linetype = \"dashed\"),\n  # Color de fondo\n  plot.background =\n    element_rect(fill = \"#fbf9f4\", color = \"#fbf9f4\"),\n  plot.margin = # m?rgenes\n      margin(t = 0.3, b = 0.3, r = 0.5, l = 0.5, \"cm\"))\n\nggplot(gapminder_1997, aes(y = lifeExp, x = pop,\n                           color = continent, size = gdpPercap)) +\n  geom_point(alpha = 0.9) +\n  scale_x_log10() +\n  scale_color_tableau() +\n  labs(x = \"Poblaci√≥n\", y = \"Esperanza de vida\",\n       color = \"Continent\", size = \"Renta per c√°pita\",\n       title = \"Ejemplo de ggplot2\",\n       subtitle = \"Aprendiendo R sin morir en el intento\",\n       caption = \"Autor: Javier √Ålvarez Li√©bana | Datos: gapminder\")"},{"path":"recursos.html","id":"recursos-para-seguir","chapter":"Cap√≠tulo 16 Recursos extras","heading":"16.5 Recursos para seguir","text":"Ahora que ya sabes lo b√°sico para poder empezar trabajar en un entorno amigable, aunque la idea es que este manual tenga m√°s cap√≠tulos (¬ølos tiene?) para seguir avanzando, por si se olvida, te dejo una lista de recursos √∫tiles para que puedas ir viendo el abanico de opciones que tienesC√≥digo de este manual: este manual est√° programado en s√≠ mismo en R y los c√≥digos pueden ser consultados libremente en el repositorio de GitHub.Cursos y selecci√≥n de paquetes: recopilatorio y selecci√≥n de tutoriales y cursos de R en distintos campos.Cursos y selecci√≥n de paquetes: recopilatorio y selecci√≥n de tutoriales y cursos de R en distintos campos.Incursi√≥n los modelos de regresi√≥n en R: manual sobre el uso de distintos modelos predictivos basados los Modelos Lineales Generalizados (GLM).Incursi√≥n los modelos de regresi√≥n en R: manual sobre el uso de distintos modelos predictivos basados los Modelos Lineales Generalizados (GLM).Visualizador de Tidyverse: permite visualizar las acciones que haces sobre las tablas para entender mejor el c√≥digo.Visualizador de Tidyverse: permite visualizar las acciones que haces sobre las tablas para entender mejor el c√≥digo.Tidymodels: para aprender dominar tidymodels, un conjunto de paquetes pensados para el Machine Learning con la misma filosof√≠a flexible pero uniforme de tidyverse. Tambi√©n es interesante este tutorial para entender un poco los conceptos de data mining y machine learning en R.Tidymodels: para aprender dominar tidymodels, un conjunto de paquetes pensados para el Machine Learning con la misma filosof√≠a flexible pero uniforme de tidyverse. Tambi√©n es interesante este tutorial para entender un poco los conceptos de data mining y machine learning en R.ggplot2: recomiendo mucho las entradas sencillas de el arte del dato para ir dominando, el trabajo de Dominic Roy√© y el de Cedric Scherer. Tambi√©n existen las gr√°ficas interactivas plotly (pasas el rat√≥n y te dan info), y puedes o aprenderlas de 0 o convertir tus ggplot en interactivosggplot2: recomiendo mucho las entradas sencillas de el arte del dato para ir dominando, el trabajo de Dominic Roy√© y el de Cedric Scherer. Tambi√©n existen las gr√°ficas interactivas plotly (pasas el rat√≥n y te dan info), y puedes o aprenderlas de 0 o convertir tus ggplot en interactivosTablas en RTablas en RPaquete para aprender R: el paquete swirl permite ir aprendiendo de forma sencilla (con preguntas tipo test) algunos conceptos b√°sicos de R (muchos de ellos vistos en este manual). Puedes consultar la documentaci√≥n en su p√°gina webPaquete para aprender R: el paquete swirl permite ir aprendiendo de forma sencilla (con preguntas tipo test) algunos conceptos b√°sicos de R (muchos de ellos vistos en este manual). Puedes consultar la documentaci√≥n en su p√°gina webTidyverse cookbookTidyverse skills data scienceVisualizaci√≥n de datos en Twitter: una de las fortalezas de R es su versatilidad para la visualizaci√≥n de datos. Y al igual que un escritor necesita leer mucho para tomar ideas, hay dos recursos en Twitter que te recomiendo encarecidamente:\nEl hashtag #TidyTuesday es una etiqueta en la que cada semana se plantea el reto de proponer la mejor visualizaci√≥n para un conjunto de datos dado, donde solo puedes participar con la comunidad sino ver las visualizaciones de otros usuarios de R.\nAdem√°s elaborado una lista de Twitter de usuarios que se dedican la visualizaci√≥n de datos.\nEl hashtag #TidyTuesday es una etiqueta en la que cada semana se plantea el reto de proponer la mejor visualizaci√≥n para un conjunto de datos dado, donde solo puedes participar con la comunidad sino ver las visualizaciones de otros usuarios de R.Adem√°s elaborado una lista de Twitter de usuarios que se dedican la visualizaci√≥n de datos.Datacamp: compendio de cursos que si superas te dan un certificado y sales con un control muy muy potente de data science en R. Son ejercicios sencillos que se van complicando, y la plataforma funciona con tarifa plana: como un netflix de cursos.Datacamp: compendio de cursos que si superas te dan un certificado y sales con un control muy muy potente de data science en R. Son ejercicios sencillos que se van complicando, y la plataforma funciona con tarifa plana: como un netflix de cursos.Generaci√≥n de informes desde R: el paquete rmarkdown permite generar directamente informes que mezclen texto, f√≥rmulas matem√°ticas, gr√°ficas y c√≥digo R (como este mismo manual), sin necesidad de importarlos otras herramientas de Office.Generaci√≥n de informes desde R: el paquete rmarkdown permite generar directamente informes que mezclen texto, f√≥rmulas matem√°ticas, gr√°ficas y c√≥digo R (como este mismo manual), sin necesidad de importarlos otras herramientas de Office.Webs en bookdown. Tambi√©n se puede crear apps/webs interactivas con c√≥digo R, permitiendo que el usuario selecciona par√°metros y se ejecuta c√≥digo gr√°ficas: ver https://shiny.rstudio.com/tutorial/. Un ejemplo es la web de visualizaci√≥n covid de Asturias que elabor√© durante la pandemia para el Gobierno de Asturias (la web en s√≠ est√° elaborada con shiny, un paquete de R que permite crear aplicaciones web).Webs en bookdown. Tambi√©n se puede crear apps/webs interactivas con c√≥digo R, permitiendo que el usuario selecciona par√°metros y se ejecuta c√≥digo gr√°ficas: ver https://shiny.rstudio.com/tutorial/. Un ejemplo es la web de visualizaci√≥n covid de Asturias que elabor√© durante la pandemia para el Gobierno de Asturias (la web en s√≠ est√° elaborada con shiny, un paquete de R que permite crear aplicaciones web).Comunidad de R hispano: tenemos un grupo de Discord y grupo de Telegram varios usuarios de R en Espa√±a para compartir recursos.Comunidad de R hispano: tenemos un grupo de Discord y grupo de Telegram varios usuarios de R en Espa√±a para compartir recursos.","code":""},{"path":"contribuye.html","id":"contribuye","chapter":"Cap√≠tulo 17 Contribuye al proyecto","heading":"Cap√≠tulo 17 Contribuye al proyecto","text":"\nImagen/gr√°fica 17.1: Holi.\nEspero que te haya servido de ayuda este manual, para ser un experto en R (ya que el manual pretend√≠a dicho objetivo) sino ser capaz de ENTENDER c√≥mo funciona R y quitarte el miedo empezar tus an√°lisis, para que te sirva de punto de partidaLa idea es que haya otros manuales m√°s avanzados, que partan de lo aprendido en este, pero si quieres (y te ha servido) puedes dejarme tu feedback y/o difundir dicho material por redes. Te dejo por aqu√≠ las m√≠as:TwitterInstagramWebNewsletterSi adem√°s crees que este trabajo lo merece, as√≠ como mi divulgaci√≥n en dichas redes, puedes dejar una peque√±a contribuci√≥n econ√≥mica en el Patreon.Patreon","code":""},{"path":"bibliograf√≠a.html","id":"bibliograf√≠a","chapter":"Bibliograf√≠a","heading":"Bibliograf√≠a","text":"Dasu, T., T. Johnson. 2003. Exploratory Data Mining Data Cleaning. John Wiley & Sons.Wickham, H. 2014. ‚ÄúJournal Statistical Software.‚Äù Tidy Data 59 (10).Xie, Yihui. 2015. Dynamic Documents R Knitr. 2nd ed. Boca Raton, Florida: Chapman; Hall/CRC. http://yihui.org/knitr/.Ziemann, M., Y. Eren, . El-Osta. 2016. ‚ÄúGene Name Errors Widespread Scientific Literature.‚Äù Genome Biology 17 (177).","code":""}]
